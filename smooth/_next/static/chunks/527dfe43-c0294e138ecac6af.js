(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[430],{6817:function(e,t,r){var n;(n=function(e){"use strict";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */ var t,n,i,s,o,a,l,h,u,d,c,g,f,w,A,C,E,m,_=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},I=function(e){function t(t){var r,n,i,s,o,a,l=this.constructor,h=e.call(this,t)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),r=h,n=l.prototype,(i=Object.setPrototypeOf)?i(r,n):r.__proto__=n,void 0===o&&(o=h.constructor),(a=Error.captureStackTrace)&&a(h,o),h}return function(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error);class S extends I{constructor(e){super(e),this.message=e}getKind(){let e=this.constructor;return e.kind}}S.kind="Exception";class p extends S{}p.kind="ArgumentException";class T extends S{}T.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,null===e)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,r,n){let i=this.binarizer.getLuminanceSource().crop(e,t,r,n);return new R(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class N extends S{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class D{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class y{static arraycopy(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}static currentTimeMillis(){return Date.now()}}class O extends S{}O.kind="IndexOutOfBoundsException";class M extends O{constructor(e,t){super(t),this.index=e,this.message=t}}M.kind="ArrayIndexOutOfBoundsException";class B{static fill(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t}static fillWithin(e,t,r,n){B.rangeCheck(e.length,t,r);for(let i=t;i<r;i++)e[i]=n}static rangeCheck(e,t,r){if(t>r)throw new T("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new M(t);if(r>e)throw new M(r)}static asList(...e){return e}static create(e,t,r){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(r))}static createInt32Array(e,t,r){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(r))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(let r of e)t=31*t+r;return t}static fillUint8Array(e,t){for(let r=0;r!==e.length;r++)e[r]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){let r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)}static copyOfRange(e,t,r){let n=r-t,i=new Int32Array(n);return y.arraycopy(e,t,i,0,n),i}static binarySearch(e,t,r){void 0===r&&(r=B.numberComparator);let n=0,i=e.length-1;for(;n<=i;){let s=i+n>>1,o=r(t,e[s]);if(o>0)n=s+1;else{if(!(o<0))return s;i=s-1}}return-n-1}static numberComparator(e,t){return e-t}}class b{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let r=31;return 0!=(t=e<<16)&&(r-=16,e=t),0!=(t=e<<8)&&(r-=8,e=t),0!=(t=e<<4)&&(r-=4,e=t),0!=(t=e<<2)&&(r-=2,e=t),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-=e>>>31}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e-=e>>>1&1431655765,e=(e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t){return parseInt(e,t)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,null==t?this.bits=P.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){let t=P.makeArray(e);y.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(31&e))!=0}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){let t=this.size;if(e>=t)return t;let r=this.bits,n=Math.floor(e/32),i=r[n];i&=~((1<<(31&e))-1);let s=r.length;for(;0===i;){if(++n===s)return t;i=r[n]}let o=32*n+b.numberOfTrailingZeros(i);return o>t?t:o}getNextUnset(e){let t=this.size;if(e>=t)return t;let r=this.bits,n=Math.floor(e/32),i=~r[n];i&=~((1<<(31&e))-1);let s=r.length;for(;0===i;){if(++n===s)return t;i=~r[n]}let o=32*n+b.numberOfTrailingZeros(i);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new T;if(t===e)return;t--;let r=Math.floor(e/32),n=Math.floor(t/32),i=this.bits;for(let s=r;s<=n;s++){let o=s>r?0:31&e,a=s<n?31:31&t,l=(2<<a)-(1<<o);i[s]|=l}}clear(){let e=this.bits.length,t=this.bits;for(let r=0;r<e;r++)t[r]=0}isRange(e,t,r){if(t<e||e<0||t>this.size)throw new T;if(t===e)return!0;t--;let n=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let o=n;o<=i;o++){let a=o>n?0:31&e,l=o<i?31:31&t,h=(2<<l)-(1<<a)&4294967295;if((s[o]&h)!==(r?h:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let r=t;r>0;r--)this.appendBit((e>>r-1&1)==1)}appendBitArray(e){let t=e.size;this.ensureCapacity(this.size+t);for(let r=0;r<t;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");let t=this.bits;for(let r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]}toBytes(e,t,r,n){for(let i=0;i<n;i++){let s=0;for(let o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[r+i]=s}}getBitArray(){return this.bits}reverse(){let e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits;for(let i=0;i<r;i++){let s=n[i];s=(s=(s=(s=(s=s>>1&1431655765|(1431655765&s)<<1)>>2&858993459|(858993459&s)<<2)>>4&252645135|(252645135&s)<<4)>>8&16711935|(16711935&s)<<8)>>16&65535|(65535&s)<<16,e[t-i]=s}if(this.size!==32*r){let o=32*r-this.size,a=e[0]>>>o;for(let l=1;l<r;l++){let h=e[l];a|=h<<32-o,e[l-1]=a,a=h>>>o}e[r-1]=a}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){return e instanceof P&&this.size===e.size&&B.equals(this.bits,e.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let e="";for(let t=0,r=this.size;t<r;t++)(7&t)==0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new P(this.size,this.bits.slice())}}(J=h||(h={}))[J.OTHER=0]="OTHER",J[J.PURE_BARCODE=1]="PURE_BARCODE",J[J.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",J[J.TRY_HARDER=3]="TRY_HARDER",J[J.CHARACTER_SET=4]="CHARACTER_SET",J[J.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",J[J.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",J[J.ASSUME_GS1=7]="ASSUME_GS1",J[J.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",J[J.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",J[J.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS";var L=h;class F extends S{static getFormatInstance(){return new F}}F.kind="FormatException",($=u||(u={}))[$.Cp437=0]="Cp437",$[$.ISO8859_1=1]="ISO8859_1",$[$.ISO8859_2=2]="ISO8859_2",$[$.ISO8859_3=3]="ISO8859_3",$[$.ISO8859_4=4]="ISO8859_4",$[$.ISO8859_5=5]="ISO8859_5",$[$.ISO8859_6=6]="ISO8859_6",$[$.ISO8859_7=7]="ISO8859_7",$[$.ISO8859_8=8]="ISO8859_8",$[$.ISO8859_9=9]="ISO8859_9",$[$.ISO8859_10=10]="ISO8859_10",$[$.ISO8859_11=11]="ISO8859_11",$[$.ISO8859_13=12]="ISO8859_13",$[$.ISO8859_14=13]="ISO8859_14",$[$.ISO8859_15=14]="ISO8859_15",$[$.ISO8859_16=15]="ISO8859_16",$[$.SJIS=16]="SJIS",$[$.Cp1250=17]="Cp1250",$[$.Cp1251=18]="Cp1251",$[$.Cp1252=19]="Cp1252",$[$.Cp1256=20]="Cp1256",$[$.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",$[$.UTF8=22]="UTF8",$[$.ASCII=23]="ASCII",$[$.Big5=24]="Big5",$[$.GB18030=25]="GB18030",$[$.EUC_KR=26]="EUC_KR";class v{constructor(e,t,r,...n){this.valueIdentifier=e,this.name=r,"number"==typeof t?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=n,v.VALUE_IDENTIFIER_TO_ECI.set(e,this),v.NAME_TO_ECI.set(r,this);let i=this.values;for(let s=0,o=i.length;s!==o;s++){let a=i[s];v.VALUES_TO_ECI.set(a,this)}for(let l of n)v.NAME_TO_ECI.set(l,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new F("incorect value");let t=v.VALUES_TO_ECI.get(e);if(void 0===t)throw new F("incorect value");return t}static getCharacterSetECIByName(e){let t=v.NAME_TO_ECI.get(e);if(void 0===t)throw new F("incorect value");return t}equals(e){return e instanceof v&&this.getName()===e.getName()}}v.VALUE_IDENTIFIER_TO_ECI=new Map,v.VALUES_TO_ECI=new Map,v.NAME_TO_ECI=new Map,v.Cp437=new v(u.Cp437,Int32Array.from([0,2]),"Cp437"),v.ISO8859_1=new v(u.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),v.ISO8859_2=new v(u.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),v.ISO8859_3=new v(u.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),v.ISO8859_4=new v(u.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),v.ISO8859_5=new v(u.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),v.ISO8859_6=new v(u.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),v.ISO8859_7=new v(u.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),v.ISO8859_8=new v(u.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),v.ISO8859_9=new v(u.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),v.ISO8859_10=new v(u.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),v.ISO8859_11=new v(u.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),v.ISO8859_13=new v(u.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),v.ISO8859_14=new v(u.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),v.ISO8859_15=new v(u.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),v.ISO8859_16=new v(u.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),v.SJIS=new v(u.SJIS,20,"SJIS","Shift_JIS"),v.Cp1250=new v(u.Cp1250,21,"Cp1250","windows-1250"),v.Cp1251=new v(u.Cp1251,22,"Cp1251","windows-1251"),v.Cp1252=new v(u.Cp1252,23,"Cp1252","windows-1252"),v.Cp1256=new v(u.Cp1256,24,"Cp1256","windows-1256"),v.UnicodeBigUnmarked=new v(u.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),v.UTF8=new v(u.UTF8,26,"UTF8","UTF-8"),v.ASCII=new v(u.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),v.Big5=new v(u.Big5,28,"Big5"),v.GB18030=new v(u.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),v.EUC_KR=new v(u.EUC_KR,30,"EUC_KR","EUC-KR");class k extends S{}k.kind="UnsupportedOperationException";class x{static decode(e,t){let r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!x.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){let r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"==typeof TextEncoder?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"===({}).toString.call(window)}static encodingName(e){return"string"==typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof v?e:v.getCharacterSetECIByName(e)}static decodeFallback(e,t){let r=this.encodingCharacterSet(t);if(x.isDecodeFallbackSupported(r)){let n="";for(let i=0,s=e.length;i<s;i++){let o=e[i].toString(16);o.length<2&&(o="0"+o),n+="%"+o}return decodeURIComponent(n)}if(r.equals(v.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new k(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(v.UTF8)||e.equals(v.ISO8859_1)||e.equals(v.ASCII)}static encodeFallback(e){let t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),n=[];for(let i=0;i<r.length;i++)n.push(r[i].charCodeAt(0));return new Uint8Array(n)}}class V{static castAsNonUtf8Char(e,t=null){let r=t?t.getName():this.ISO88591;return x.decode(new Uint8Array([e]),r)}static guessEncoding(e,t){if(null!=t&&void 0!==t.get(L.CHARACTER_SET))return t.get(L.CHARACTER_SET).toString();let r=e.length,n=!0,i=!0,s=!0,o=0,a=0,l=0,h=0,u=0,d=0,c=0,g=0,f=0,w=0,A=0,C=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let E=0;E<r&&(n||i||s);E++){let m=255&e[E];s&&(o>0?(128&m)==0?s=!1:o--:(128&m)!=0&&((64&m)==0?s=!1:(o++,(32&m)==0?a++:(o++,(16&m)==0?l++:(o++,(8&m)==0?h++:s=!1))))),n&&(m>127&&m<160?n=!1:m>159&&(m<192||215===m||247===m)&&A++),i&&(u>0?m<64||127===m||m>252?i=!1:u--:128===m||160===m||m>239?i=!1:m>160&&m<224?(d++,g=0,++c>f&&(f=c)):m>127?(u++,c=0,++g>w&&(w=g)):(c=0,g=0))}return(s&&o>0&&(s=!1),i&&u>0&&(i=!1),s&&(C||a+l+h>0))?V.UTF8:i&&(V.ASSUME_SHIFT_JIS||f>=3||w>=3)?V.SHIFT_JIS:n&&i?2===f&&2===d||10*A>=r?V.SHIFT_JIS:V.ISO88591:n?V.ISO88591:i?V.SHIFT_JIS:s?V.UTF8:V.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,i,s,o,a){if("%%"===e)return"%";if(void 0===t[++r])return;e=s?parseInt(s.substr(1)):void 0;let l=o?parseInt(o.substr(1)):void 0,h;switch(a){case"s":h=t[r];break;case"c":h=t[r][0];break;case"f":h=parseFloat(t[r]).toFixed(e);break;case"p":h=parseFloat(t[r]).toPrecision(e);break;case"e":h=parseFloat(t[r]).toExponential(e);break;case"x":h=parseInt(t[r]).toString(l||16);break;case"d":h=parseFloat(parseInt(t[r],l||10).toPrecision(e)).toFixed(0)}h="object"==typeof h?JSON.stringify(h):(+h).toString(l);let u=parseInt(i),d=i&&i[0]+""=="0"?"0":" ";for(;h.length<u;)h=void 0!==n?h+d:d+h;return h})}static getBytes(e,t){return x.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}V.SHIFT_JIS=v.SJIS.getName(),V.GB2312="GB2312",V.ISO88591=v.ISO8859_1.getName(),V.EUC_JP="EUC_JP",V.UTF8=v.UTF8.getName(),V.PLATFORM_DEFAULT_ENCODING=V.UTF8,V.ASSUME_SHIFT_JIS=!1;class U{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=V.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,r){for(let n=t;t<t+r;n++)this.append(e[n]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class H{constructor(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,null==t&&(t=e),this.height=t,e<1||t<1)throw new T("Both dimensions must be greater than 0");null==r&&(r=Math.floor((e+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){let t=e.length,r=e[0].length,n=new H(r,t);for(let i=0;i<t;i++){let s=e[i];for(let o=0;o<r;o++)s[o]&&n.set(o,i)}return n}static parseFromString(e,t,r){if(null===e)throw new T("stringRepresentation cannot be null");let n=Array(e.length),i=0,s=0,o=-1,a=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new T("row lengths do not match");s=i,a++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,n[i]=!0,i++;else if(e.substring(l,l+r.length)===r)l+=r.length,n[i]=!1,i++;else throw new T("illegal character encountered: "+e.substring(l));if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new T("row lengths do not match");a++}let h=new H(o,a);for(let u=0;u<i;u++)n[u]&&h.set(Math.floor(u%o),Math.floor(u/o));return h}get(e,t){let r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(31&e)&1)!=0}set(e,t){let r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295}unset(e,t){let r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)}flip(e,t){let r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");let t=new P(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,s=this.height;i<s;i++){let o=i*r,a=e.getRow(i,t).getBitArray();for(let l=0;l<r;l++)n[o+l]^=a[l]}}clear(){let e=this.bits,t=e.length;for(let r=0;r<t;r++)e[r]=0}setRegion(e,t,r,n){if(t<0||e<0)throw new T("Left and top must be nonnegative");if(n<1||r<1)throw new T("Height and width must be at least 1");let i=e+r,s=t+n;if(s>this.height||i>this.width)throw new T("The region must fit inside the matrix");let o=this.rowSize,a=this.bits;for(let l=t;l<s;l++){let h=l*o;for(let u=e;u<i;u++)a[h+Math.floor(u/32)]|=1<<(31&u)&4294967295}}getRow(e,t){null==t||t.getSize()<this.width?t=new P(this.width):t.clear();let r=this.rowSize,n=this.bits,i=e*r;for(let s=0;s<r;s++)t.setBulk(32*s,n[i+s]);return t}setRow(e,t){y.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){let e=this.getWidth(),t=this.getHeight(),r=new P(e),n=new P(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)r=this.getRow(i,r),n=this.getRow(t-1-i,n),r.reverse(),n.reverse(),this.setRow(i,n),this.setRow(t-1-i,r)}getEnclosingRectangle(){let e=this.width,t=this.height,r=this.rowSize,n=this.bits,i=e,s=t,o=-1,a=-1;for(let l=0;l<t;l++)for(let h=0;h<r;h++){let u=n[l*r+h];if(0!==u){if(l<s&&(s=l),l>a&&(a=l),32*h<i){let d=0;for(;(u<<31-d&4294967295)==0;)d++;32*h+d<i&&(i=32*h+d)}if(32*h+31>o){let c=31;for(;u>>>c==0;)c--;32*h+c>o&&(o=32*h+c)}}}return o<i||a<s?null:Int32Array.from([i,s,o-i+1,a-s+1])}getTopLeftOnBit(){let e=this.rowSize,t=this.bits,r=0;for(;r<t.length&&0===t[r];)r++;if(r===t.length)return null;let n=r/e,i=r%e*32,s=t[r],o=0;for(;(s<<31-o&4294967295)==0;)o++;return i+=o,Int32Array.from([i,n])}getBottomRightOnBit(){let e=this.rowSize,t=this.bits,r=t.length-1;for(;r>=0&&0===t[r];)r--;if(r<0)return null;let n=Math.floor(r/e),i=32*Math.floor(r%e),s=t[r],o=31;for(;s>>>o==0;)o--;return i+=o,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){return e instanceof H&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&B.equals(this.bits,e.bits)}hashCode(){let e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+B.hashCode(this.bits)}toString(e="X ",t="  ",r="\n"){return this.buildToString(e,t,r)}buildToString(e,t,r){let n=new U;for(let i=0,s=this.height;i<s;i++){for(let o=0,a=this.width;o<a;o++)n.append(this.get(o,i)?e:t);n.append(r)}return n.toString()}clone(){return new H(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends S{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class X extends D{constructor(e){super(e),this.luminances=X.EMPTY,this.buckets=new Int32Array(X.LUMINANCE_BUCKETS)}getBlackRow(e,t){let r=this.getLuminanceSource(),n=r.getWidth();null==t||t.getSize()<n?t=new P(n):t.clear(),this.initArrays(n);let i=r.getRow(e,this.luminances),s=this.buckets;for(let o=0;o<n;o++)s[(255&i[o])>>X.LUMINANCE_SHIFT]++;let a=X.estimateBlackPoint(s);if(n<3)for(let l=0;l<n;l++)(255&i[l])<a&&t.set(l);else{let h=255&i[0],u=255&i[1];for(let d=1;d<n-1;d++){let c=255&i[d+1];(4*u-h-c)/2<a&&t.set(d),h=u,u=c}}return t}getBlackMatrix(){let e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),n=new H(t,r);this.initArrays(t);let i=this.buckets;for(let s=1;s<5;s++){let o=Math.floor(r*s/5),a=e.getRow(o,this.luminances),l=Math.floor(4*t/5);for(let h=Math.floor(t/5);h<l;h++){let u=255&a[h];i[u>>X.LUMINANCE_SHIFT]++}}let d=X.estimateBlackPoint(i),c=e.getMatrix();for(let g=0;g<r;g++){let f=g*t;for(let w=0;w<t;w++){let A=255&c[f+w];A<d&&n.set(w,g)}}return n}createBinarizer(e){return new X(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));let t=this.buckets;for(let r=0;r<X.LUMINANCE_BUCKETS;r++)t[r]=0}static estimateBlackPoint(e){let t=e.length,r=0,n=0,i=0;for(let s=0;s<t;s++)e[s]>i&&(n=s,i=e[s]),e[s]>r&&(r=e[s]);let o=0,a=0;for(let l=0;l<t;l++){let h=l-n,u=e[l]*h*h;u>a&&(o=l,a=u)}if(n>o){let d=n;n=o,o=d}if(o-n<=t/16)throw new G;let c=o-1,g=-1;for(let f=o-1;f>n;f--){let w=f-n,A=w*w*(o-f)*(r-e[f]);A>g&&(c=f,g=A)}return c<<X.LUMINANCE_SHIFT}}X.LUMINANCE_BITS=5,X.LUMINANCE_SHIFT=8-X.LUMINANCE_BITS,X.LUMINANCE_BUCKETS=1<<X.LUMINANCE_BITS,X.EMPTY=Uint8ClampedArray.from([0]);class W extends X{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;let e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=W.MINIMUM_DIMENSION&&r>=W.MINIMUM_DIMENSION){let n=e.getMatrix(),i=t>>W.BLOCK_SIZE_POWER;(t&W.BLOCK_SIZE_MASK)!=0&&i++;let s=r>>W.BLOCK_SIZE_POWER;(r&W.BLOCK_SIZE_MASK)!=0&&s++;let o=W.calculateBlackPoints(n,i,s,t,r),a=new H(t,r);W.calculateThresholdForBlock(n,i,s,t,r,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new W(e)}static calculateThresholdForBlock(e,t,r,n,i,s,o){let a=i-W.BLOCK_SIZE,l=n-W.BLOCK_SIZE;for(let h=0;h<r;h++){let u=h<<W.BLOCK_SIZE_POWER;u>a&&(u=a);let d=W.cap(h,2,r-3);for(let c=0;c<t;c++){let g=c<<W.BLOCK_SIZE_POWER;g>l&&(g=l);let f=W.cap(c,2,t-3),w=0;for(let A=-2;A<=2;A++){let C=s[d+A];w+=C[f-2]+C[f-1]+C[f]+C[f+1]+C[f+2]}let E=w/25;W.thresholdBlock(e,g,u,E,n,o)}}}static cap(e,t,r){return e<t?t:e>r?r:e}static thresholdBlock(e,t,r,n,i,s){for(let o=0,a=r*i+t;o<W.BLOCK_SIZE;o++,a+=i)for(let l=0;l<W.BLOCK_SIZE;l++)(255&e[a+l])<=n&&s.set(t+l,r+o)}static calculateBlackPoints(e,t,r,n,i){let s=i-W.BLOCK_SIZE,o=n-W.BLOCK_SIZE,a=Array(r);for(let l=0;l<r;l++){a[l]=new Int32Array(t);let h=l<<W.BLOCK_SIZE_POWER;h>s&&(h=s);for(let u=0;u<t;u++){let d=u<<W.BLOCK_SIZE_POWER;d>o&&(d=o);let c=0,g=255,f=0;for(let w=0,A=h*n+d;w<W.BLOCK_SIZE;w++,A+=n){for(let C=0;C<W.BLOCK_SIZE;C++){let E=255&e[A+C];c+=E,E<g&&(g=E),E>f&&(f=E)}if(f-g>W.MIN_DYNAMIC_RANGE)for(w++,A+=n;w<W.BLOCK_SIZE;w++,A+=n)for(let m=0;m<W.BLOCK_SIZE;m++)c+=255&e[A+m]}let _=c>>2*W.BLOCK_SIZE_POWER;if(f-g<=W.MIN_DYNAMIC_RANGE&&(_=g/2,l>0&&u>0)){let I=(a[l-1][u]+2*a[l][u-1]+a[l-1][u-1])/4;g<I&&(_=I)}a[l][u]=_}}return a}}W.BLOCK_SIZE_POWER=3,W.BLOCK_SIZE=1<<W.BLOCK_SIZE_POWER,W.BLOCK_SIZE_MASK=W.BLOCK_SIZE-1,W.MINIMUM_DIMENSION=5*W.BLOCK_SIZE,W.MIN_DYNAMIC_RANGE=24;class z{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,r,n){throw new k("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new k("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new k("This luminance source does not support rotation by 45 degrees.")}toString(){let e=new Uint8ClampedArray(this.width),t=new U;for(let r=0;r<this.height;r++){let n=this.getRow(r,e);for(let i=0;i<this.width;i++){let s=255&n[i],o;o=s<64?"#":s<128?"+":s<192?".":" ",t.append(o)}t.append("\n")}return t.toString()}}class Y extends z{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){let r=this.delegate.getRow(e,t),n=this.getWidth();for(let i=0;i<n;i++)r[i]=255-(255&r[i]);return r}getMatrix(){let e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t);for(let n=0;n<t;n++)r[n]=255-(255&e[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,r,n){return new Y(this.delegate.crop(e,t,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Y(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Y(this.delegate.rotateCounterClockwise45())}}class Z extends z{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Z.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){let t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Z.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,r){let n=new Uint8ClampedArray(t*r);for(let i=0,s=0,o=e.length;i<o;i+=4,s++){let a,l=e[i+3];if(0===l)a=255;else{let h=e[i],u=e[i+1],d=e[i+2];a=306*h+601*u+117*d+512>>10}n[s]=a}return n}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);let r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,r,n){return super.crop(e,t,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){let e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){let t=this.getTempCanvasElement(),r=t.getContext("2d"),n=e*Z.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*s),a=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*s);return t.width=o,t.height=a,r.translate(o/2,a/2),r.rotate(n),r.drawImage(this.canvas,-(i/2),-(s/2)),this.buffer=Z.makeBufferFromCanvasImageData(t),this}invert(){return new Y(this)}}Z.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var q=(globalThis||r.g||self||window||void 0)&&(globalThis||r.g||self||window||void 0).__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};class Q{constructor(e,t=500,r){this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");let e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(let r of e){let n="video"===r.kind?"videoinput":r.kind;if("videoinput"!==n)continue;let i=r.deviceId||r.id,s=r.label||`Video device ${t.length+1}`,o=r.groupId,a={deviceId:i,label:s,kind:n,groupId:o};t.push(a)}return t})}getVideoInputDevices(){return q(this,void 0,void 0,function*(){let e=yield this.listVideoInputDevices();return e.map(e=>new K(e.deviceId,e.label))})}findDeviceById(e){return q(this,void 0,void 0,function*(){let t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return q(this,void 0,void 0,function*(){this.reset();let r;return r=e?{deviceId:{exact:e}}:{facingMode:"environment"},yield this.decodeOnceFromConstraints({video:r},t)})}decodeOnceFromConstraints(e,t){return q(this,void 0,void 0,function*(){let r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,t)})}decodeOnceFromStream(e,t){return q(this,void 0,void 0,function*(){this.reset();let r=yield this.attachStreamToVideo(e,t),n=yield this.decodeOnce(r);return n})}decodeFromInputVideoDeviceContinuously(e,t,r){return q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,r)})}decodeFromVideoDevice(e,t,r){return q(this,void 0,void 0,function*(){let n;return n=e?{deviceId:{exact:e}}:{facingMode:"environment"},yield this.decodeFromConstraints({video:n},t,r)})}decodeFromConstraints(e,t,r){return q(this,void 0,void 0,function*(){let n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(n,t,r)})}decodeFromStream(e,t,r){return q(this,void 0,void 0,function*(){this.reset();let n=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return q(this,void 0,void 0,function*(){let r=this.prepareVideoElement(t);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((t,r)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return q(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){let r=document.getElementById(e);if(!r)throw new p(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new p(`element with id '${e}' must be an ${t} element`);return r}decodeFromImage(e,t){if(!e&&!t)throw new p("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new p("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,r){if(void 0===e&&void 0===t)throw new p("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new p("An image element must be provided.");this.reset();let t=this.prepareImageElement(e);this.imageElement=t;let r;return this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)}decodeFromVideoElement(e){let t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){let r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)}_decodeFromVideoElementSetup(e){if(!e)throw new p("A video element must be provided.");this.reset();let t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new p("An URL must be provided.");this.reset();let t=this.prepareImageElement();this.imageElement=t;let r=this._decodeOnLoadImage(t);return t.src=e,r}decodeFromVideoUrl(e){if(!e)throw new p("An URL must be provided.");this.reset();let t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r}decodeFromVideoUrlContinuously(e,t){if(!e)throw new p("An URL must be provided.");this.reset();let r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n}_decodeOnLoadImage(e){return new Promise((t,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"==typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,r=!0){this._stopAsyncDecode=!1;let n=(i,s)=>{if(this._stopAsyncDecode){s(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let o=this.decode(e);i(o)}catch(h){let a=t&&h instanceof G,l=h instanceof N||h instanceof F;if(a||l&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,i,s);s(h)}};return new Promise((e,t)=>n(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;let r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let n=this.decode(e);t(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(o){t(null,o);let i=o instanceof N||o instanceof F,s=o instanceof G;(i||s)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){let t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}createBinaryBitmap(e){let t=this.getCaptureCanvasContext(e);this.drawImageOnCanvas(t,e);let r=this.getCaptureCanvas(e),n=new Z(r),i=new W(n);return new R(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){let t=this.getCaptureCanvas(e),r=t.getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){let t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}drawImageOnCanvas(e,t){e.drawImage(t,0,0)}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;let t=document.createElement("canvas"),r,n;return void 0!==e&&(e instanceof HTMLVideoElement?(r=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=n+"px",t.width=r,t.height=n,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(r){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class j{constructor(e,t,r=null==t?0:8*t.length,n,i,s=y.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,null==r?this.numBits=null==t?0:8*t.length:this.numBits=r,this.resultPoints=n,this.format=i,this.resultMetadata=null,null==s?this.timestamp=y.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){let t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){let r=Array(t.length+e.length);y.arraycopy(t,0,r,0,t.length),y.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}(ee=d||(d={}))[ee.AZTEC=0]="AZTEC",ee[ee.CODABAR=1]="CODABAR",ee[ee.CODE_39=2]="CODE_39",ee[ee.CODE_93=3]="CODE_93",ee[ee.CODE_128=4]="CODE_128",ee[ee.DATA_MATRIX=5]="DATA_MATRIX",ee[ee.EAN_8=6]="EAN_8",ee[ee.EAN_13=7]="EAN_13",ee[ee.ITF=8]="ITF",ee[ee.MAXICODE=9]="MAXICODE",ee[ee.PDF_417=10]="PDF_417",ee[ee.QR_CODE=11]="QR_CODE",ee[ee.RSS_14=12]="RSS_14",ee[ee.RSS_EXPANDED=13]="RSS_EXPANDED",ee[ee.UPC_A=14]="UPC_A",ee[ee.UPC_E=15]="UPC_E",ee[ee.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var J,$,ee,et,er=d;(et=c||(c={}))[et.OTHER=0]="OTHER",et[et.ORIENTATION=1]="ORIENTATION",et[et.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",et[et.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",et[et.ISSUE_NUMBER=4]="ISSUE_NUMBER",et[et.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",et[et.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",et[et.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",et[et.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",et[et.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",et[et.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY";var en=c;class ei{constructor(e,t,r,n,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=null==e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class es{exp(e){return this.expTable[e]}log(e){if(0===e)throw new T;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class eo{constructor(e,t){if(0===t.length)throw new T;this.field=e;let r=t.length;if(r>1&&0===t[0]){let n=1;for(;n<r&&0===t[n];)n++;n===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-n),y.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);let t=this.coefficients,r;if(1===e){r=0;for(let n=0,i=t.length;n!==i;n++){let s=t[n];r=es.addOrSubtract(r,s)}return r}r=t[0];let o=t.length,a=this.field;for(let l=1;l<o;l++)r=es.addOrSubtract(a.multiply(e,r),t[l]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let n=t;t=r,r=n}let i=new Int32Array(r.length),s=r.length-t.length;y.arraycopy(r,0,i,0,s);for(let o=s;o<r.length;o++)i[o]=es.addOrSubtract(t[o-s],r[o]);return new eo(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,s=new Int32Array(r+i-1),o=this.field;for(let a=0;a<r;a++){let l=t[a];for(let h=0;h<i;h++)s[a+h]=es.addOrSubtract(s[a+h],o.multiply(l,n[h]))}return new eo(o,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;let t=this.coefficients.length,r=this.field,n=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)n[s]=r.multiply(i[s],e);return new eo(r,n)}multiplyByMonomial(e,t){if(e<0)throw new T;if(0===t)return this.field.getZero();let r=this.coefficients,n=r.length,i=new Int32Array(n+e),s=this.field;for(let o=0;o<n;o++)i[o]=s.multiply(r[o],t);return new eo(s,i)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");let t=this.field,r=t.getZero(),n=this,i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;n.getDegree()>=e.getDegree()&&!n.isZero();){let o=n.getDegree()-e.getDegree(),a=t.multiply(n.getCoefficient(n.getDegree()),s),l=e.multiplyByMonomial(o,a),h=t.buildMonomial(o,a);r=r.addOrSubtract(h),n=n.addOrSubtract(l)}return[r,n]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){let n=this.field.log(r);0===n?e+="1":1===n?e+="a":(e+="a^",e+=n)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class ea extends S{}ea.kind="ArithmeticException";class el extends es{constructor(e,t,r){super(),this.primitive=e,this.size=t,this.generatorBase=r;let n=new Int32Array(t),i=1;for(let s=0;s<t;s++)n[s]=i,(i*=2)>=t&&(i^=e,i&=t-1);this.expTable=n;let o=new Int32Array(t);for(let a=0;a<t-1;a++)o[n[a]]=a;this.logTable=o,this.zero=new eo(this,Int32Array.from([0])),this.one=new eo(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new eo(this,r)}inverse(e){if(0===e)throw new ea;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}el.AZTEC_DATA_12=new el(4201,4096,1),el.AZTEC_DATA_10=new el(1033,1024,1),el.AZTEC_DATA_6=new el(67,64,1),el.AZTEC_PARAM=new el(19,16,1),el.QR_CODE_FIELD_256=new el(285,256,0),el.DATA_MATRIX_FIELD_256=new el(301,256,1),el.AZTEC_DATA_8=el.DATA_MATRIX_FIELD_256,el.MAXICODE_FIELD_64=el.AZTEC_DATA_6;class eh extends S{}eh.kind="ReedSolomonException";class eu extends S{}eu.kind="IllegalStateException";class ed{constructor(e){this.field=e}decode(e,t){let r=this.field,n=new eo(r,e),i=new Int32Array(t),s=!0;for(let o=0;o<t;o++){let a=n.evaluateAt(r.exp(o+r.getGeneratorBase()));i[i.length-1-o]=a,0!==a&&(s=!1)}if(s)return;let l=new eo(r,i),h=this.runEuclideanAlgorithm(r.buildMonomial(t,1),l,t),u=h[0],d=h[1],c=this.findErrorLocations(u),g=this.findErrorMagnitudes(d,c);for(let f=0;f<c.length;f++){let w=e.length-1-r.log(c[f]);if(w<0)throw new eh("Bad error location");e[w]=el.addOrSubtract(e[w],g[f])}}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let i=this.field,s=e,o=t,a=i.getZero(),l=i.getOne();for(;o.getDegree()>=(r/2|0);){let h=s,u=a;if(s=o,a=l,s.isZero())throw new eh("r_{i-1} was zero");o=h;let d=i.getZero(),c=s.getCoefficient(s.getDegree()),g=i.inverse(c);for(;o.getDegree()>=s.getDegree()&&!o.isZero();){let f=o.getDegree()-s.getDegree(),w=i.multiply(o.getCoefficient(o.getDegree()),g);d=d.addOrSubtract(i.buildMonomial(f,w)),o=o.addOrSubtract(s.multiplyByMonomial(f,w))}if(l=d.multiply(a).addOrSubtract(u),o.getDegree()>=s.getDegree())throw new eu("Division algorithm failed to reduce polynomial?")}let A=l.getCoefficient(0);if(0===A)throw new eh("sigmaTilde(0) was zero");let C=i.inverse(A),E=l.multiplyScalar(C),m=o.multiplyScalar(C);return[E,m]}findErrorLocations(e){let t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);let r=new Int32Array(t),n=0,i=this.field;for(let s=1;s<i.getSize()&&n<t;s++)0===e.evaluateAt(s)&&(r[n]=i.inverse(s),n++);if(n!==t)throw new eh("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,t){let r=t.length,n=new Int32Array(r),i=this.field;for(let s=0;s<r;s++){let o=i.inverse(t[s]),a=1;for(let l=0;l<r;l++)if(s!==l){let h=i.multiply(t[l],o),u=(1&h)==0?1|h:-2&h;a=i.multiply(a,u)}n[s]=i.multiply(e.evaluateAt(o),i.inverse(a)),0!==i.getGeneratorBase()&&(n[s]=i.multiply(n[s],o))}return n}}(t=g||(g={}))[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY";class ec{decode(e){this.ddata=e;let t=e.getBits(),r=this.extractBits(t),n=this.correctBits(r),i=ec.convertBoolArrayToByteArray(n),s=ec.getEncodedData(n),o=new ei(i,s,null,null);return o.setNumBits(n.length),o}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,r=g.UPPER,n=g.UPPER,i="",s=0;for(;s<t;)if(n===g.BINARY){if(t-s<5)break;let o=ec.readCode(e,s,5);if(s+=5,0===o){if(t-s<11)break;o=ec.readCode(e,s,11)+31,s+=11}for(let a=0;a<o;a++){if(t-s<8){s=t;break}let l=ec.readCode(e,s,8);i+=V.castAsNonUtf8Char(l),s+=8}n=r}else{let h=n===g.DIGIT?4:5;if(t-s<h)break;let u=ec.readCode(e,s,h);s+=h;let d=ec.getCharacter(n,u);d.startsWith("CTRL_")?(r=n,n=ec.getTable(d.charAt(5)),"L"===d.charAt(6)&&(r=n)):(i+=d,n=r)}return i}static getTable(e){switch(e){case"L":return g.LOWER;case"P":return g.PUNCT;case"M":return g.MIXED;case"D":return g.DIGIT;case"B":return g.BINARY;default:return g.UPPER}}static getCharacter(e,t){switch(e){case g.UPPER:return ec.UPPER_TABLE[t];case g.LOWER:return ec.LOWER_TABLE[t];case g.MIXED:return ec.MIXED_TABLE[t];case g.PUNCT:return ec.PUNCT_TABLE[t];case g.DIGIT:return ec.DIGIT_TABLE[t];default:throw new eu("Bad table")}}correctBits(e){let t,r;2>=this.ddata.getNbLayers()?(r=6,t=el.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(r=8,t=el.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(r=10,t=el.AZTEC_DATA_10):(r=12,t=el.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=e.length/r;if(i<n)throw new F;let s=e.length%r,o=new Int32Array(i);for(let a=0;a<i;a++,s+=r)o[a]=ec.readCode(e,s,r);try{new ed(t).decode(o,i-n)}catch(l){throw new F(l)}let h=(1<<r)-1,u=0;for(let d=0;d<n;d++){let c=o[d];if(0===c||c===h)throw new F;(1===c||c===h-1)&&u++}let g=Array(n*r-u),f=0;for(let w=0;w<n;w++){let A=o[w];if(1===A||A===h-1)g.fill(A>1,f,f+r-1),f+=r-1;else for(let C=r-1;C>=0;--C)g[f++]=(A&1<<C)!=0}return g}extractBits(e){let t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+4*r,i=new Int32Array(n),s=Array(this.totalBitsInLayer(r,t));if(t)for(let o=0;o<i.length;o++)i[o]=o;else{let a=n+1+2*b.truncDivision(b.truncDivision(n,2)-1,15),l=n/2,h=b.truncDivision(a,2);for(let u=0;u<l;u++){let d=u+b.truncDivision(u,15);i[l-u-1]=h-d-1,i[l+u]=h+d+1}}for(let c=0,g=0;c<r;c++){let f=(r-c)*4+(t?9:12),w=2*c,A=n-1-w;for(let C=0;C<f;C++){let E=2*C;for(let m=0;m<2;m++)s[g+E+m]=e.get(i[w+m],i[w+C]),s[g+2*f+E+m]=e.get(i[w+C],i[A-m]),s[g+4*f+E+m]=e.get(i[A-m],i[A-C]),s[g+6*f+E+m]=e.get(i[A-C],i[w+m])}g+=8*f}return s}static readCode(e,t,r){let n=0;for(let i=t;i<t+r;i++)n<<=1,e[i]&&(n|=1);return n}static readByte(e,t){let r=e.length-t;return r>=8?ec.readCode(e,t,8):ec.readCode(e,t,r)<<8-r}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let r=0;r<t.length;r++)t[r]=ec.readByte(e,8*r);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ec.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ec.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ec.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ec.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ec.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class eg{constructor(){}static round(e){return e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,r,n){let i=e-r,s=t-n;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let r=0,n=e.length;r!==n;r++){let i=e[r];t+=i}return t}}class ef{static floatToIntBits(e){return e}}ef.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ew{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){return e instanceof ew&&this.x===e.x&&this.y===e.y}hashCode(){return 31*ef.floatToIntBits(this.x)+ef.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){let t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),n=this.distance(e[0],e[2]),i,s,o;if(r>=t&&r>=n?(s=e[0],i=e[1],o=e[2]):n>=r&&n>=t?(s=e[1],i=e[0],o=e[2]):(s=e[2],i=e[0],o=e[1]),0>this.crossProductZ(i,s,o)){let a=i;i=o,o=a}e[0]=i,e[1]=s,e[2]=o}static distance(e,t){return eg.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,r){let n=t.x,i=t.y;return(r.x-n)*(e.y-i)-(r.y-i)*(e.x-n)}}class eA{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class eC extends eA{constructor(e,t,r,n,i){super(e,t),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class eE{constructor(e,t,r,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==t&&(t=eE.INIT_SIZE),null==r&&(r=e.getWidth()/2|0),null==n&&(n=e.getHeight()/2|0);let i=t/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,i=!1,s=!0,o=!1,a=!1,l=!1,h=!1,u=!1,d=this.width,c=this.height;for(;s;){s=!1;let g=!0;for(;(g||!a)&&t<d;)(g=this.containsBlackPoint(r,n,t,!1))?(t++,s=!0,a=!0):!a&&t++;if(t>=d){i=!0;break}let f=!0;for(;(f||!l)&&n<c;)(f=this.containsBlackPoint(e,t,n,!0))?(n++,s=!0,l=!0):!l&&n++;if(n>=c){i=!0;break}let w=!0;for(;(w||!h)&&e>=0;)(w=this.containsBlackPoint(r,n,e,!1))?(e--,s=!0,h=!0):!h&&e--;if(e<0){i=!0;break}let A=!0;for(;(A||!u)&&r>=0;)(A=this.containsBlackPoint(e,t,r,!0))?(r--,s=!0,u=!0):!u&&r--;if(r<0){i=!0;break}s&&(o=!0)}if(!i&&o){let C=t-e,E=null;for(let m=1;null===E&&m<C;m++)E=this.getBlackPointOnSegment(e,n-m,e+m,n);if(null==E)throw new G;let _=null;for(let I=1;null===_&&I<C;I++)_=this.getBlackPointOnSegment(e,r+I,e+I,r);if(null==_)throw new G;let S=null;for(let p=1;null===S&&p<C;p++)S=this.getBlackPointOnSegment(t,r+p,t-p,r);if(null==S)throw new G;let T=null;for(let R=1;null===T&&R<C;R++)T=this.getBlackPointOnSegment(t,n-R,t-R,n);if(null==T)throw new G;return this.centerEdges(T,E,S,_)}throw new G}getBlackPointOnSegment(e,t,r,n){let i=eg.round(eg.distance(e,t,r,n)),s=(r-e)/i,o=(n-t)/i,a=this.image;for(let l=0;l<i;l++){let h=eg.round(e+l*s),u=eg.round(t+l*o);if(a.get(h,u))return new ew(h,u)}return null}centerEdges(e,t,r,n){let i=e.getX(),s=e.getY(),o=t.getX(),a=t.getY(),l=r.getX(),h=r.getY(),u=n.getX(),d=n.getY(),c=eE.CORR;return i<this.width/2?[new ew(u-c,d+c),new ew(o+c,a+c),new ew(l-c,h-c),new ew(i+c,s-c)]:[new ew(u+c,d+c),new ew(o+c,a-c),new ew(l-c,h+c),new ew(i-c,s-c)]}containsBlackPoint(e,t,r,n){let i=this.image;if(n){for(let s=e;s<=t;s++)if(i.get(s,r))return!0}else for(let o=e;o<=t;o++)if(i.get(r,o))return!0;return!1}}eE.INIT_SIZE=10,eE.CORR=1;class em{static checkAndNudgePoints(e,t){let r=e.getWidth(),n=e.getHeight(),i=!0;for(let s=0;s<t.length&&i;s+=2){let o=Math.floor(t[s]),a=Math.floor(t[s+1]);if(o<-1||o>r||a<-1||a>n)throw new G;i=!1,-1===o?(t[s]=0,i=!0):o===r&&(t[s]=r-1,i=!0),-1===a?(t[s+1]=0,i=!0):a===n&&(t[s+1]=n-1,i=!0)}i=!0;for(let l=t.length-2;l>=0&&i;l-=2){let h=Math.floor(t[l]),u=Math.floor(t[l+1]);if(h<-1||h>r||u<-1||u>n)throw new G;i=!1,-1===h?(t[l]=0,i=!0):h===r&&(t[l]=r-1,i=!0),-1===u?(t[l+1]=0,i=!0):u===n&&(t[l+1]=n-1,i=!0)}}}class e_{constructor(e,t,r,n,i,s,o,a,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=i,this.a32=s,this.a13=o,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(e,t,r,n,i,s,o,a,l,h,u,d,c,g,f,w){let A=e_.quadrilateralToSquare(e,t,r,n,i,s,o,a),C=e_.squareToQuadrilateral(l,h,u,d,c,g,f,w);return C.times(A)}transformPoints(e){let t=e.length,r=this.a11,n=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,h=this.a32,u=this.a33;for(let d=0;d<t;d+=2){let c=e[d],g=e[d+1],f=i*c+a*g+u;e[d]=(r*c+s*g+l)/f,e[d+1]=(n*c+o*g+h)/f}}transformPointsWithValues(e,t){let r=this.a11,n=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,h=this.a32,u=this.a33,d=e.length;for(let c=0;c<d;c++){let g=e[c],f=t[c],w=i*g+a*f+u;e[c]=(r*g+s*f+l)/w,t[c]=(n*g+o*f+h)/w}}static squareToQuadrilateral(e,t,r,n,i,s,o,a){let l=e-r+i-o,h=t-n+s-a;if(0===l&&0===h)return new e_(r-e,i-r,e,n-t,s-n,t,0,0,1);{let u=r-i,d=o-i,c=n-s,g=a-s,f=u*g-d*c,w=(l*g-d*h)/f,A=(u*h-l*c)/f;return new e_(r-e+w*r,o-e+A*o,e,n-t+w*n,a-t+A*a,t,w,A,1)}}static quadrilateralToSquare(e,t,r,n,i,s,o,a){return e_.squareToQuadrilateral(e,t,r,n,i,s,o,a).buildAdjoint()}buildAdjoint(){return new e_(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new e_(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class eI extends em{sampleGrid(e,t,r,n,i,s,o,a,l,h,u,d,c,g,f,w,A,C,E){let m=e_.quadrilateralToQuadrilateral(n,i,s,o,a,l,h,u,d,c,g,f,w,A,C,E);return this.sampleGridWithTransform(e,t,r,m)}sampleGridWithTransform(e,t,r,n){if(t<=0||r<=0)throw new G;let i=new H(t,r),s=new Float32Array(2*t);for(let o=0;o<r;o++){let a=s.length,l=o+.5;for(let h=0;h<a;h+=2)s[h]=h/2+.5,s[h+1]=l;n.transformPoints(s),em.checkAndNudgePoints(e,s);try{for(let u=0;u<a;u+=2)e.get(Math.floor(s[u]),Math.floor(s[u+1]))&&i.set(u/2,o)}catch(d){throw new G}}return i}}class eS{static setGridSampler(e){eS.gridSampler=e}static getInstance(){return eS.gridSampler}}eS.gridSampler=new eI;class ep{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ew(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class eT{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799,]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){let n=r[0];r[0]=r[2],r[2]=n}this.extractParameters(r);let i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new eC(i,s,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new G;let t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);let n=0;for(let i=0;i<4;i++){let s=r[(this.shift+i)%4];this.compact?(n<<=7,n+=s>>1&127):(n<<=10,n+=(s>>2&992)+(s>>1&31))}let o=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(63&o)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(2047&o)+1)}getRotation(e,t){let r=0;e.forEach((e,n,i)=>{r=(r<<3)+((e>>t-2<<1)+(1&e))}),r=((1&r)<<11)+(r>>1);for(let n=0;n<4;n++)if(2>=b.bitCount(r^this.EXPECTED_CORNER_BITS[n]))return n;throw new G}getCorrectedParameterData(e,t){let r,n;t?(r=7,n=2):(r=10,n=4);let i=r-n,s=new Int32Array(r);for(let o=r-1;o>=0;--o)s[o]=15&e,e>>=4;try{new ed(el.AZTEC_PARAM).decode(s,i)}catch(a){throw new G}let l=0;for(let h=0;h<n;h++)l=(l<<4)+s[h];return l}getBullsEyeCorners(e){let t=e,r=e,n=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let o=this.getFirstDifferent(t,s,1,-1),a=this.getFirstDifferent(r,s,1,1),l=this.getFirstDifferent(n,s,-1,1),h=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let u=this.distancePoint(h,o)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(o,a,l,h))break}t=o,r=a,n=l,i=h,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new G;this.compact=5===this.nbCenterLayers;let d=new ew(t.getX()+.5,t.getY()-.5),c=new ew(r.getX()+.5,r.getY()+.5),g=new ew(n.getX()-.5,n.getY()+.5),f=new ew(i.getX()-.5,i.getY()-.5);return this.expandSquare([d,c,g,f],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,r,n;try{let i=new eE(this.image).detect();e=i[0],t=i[1],r=i[2],n=i[3]}catch(a){let s=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new ep(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ep(s+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ep(s-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ep(s-7,o-7),!1,-1,-1).toResultPoint()}let l=eg.round((e.getX()+n.getX()+t.getX()+r.getX())/4),h=eg.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{let u=new eE(this.image,15,l,h).detect();e=u[0],t=u[1],r=u[2],n=u[3]}catch(d){e=this.getFirstDifferent(new ep(l+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ep(l+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ep(l-7,h+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ep(l-7,h-7),!1,-1,-1).toResultPoint()}return l=eg.round((e.getX()+n.getX()+t.getX()+r.getX())/4),h=eg.round((e.getY()+n.getY()+t.getY()+r.getY())/4),new ep(l,h)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,r,n,i){let s=eS.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,a,a,l,a,l,l,a,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(e,t,r){let n=0,i=this.distanceResultPoint(e,t),s=i/r,o=e.getX(),a=e.getY(),l=s*(t.getX()-e.getX())/i,h=s*(t.getY()-e.getY())/i;for(let u=0;u<r;u++)this.image.get(eg.round(o+u*l),eg.round(a+u*h))&&(n|=1<<r-u-1);return n}isWhiteOrBlackRectangle(e,t,r,n){e=new ep(e.getX()-3,e.getY()+3),t=new ep(t.getX()-3,t.getY()-3),r=new ep(r.getX()+3,r.getY()-3),n=new ep(n.getX()+3,n.getY()+3);let i=this.getColor(n,e);if(0===i)return!1;let s=this.getColor(e,t);return s===i&&(s=this.getColor(t,r))===i&&(s=this.getColor(r,n))===i}getColor(e,t){let r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,i=(t.getY()-e.getY())/r,s=0,o=e.getX(),a=e.getY(),l=this.image.get(e.getX(),e.getY()),h=Math.ceil(r);for(let u=0;u<h;u++)o+=n,a+=i,this.image.get(eg.round(o),eg.round(a))!==l&&s++;let d=s/r;return d>.1&&d<.9?0:d<=.1===l?1:-1}getFirstDifferent(e,t,r,n){let i=e.getX()+r,s=e.getY()+n;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=r,s+=n;for(i-=r,s-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=r;for(i-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=n;return s-=n,new ep(i,s)}expandSquare(e,t,r){let n=r/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,l=new ew(o+n*i,a+n*s),h=new ew(o-n*i,a-n*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2;let u=new ew(o+n*i,a+n*s),d=new ew(o-n*i,a-n*s);return[l,u,h,d]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=eg.round(e.getX()),r=eg.round(e.getY());return this.isValid(t,r)}distancePoint(e,t){return eg.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return eg.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class eR{decode(e,t=null){let r=null,n=new eT(e.getBlackMatrix()),i=null,s=null;try{let o=n.detectMirror(!1);i=o.getPoints(),this.reportFoundResultPoints(t,i),s=new ec().decode(o)}catch(a){r=a}if(null==s)try{let l=n.detectMirror(!0);i=l.getPoints(),this.reportFoundResultPoints(t,i),s=new ec().decode(l)}catch(h){if(null!=r)throw r;throw h}let u=new j(s.getText(),s.getRawBytes(),s.getNumBits(),i,er.AZTEC,y.currentTimeMillis()),d=s.getByteSegments();null!=d&&u.putMetadata(en.BYTE_SEGMENTS,d);let c=s.getECLevel();return null!=c&&u.putMetadata(en.ERROR_CORRECTION_LEVEL,c),u}reportFoundResultPoints(e,t){if(null!=e){let r=e.get(L.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach((e,t,n)=>{r.foundPossibleResultPoint(e)})}}reset(){}}class eN{decode(e,t){try{return this.doDecode(e,t)}catch(u){let r=t&&!0===t.get(L.TRY_HARDER);if(r&&e.isRotateSupported()){let n=e.rotateCounterClockwise(),i=this.doDecode(n,t),s=i.getResultMetadata(),o=270;null!==s&&!0===s.get(en.ORIENTATION)&&(o+=s.get(en.ORIENTATION)%360),i.putMetadata(en.ORIENTATION,o);let a=i.getResultPoints();if(null!==a){let l=n.getHeight();for(let h=0;h<a.length;h++)a[h]=new ew(l-a[h].getY()-1,a[h].getX())}return i}throw new G}}reset(){}doDecode(e,t){let r=e.getWidth(),n=e.getHeight(),i=new P(r),s=t&&!0===t.get(L.TRY_HARDER),o=Math.max(1,n>>(s?8:5)),a;a=s?n:15;let l=Math.trunc(n/2);for(let h=0;h<a;h++){let u=Math.trunc((h+1)/2),d=(1&h)==0,c=l+o*(d?u:-u);if(c<0||c>=n)break;try{i=e.getBlackRow(c,i)}catch(g){continue}for(let f=0;f<2;f++){if(1===f&&(i.reverse(),t&&!0===t.get(L.NEED_RESULT_POINT_CALLBACK))){let w=new Map;t.forEach((e,t)=>w.set(t,e)),w.delete(L.NEED_RESULT_POINT_CALLBACK),t=w}try{let A=this.decodeRow(c,i,t);if(1===f){A.putMetadata(en.ORIENTATION,180);let C=A.getResultPoints();null!==C&&(C[0]=new ew(r-C[0].getX()-1,C[0].getY()),C[1]=new ew(r-C[1].getX()-1,C[1].getY()))}return A}catch(E){}}}throw new G}static recordPattern(e,t,r){let n=r.length;for(let i=0;i<n;i++)r[i]=0;let s=e.getSize();if(t>=s)throw new G;let o=!e.get(t),a=0,l=t;for(;l<s;){if(e.get(l)!==o)r[a]++;else{if(++a===n)break;r[a]=1,o=!o}l++}if(!(a===n||a===n-1&&l===s))throw new G}static recordPatternInReverse(e,t,r){let n=r.length,i=e.get(t);for(;t>0&&n>=0;)e.get(--t)!==i&&(n--,i=!i);if(n>=0)throw new G;eN.recordPattern(e,t+1,r)}static patternMatchVariance(e,t,r){let n=e.length,i=0,s=0;for(let o=0;o<n;o++)i+=e[o],s+=t[o];if(i<s)return Number.POSITIVE_INFINITY;let a=i/s;r*=a;let l=0;for(let h=0;h<n;h++){let u=e[h],d=t[h]*a,c=u>d?u-d:d-u;if(c>r)return Number.POSITIVE_INFINITY;l+=c}return l/i}}class eD extends eN{static findStartPattern(e){let t=e.getSize(),r=e.getNextSet(0),n=0,i=Int32Array.from([0,0,0,0,0,0]),s=r,o=!1;for(let a=r;a<t;a++)if(e.get(a)!==o)i[n]++;else{if(5===n){let l=eD.MAX_AVG_VARIANCE,h=-1;for(let u=eD.CODE_START_A;u<=eD.CODE_START_C;u++){let d=eN.patternMatchVariance(i,eD.CODE_PATTERNS[u],eD.MAX_INDIVIDUAL_VARIANCE);d<l&&(l=d,h=u)}if(h>=0&&e.isRange(Math.max(0,s-(a-s)/2),s,!1))return Int32Array.from([s,a,h]);s+=i[0]+i[1],(i=i.slice(2,i.length-1))[n-1]=0,i[n]=0,n--}else n++;i[n]=1,o=!o}throw new G}static decodeCode(e,t,r){eN.recordPattern(e,r,t);let n=eD.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<eD.CODE_PATTERNS.length;s++){let o=eD.CODE_PATTERNS[s],a=this.patternMatchVariance(t,o,eD.MAX_INDIVIDUAL_VARIANCE);a<n&&(n=a,i=s)}if(i>=0)return i;throw new G}decodeRow(e,t,r){let n=r&&!0===r.get(L.ASSUME_GS1),i=eD.findStartPattern(t),s=i[2],o=0,a=new Uint8Array(20);a[o++]=s;let l;switch(s){case eD.CODE_START_A:l=eD.CODE_CODE_A;break;case eD.CODE_START_B:l=eD.CODE_CODE_B;break;case eD.CODE_START_C:l=eD.CODE_CODE_C;break;default:throw new F}let h=!1,u=!1,d="",c=i[0],g=i[1],f=Int32Array.from([0,0,0,0,0,0]),w=0,A=0,C=s,E=0,m=!0,_=!1,I=!1;for(;!h;){let S=u;switch(u=!1,w=A,A=eD.decodeCode(t,f,g),a[o++]=A,A!==eD.CODE_STOP&&(m=!0),A!==eD.CODE_STOP&&(C+=++E*A),c=g,g+=f.reduce((e,t)=>e+t,0),A){case eD.CODE_START_A:case eD.CODE_START_B:case eD.CODE_START_C:throw new F}switch(l){case eD.CODE_CODE_A:if(A<64)I===_?d+=String.fromCharCode(32+A):d+=String.fromCharCode(32+A+128),I=!1;else if(A<96)I===_?d+=String.fromCharCode(A-64):d+=String.fromCharCode(A+64),I=!1;else switch(A!==eD.CODE_STOP&&(m=!1),A){case eD.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+="\x1d");break;case eD.CODE_FNC_2:case eD.CODE_FNC_3:break;case eD.CODE_FNC_4_A:!_&&I?(_=!0,I=!1):_&&I?(_=!1,I=!1):I=!0;break;case eD.CODE_SHIFT:u=!0,l=eD.CODE_CODE_B;break;case eD.CODE_CODE_B:l=eD.CODE_CODE_B;break;case eD.CODE_CODE_C:l=eD.CODE_CODE_C;break;case eD.CODE_STOP:h=!0}break;case eD.CODE_CODE_B:if(A<96)I===_?d+=String.fromCharCode(32+A):d+=String.fromCharCode(32+A+128),I=!1;else switch(A!==eD.CODE_STOP&&(m=!1),A){case eD.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+="\x1d");break;case eD.CODE_FNC_2:case eD.CODE_FNC_3:break;case eD.CODE_FNC_4_B:!_&&I?(_=!0,I=!1):_&&I?(_=!1,I=!1):I=!0;break;case eD.CODE_SHIFT:u=!0,l=eD.CODE_CODE_A;break;case eD.CODE_CODE_A:l=eD.CODE_CODE_A;break;case eD.CODE_CODE_C:l=eD.CODE_CODE_C;break;case eD.CODE_STOP:h=!0}break;case eD.CODE_CODE_C:if(A<100)A<10&&(d+="0"),d+=A;else switch(A!==eD.CODE_STOP&&(m=!1),A){case eD.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+="\x1d");break;case eD.CODE_CODE_A:l=eD.CODE_CODE_A;break;case eD.CODE_CODE_B:l=eD.CODE_CODE_B;break;case eD.CODE_STOP:h=!0}}S&&(l=l===eD.CODE_CODE_A?eD.CODE_CODE_B:eD.CODE_CODE_A)}let p=g-c;if(g=t.getNextUnset(g),!t.isRange(g,Math.min(t.getSize(),g+(g-c)/2),!1))throw new G;if((C-=E*w)%103!==w)throw new N;let T=d.length;if(0===T)throw new G;T>0&&m&&(d=l===eD.CODE_CODE_C?d.substring(0,T-2):d.substring(0,T-1));let R=(i[1]+i[0])/2,D=c+p/2,y=a.length,O=new Uint8Array(y);for(let M=0;M<y;M++)O[M]=a[M];let B=[new ew(R,e),new ew(D,e)];return new j(d,O,0,B,er.CODE_128,new Date().getTime())}}eD.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2]),],eD.MAX_AVG_VARIANCE=.25,eD.MAX_INDIVIDUAL_VARIANCE=.7,eD.CODE_SHIFT=98,eD.CODE_CODE_C=99,eD.CODE_CODE_B=100,eD.CODE_CODE_A=101,eD.CODE_FNC_1=102,eD.CODE_FNC_2=97,eD.CODE_FNC_3=96,eD.CODE_FNC_4_A=101,eD.CODE_FNC_4_B=100,eD.CODE_START_A=103,eD.CODE_START_B=104,eD.CODE_START_C=105,eD.CODE_STOP=106;class ey extends eN{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let i=ey.findAsteriskPattern(t,n),s=t.getNextSet(i[1]),o=t.getSize(),a,l;do{ey.recordPattern(t,s,n);let h=ey.toNarrowWidePattern(n);if(h<0)throw new G;for(let u of(a=ey.patternToChar(h),this.decodeRowResult+=a,l=s,n))s+=u;s=t.getNextSet(s)}while("*"!==a);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let d=0;for(let c of n)d+=c;let g=s-l-d;if(s!==o&&2*g<d)throw new G;if(this.usingCheckDigit){let f=this.decodeRowResult.length-1,w=0;for(let A=0;A<f;A++)w+=ey.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(A));if(this.decodeRowResult.charAt(f)!==ey.ALPHABET_STRING.charAt(w%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,f)}if(0===this.decodeRowResult.length)throw new G;let C;C=this.extendedMode?ey.decodeExtended(this.decodeRowResult):this.decodeRowResult;let E=(i[1]+i[0])/2,m=l+d/2;return new j(C,null,0,[new ew(E,e),new ew(m,e)],er.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let r=e.getSize(),n=e.getNextSet(0),i=0,s=n,o=!1,a=t.length;for(let l=n;l<r;l++)if(e.get(l)!==o)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===ey.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,o=!o}throw new G}static toNarrowWidePattern(e){let t=e.length,r=0,n;do{let i=2147483647;for(let s of e)s<i&&s>r&&(i=s);r=i,n=0;let o=0,a=0;for(let l=0;l<t;l++){let h=e[l];h>r&&(a|=1<<t-1-l,n++,o+=h)}if(3===n){for(let u=0;u<t&&n>0;u++){let d=e[u];if(d>r&&(n--,2*d>=o))return -1}return a}}while(n>3);return -1}static patternToChar(e){for(let t=0;t<ey.CHARACTER_ENCODINGS.length;t++)if(ey.CHARACTER_ENCODINGS[t]===e)return ey.ALPHABET_STRING.charAt(t);if(e===ey.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(e){let t=e.length,r="";for(let n=0;n<t;n++){let i=e.charAt(n);if("+"===i||"$"===i||"%"===i||"/"===i){let s=e.charAt(n+1),o="\0";switch(i){case"+":if(s>="A"&&s<="Z")o=String.fromCharCode(s.charCodeAt(0)+32);else throw new F;break;case"$":if(s>="A"&&s<="Z")o=String.fromCharCode(s.charCodeAt(0)-64);else throw new F;break;case"%":if(s>="A"&&s<="E")o=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")o=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")o=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")o=String.fromCharCode(s.charCodeAt(0)+43);else if("U"===s)o="\0";else if("V"===s)o="@";else if("W"===s)o="`";else if("X"===s||"Y"===s||"Z"===s)o="\x7f";else throw new F;break;case"/":if(s>="A"&&s<="O")o=String.fromCharCode(s.charCodeAt(0)-32);else if("Z"===s)o=":";else throw new F}r+=o,n++}else r+=i}return r}}ey.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ey.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ey.ASTERISK_ENCODING=148;class eO extends eN{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,r){let n=this.decodeStart(t),i=this.decodeEnd(t),s=new U;eO.decodeMiddle(t,n[1],i[0],s);let o=s.toString(),a=null;null!=r&&(a=r.get(L.ALLOWED_LENGTHS)),null==a&&(a=eO.DEFAULT_ALLOWED_LENGTHS);let l=o.length,h=!1,u=0;for(let d of a){if(l===d){h=!0;break}d>u&&(u=d)}if(!h&&l>u&&(h=!0),!h)throw new F;let c=[new ew(n[1],e),new ew(i[0],e)];return new j(o,null,0,c,er.ITF,new Date().getTime())}static decodeMiddle(e,t,r,n){let i=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(i.fill(0),s.fill(0),o.fill(0);t<r;){eN.recordPattern(e,t,i);for(let a=0;a<5;a++){let l=2*a;s[a]=i[l],o[a]=i[l+1]}let h=eO.decodeDigit(s);n.append(h.toString()),h=this.decodeDigit(o),n.append(h.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=eO.skipWhiteSpace(e),r=eO.findGuardPattern(e,t,eO.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,t){let r=10*this.narrowLineWidth;r=r<t?r:t;for(let n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(0!==r)throw new G}static skipWhiteSpace(e){let t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new G;return r}decodeEnd(e){e.reverse();try{let t=eO.skipWhiteSpace(e),r;try{r=eO.findGuardPattern(e,t,eO.END_PATTERN_REVERSED[0])}catch(n){n instanceof G&&(r=eO.findGuardPattern(e,t,eO.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,t,r){let n=r.length,i=new Int32Array(n),s=e.getSize(),o=!1,a=0,l=t;i.fill(0);for(let h=t;h<s;h++)if(e.get(h)!==o)i[a]++;else{if(a===n-1){if(eN.patternMatchVariance(i,r,eO.MAX_INDIVIDUAL_VARIANCE)<eO.MAX_AVG_VARIANCE)return[l,h];l+=i[0]+i[1],y.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,o=!o}throw new G}static decodeDigit(e){let t=eO.MAX_AVG_VARIANCE,r=-1,n=eO.PATTERNS.length;for(let i=0;i<n;i++){let s=eO.PATTERNS[i],o=eN.patternMatchVariance(e,s,eO.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,r=i):o===t&&(r=-1)}if(r>=0)return r%10;throw new G}}eO.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],eO.MAX_AVG_VARIANCE=.38,eO.MAX_INDIVIDUAL_VARIANCE=.5,eO.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],eO.START_PATTERN=Int32Array.from([1,1,1,1]),eO.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class eM extends eN{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,r,n=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]);let s=(r=eM.findGuardPattern(e,n,!1,this.START_END_PATTERN,i))[0],o=s-((n=r[1])-s);o>=0&&(t=e.isRange(o,s,!1))}return r}static checkChecksum(e){return eM.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return eM.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let i=e.charAt(n).charCodeAt(0)-48;if(i<0||i>9)throw new F;r+=i}r*=3;for(let s=t-2;s>=0;s-=2){let o=e.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new F;r+=o}return(1e3-r)%10}static decodeEnd(e,t){return eM.findGuardPattern(e,t,!1,eM.START_END_PATTERN,new Int32Array(eM.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))}static findGuardPattern(e,t,r,n,i){let s=e.getSize();t=r?e.getNextUnset(t):e.getNextSet(t);let o=0,a=t,l=n.length,h=r;for(let u=t;u<s;u++)if(e.get(u)!==h)i[o]++;else{if(o===l-1){if(eN.patternMatchVariance(i,n,eM.MAX_INDIVIDUAL_VARIANCE)<eM.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=i[0]+i[1];let d=i.slice(2,i.length-1);for(let c=0;c<o-1;c++)i[c]=d[c];i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,h=!h}throw new G}static decodeDigit(e,t,r,n){this.recordPattern(e,r,t);let i=this.MAX_AVG_VARIANCE,s=-1,o=n.length;for(let a=0;a<o;a++){let l=n[a],h=eN.patternMatchVariance(t,l,eM.MAX_INDIVIDUAL_VARIANCE);h<i&&(i=h,s=a)}if(s>=0)return s;throw new G}}eM.MAX_AVG_VARIANCE=.48,eM.MAX_INDIVIDUAL_VARIANCE=.7,eM.START_END_PATTERN=Int32Array.from([1,1,1]),eM.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),eM.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),eM.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2]),];class eB{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),s=n.toString(),o=eB.parseExtensionString(s),a=[new ew((r[0]+r[1])/2,e),new ew(i,e)],l=new j(s,null,0,a,er.UPC_EAN_EXTENSION,new Date().getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<5&&s<i;a++){let l=eM.decodeDigit(e,n,s,eM.L_AND_G_PATTERNS);for(let h of(r+=String.fromCharCode(48+l%10),n))s+=h;l>=10&&(o|=1<<4-a),4!==a&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==r.length)throw new G;let u=this.determineCheckDigit(o);if(eB.extensionChecksum(r.toString())!==u)throw new G;return s}static extensionChecksum(e){let t=e.length,r=0;for(let n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-48;r*=3;for(let i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return(r*=3)%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new G}static parseExtensionString(e){if(5!==e.length)return null;let t=eB.parseExtension5String(e);return null==t?null:new Map([[en.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let r=parseInt(e.substring(1)),n=(r/100).toString(),i=r%100;return t+n+"."+(i<10?"0"+i:i.toString())}}class eb{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),s=n.toString(),o=eb.parseExtensionString(s),a=[new ew((r[0]+r[1])/2,e),new ew(i,e)],l=new j(s,null,0,a,er.UPC_EAN_EXTENSION,new Date().getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<2&&s<i;a++){let l=eM.decodeDigit(e,n,s,eM.L_AND_G_PATTERNS);for(let h of(r+=String.fromCharCode(48+l%10),n))s+=h;l>=10&&(o|=1<<1-a),1!==a&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==r.length||parseInt(r.toString())%4!==o)throw new G;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[en.ISSUE_NUMBER,parseInt(e)]])}}class eP{static decodeRow(e,t,r){let n=eM.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new eB().decodeRow(e,t,n)}catch(i){return new eb().decodeRow(e,t,n)}}}eP.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class eL extends eM{constructor(){super(),this.decodeRowStringBuffer="",eL.L_AND_G_PATTERNS=eL.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=eL.L_PATTERNS[e-10],r=new Int32Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[t.length-n-1];eL.L_AND_G_PATTERNS[e]=r}}decodeRow(e,t,r){let n=eL.findStartGuardPattern(t),i=null==r?null:r.get(L.NEED_RESULT_POINT_CALLBACK);if(null!=i){let s=new ew((n[0]+n[1])/2,e);i.foundPossibleResultPoint(s)}let o=this.decodeMiddle(t,n,this.decodeRowStringBuffer),a=o.rowOffset,l=o.resultString;if(null!=i){let h=new ew(a,e);i.foundPossibleResultPoint(h)}let u=eL.decodeEnd(t,a);if(null!=i){let d=new ew((u[0]+u[1])/2,e);i.foundPossibleResultPoint(d)}let c=u[1],g=c+(c-u[0]);if(g>=t.getSize()||!t.isRange(c,g,!1))throw new G;let f=l.toString();if(f.length<8)throw new F;if(!eL.checkChecksum(f))throw new N;let w=(n[1]+n[0])/2,A=(u[1]+u[0])/2,C=this.getBarcodeFormat(),E=[new ew(w,e),new ew(A,e)],m=new j(f,null,0,E,C,new Date().getTime()),_=0;try{let I=eP.decodeRow(e,t,u[1]);m.putMetadata(en.UPC_EAN_EXTENSION,I.getText()),m.putAllMetadata(I.getResultMetadata()),m.addResultPoints(I.getResultPoints()),_=I.getText().length}catch(S){}let p=null==r?null:r.get(L.ALLOWED_EAN_EXTENSIONS);if(null!=p){let T=!1;for(let R in p)if(_.toString()===R){T=!0;break}if(!T)throw new G}return C===er.EAN_13||er.UPC_A,m}static checkChecksum(e){return eL.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return eL.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let i=e.charAt(n).charCodeAt(0)-48;if(i<0||i>9)throw new F;r+=i}r*=3;for(let s=t-2;s>=0;s-=2){let o=e.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new F;r+=o}return(1e3-r)%10}static decodeEnd(e,t){return eL.findGuardPattern(e,t,!1,eL.START_END_PATTERN,new Int32Array(eL.START_END_PATTERN.length).fill(0))}}class eF extends eL{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<6&&s<i;a++){let l=eL.decodeDigit(e,n,s,eL.L_AND_G_PATTERNS);for(let h of(r+=String.fromCharCode(48+l%10),n))s+=h;l>=10&&(o|=1<<5-a)}r=eF.determineFirstDigit(r,o),s=eL.findGuardPattern(e,s,!0,eL.MIDDLE_PATTERN,new Int32Array(eL.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<6&&s<i;u++){let d=eL.decodeDigit(e,n,s,eL.L_PATTERNS);for(let c of(r+=String.fromCharCode(48+d),n))s+=c}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return er.EAN_13}static determineFirstDigit(e,t){for(let r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e;throw new G}}eF.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ev extends eL{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1];for(let o=0;o<4&&s<i;o++){let a=eL.decodeDigit(e,n,s,eL.L_PATTERNS);for(let l of(r+=String.fromCharCode(48+a),n))s+=l}s=eL.findGuardPattern(e,s,!0,eL.MIDDLE_PATTERN,new Int32Array(eL.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&s<i;h++){let u=eL.decodeDigit(e,n,s,eL.L_PATTERNS);for(let d of(r+=String.fromCharCode(48+u),n))s+=d}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return er.EAN_8}}class ek extends eL{constructor(){super(...arguments),this.ean13Reader=new eF}getBarcodeFormat(){return er.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))}decodeMiddle(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let r=new j(t.substring(1),null,null,e.getResultPoints(),er.UPC_A);return null!=e.getResultMetadata()&&r.putAllMetadata(e.getResultMetadata()),r}throw new G}reset(){this.ean13Reader.reset()}}class ex extends eL{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters.map(e=>e);n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<6&&s<i;a++){let l=ex.decodeDigit(e,n,s,ex.L_AND_G_PATTERNS);for(let h of(r+=String.fromCharCode(48+l%10),n))s+=h;l>=10&&(o|=1<<5-a)}return ex.determineNumSysAndCheckDigit(new U(r),o),s}decodeEnd(e,t){return ex.findGuardPatternWithoutCounters(e,t,!0,ex.MIDDLE_END_PATTERN)}checkChecksum(e){return eL.checkChecksum(ex.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n]){e.insert(0,"0"+r),e.append("0"+n);return}throw G.getNotFoundInstance()}getBarcodeFormat(){return er.UPC_E}static convertUPCEtoUPCA(e){let t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),r=new U;r.append(e.charAt(0));let n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n)}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}ex.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ex.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1]),];class eV extends eN{constructor(e){super();let t=null==e?null:e.get(L.POSSIBLE_FORMATS),r=[];null!=t&&(t.indexOf(er.EAN_13)>-1?r.push(new eF):t.indexOf(er.UPC_A)>-1&&r.push(new ek),t.indexOf(er.EAN_8)>-1&&r.push(new ev),t.indexOf(er.UPC_E)>-1&&r.push(new ex)),0===r.length&&(r.push(new eF),r.push(new ev),r.push(new ex)),this.readers=r}decodeRow(e,t,r){for(let n of this.readers)try{let i=n.decodeRow(e,t,r),s=i.getBarcodeFormat()===er.EAN_13&&"0"===i.getText().charAt(0),o=null==r?null:r.get(L.POSSIBLE_FORMATS),a=null==o||o.includes(er.UPC_A);if(s&&a){let l=i.getRawBytes(),h=new j(i.getText().substring(1),l,l.length,i.getResultPoints(),er.UPC_A);return h.putAllMetadata(i.getResultMetadata()),h}return i}catch(u){}throw new G}reset(){for(let e of this.readers)e.reset()}}class eU extends eN{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=[,,,,],this.evenRoundingErrors=[,,,,],this.oddCounts=Array(this.dataCharacterCounters.length/2),this.evenCounts=Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let r=0;r<t.length;r++)if(eN.patternMatchVariance(e,t[r],eU.MAX_INDIVIDUAL_VARIANCE)<eU.MAX_AVG_VARIANCE)return r;throw new G}static count(e){return eg.sum(new Int32Array(e))}static increment(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]>n&&(n=t[i],r=i);e[r]++}static decrement(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]<n&&(n=t[i],r=i);e[r]--}static isFinderPattern(e){let t=e[0]+e[1],r=t+e[2]+e[3],n=t/r;if(n>=eU.MIN_FINDER_PATTERN_RATIO&&n<=eU.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let o of e)o>s&&(s=o),o<i&&(i=o);return s<10*i}return!1}}eU.MAX_AVG_VARIANCE=.2,eU.MAX_INDIVIDUAL_VARIANCE=.45,eU.MIN_FINDER_PATTERN_RATIO=9.5/12,eU.MAX_FINDER_PATTERN_RATIO=12.5/14;class eH{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){return e instanceof eH&&this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class eG{constructor(e,t,r,n,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=[],this.resultPoints.push(new ew(r,i)),this.resultPoints.push(new ew(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){return e instanceof eG&&this.value===e.value}hashCode(){return this.value}}class eX{constructor(){}static getRSSvalue(e,t,r){let n=0;for(let i of e)n+=i;let s=0,o=0,a=e.length;for(let l=0;l<a-1;l++){let h;for(h=1,o|=1<<l;h<e[l];h++,o&=~(1<<l)){let u=eX.combins(n-h-1,a-l-2);if(r&&0===o&&n-h-(a-l-1)>=a-l-1&&(u-=eX.combins(n-h-(a-l),a-l-2)),a-l-1>1){let d=0;for(let c=n-h-(a-l-2);c>t;c--)d+=eX.combins(n-h-c-1,a-l-3);u-=d*(a-1-l)}else n-h>t&&u--;s+=u}n-=h}return s}static combins(e,t){let r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);let i=1,s=1;for(let o=e;o>r;o--)i*=o,s<=n&&(i/=s,s++);for(;s<=n;)i/=s,s++;return i}}class eW{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let r=new P(12*t),n=0,i=e[0].getRightChar().getValue();for(let s=11;s>=0;--s)(i&1<<s)!=0&&r.set(n),n++;for(let o=1;o<e.length;++o){let a=e[o],l=a.getLeftChar().getValue();for(let h=11;h>=0;--h)(l&1<<h)!=0&&r.set(n),n++;if(null!=a.getRightChar()){let u=a.getRightChar().getValue();for(let d=11;d>=0;--d)(u&1<<d)!=0&&r.set(n),n++}}return r}}class ez{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class eY{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class eZ extends eY{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===eZ.FNC1}}eZ.FNC1="$";class eK extends eY{constructor(e,t,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class eq extends eY{constructor(e,t,r){if(super(e),t<0||t>10||r<0||r>10)throw new F;this.firstDigit=t,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===eq.FNC1}isSecondDigitFNC1(){return this.secondDigit===eq.FNC1}isAnyFNC1(){return this.firstDigit===eq.FNC1||this.secondDigit===eq.FNC1}}eq.FNC1=10;class eQ{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new G;let t=e.substring(0,2);for(let r of eQ.TWO_DIGIT_DATA_LENGTH)if(r[0]===t){if(r[1]===eQ.VARIABLE_LENGTH)return eQ.processVariableAI(2,r[2],e);return eQ.processFixedAI(2,r[1],e)}if(e.length<3)throw new G;let n=e.substring(0,3);for(let i of eQ.THREE_DIGIT_DATA_LENGTH)if(i[0]===n){if(i[1]===eQ.VARIABLE_LENGTH)return eQ.processVariableAI(3,i[2],e);return eQ.processFixedAI(3,i[1],e)}for(let s of eQ.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(s[0]===n){if(s[1]===eQ.VARIABLE_LENGTH)return eQ.processVariableAI(4,s[2],e);return eQ.processFixedAI(4,s[1],e)}if(e.length<4)throw new G;let o=e.substring(0,4);for(let a of eQ.FOUR_DIGIT_DATA_LENGTH)if(a[0]===o){if(a[1]===eQ.VARIABLE_LENGTH)return eQ.processVariableAI(4,a[2],e);return eQ.processFixedAI(4,a[1],e)}throw new G}static processFixedAI(e,t,r){if(r.length<e)throw new G;let n=r.substring(0,e);if(r.length<e+t)throw new G;let i=r.substring(e,e+t),s=r.substring(e+t),o="("+n+")"+i,a=eQ.parseFieldsInGeneralPurpose(s);return null==a?o:o+a}static processVariableAI(e,t,r){let n=r.substring(0,e),i;i=r.length<e+t?r.length:e+t;let s=r.substring(e,i),o=r.substring(i),a="("+n+")"+s,l=eQ.parseFieldsInGeneralPurpose(o);return null==l?a:a+l}}eQ.VARIABLE_LENGTH=[],eQ.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",eQ.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",eQ.VARIABLE_LENGTH,20],["22",eQ.VARIABLE_LENGTH,29],["30",eQ.VARIABLE_LENGTH,8],["37",eQ.VARIABLE_LENGTH,8],["90",eQ.VARIABLE_LENGTH,30],["91",eQ.VARIABLE_LENGTH,30],["92",eQ.VARIABLE_LENGTH,30],["93",eQ.VARIABLE_LENGTH,30],["94",eQ.VARIABLE_LENGTH,30],["95",eQ.VARIABLE_LENGTH,30],["96",eQ.VARIABLE_LENGTH,30],["97",eQ.VARIABLE_LENGTH,3],["98",eQ.VARIABLE_LENGTH,30],["99",eQ.VARIABLE_LENGTH,30],],eQ.THREE_DIGIT_DATA_LENGTH=[["240",eQ.VARIABLE_LENGTH,30],["241",eQ.VARIABLE_LENGTH,30],["242",eQ.VARIABLE_LENGTH,6],["250",eQ.VARIABLE_LENGTH,30],["251",eQ.VARIABLE_LENGTH,30],["253",eQ.VARIABLE_LENGTH,17],["254",eQ.VARIABLE_LENGTH,20],["400",eQ.VARIABLE_LENGTH,30],["401",eQ.VARIABLE_LENGTH,30],["402",17],["403",eQ.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",eQ.VARIABLE_LENGTH,20],["421",eQ.VARIABLE_LENGTH,15],["422",3],["423",eQ.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3],],eQ.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",eQ.VARIABLE_LENGTH,15],["391",eQ.VARIABLE_LENGTH,18],["392",eQ.VARIABLE_LENGTH,15],["393",eQ.VARIABLE_LENGTH,18],["703",eQ.VARIABLE_LENGTH,30],],eQ.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",eQ.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",eQ.VARIABLE_LENGTH,20],["8003",eQ.VARIABLE_LENGTH,30],["8004",eQ.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",eQ.VARIABLE_LENGTH,30],["8008",eQ.VARIABLE_LENGTH,12],["8018",18],["8020",eQ.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",eQ.VARIABLE_LENGTH,70],["8200",eQ.VARIABLE_LENGTH,70],];class ej{constructor(e){this.buffer=new U,this.information=e}decodeAllCodes(e,t){let r=t,n=null;for(;;){let i=this.decodeGeneralPurposeField(r,n),s=eQ.parseFieldsInGeneralPurpose(i.getNewString());if(null!=s&&e.append(s),n=i.isRemaining()?""+i.getRemainingValue():null,r===i.getNewPosition())break;r=i.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return 0===t?new eq(this.information.getSize(),eq.FNC1,eq.FNC1):new eq(this.information.getSize(),t-1,eq.FNC1)}let r=this.extractNumericValueFromBitArray(e,7);return new eq(e+7,(r-8)/11,(r-8)%11)}extractNumericValueFromBitArray(e,t){return ej.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,r){let n=0;for(let i=0;i<r;++i)e.get(t+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new eK(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new eK(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let r=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),!(r!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new eK(this.current.getPosition(),this.buffer.toString()):new eK(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ez(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new eK(this.current.getPosition(),this.buffer.toString());return new ez(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ez(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new eK(this.current.getPosition(),this.buffer.toString());return new ez(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ez(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new eK(this.current.getPosition(),this.buffer.toString());return new ez(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ez(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new eZ(e+5,eZ.FNC1);if(t>=5&&t<15)return new eZ(e+5,"0"+(t-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new eZ(e+7,""+(r+1));if(r>=90&&r<116)return new eZ(e+7,""+(r+7));let n=this.extractNumericValueFromBitArray(e,8),i;switch(n){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new F}return new eZ(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new eZ(e+5,eZ.FNC1);if(t>=5&&t<15)return new eZ(e+5,"0"+(t-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new eZ(e+6,""+(r+33));let n;switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new eu("Decoding invalid alphanumeric value: "+r)}return new eZ(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class eJ{constructor(e){this.information=e,this.generalDecoder=new ej(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class e$ extends eJ{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)}encodeCompressedGtinWithoutAI(e,t,r){for(let n=0;n<4;++n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*n,10);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i)}e$.appendCheckDigit(e,r)}static appendCheckDigit(e,t){let r=0;for(let n=0;n<13;n++){let i=e.charAt(n+t).charCodeAt(0)-48;r+=(1&n)==0?3*i:i}10==(r=10-r%10)&&(r=0),e.append(r)}}e$.GTIN_SIZE=40;class e1 extends e${constructor(e){super(e)}parseInformation(){let e=new U;e.append("(01)");let t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(e1.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,e1.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,e1.HEADER_SIZE+44)}}e1.HEADER_SIZE=4;class e2 extends eJ{constructor(e){super(e)}parseInformation(){let e=new U;return this.getGeneralDecoder().decodeAllCodes(e,e2.HEADER_SIZE)}}e2.HEADER_SIZE=5;class e0 extends e${constructor(e){super(e)}encodeCompressedWeight(e,t,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);let i=this.checkWeight(n),s=1e5;for(let o=0;o<5;++o)i/s==0&&e.append("0"),s/=10;e.append(i)}}class e8 extends e0{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=e8.HEADER_SIZE+e0.GTIN_SIZE+e8.WEIGHT_SIZE)throw new G;let e=new U;return this.encodeCompressedGtin(e,e8.HEADER_SIZE),this.encodeCompressedWeight(e,e8.HEADER_SIZE+e0.GTIN_SIZE,e8.WEIGHT_SIZE),e.toString()}}e8.HEADER_SIZE=5,e8.WEIGHT_SIZE=15;class e3 extends e8{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class e6 extends e8{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class e4 extends e${constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<e4.HEADER_SIZE+e$.GTIN_SIZE)throw new G;let e=new U;this.encodeCompressedGtin(e,e4.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(e4.HEADER_SIZE+e$.GTIN_SIZE,e4.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(e4.HEADER_SIZE+e$.GTIN_SIZE+e4.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}e4.HEADER_SIZE=8,e4.LAST_DIGIT_SIZE=2;class e7 extends e${constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<e7.HEADER_SIZE+e$.GTIN_SIZE)throw new G;let e=new U;this.encodeCompressedGtin(e,e7.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(e7.HEADER_SIZE+e$.GTIN_SIZE,e7.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e7.HEADER_SIZE+e$.GTIN_SIZE+e7.LAST_DIGIT_SIZE,e7.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(e7.HEADER_SIZE+e$.GTIN_SIZE+e7.LAST_DIGIT_SIZE+e7.FIRST_THREE_DIGITS_SIZE,null);return e.append(n.getNewString()),e.toString()}}e7.HEADER_SIZE=8,e7.LAST_DIGIT_SIZE=2,e7.FIRST_THREE_DIGITS_SIZE=10;class e5 extends e0{constructor(e,t,r){super(e),this.dateCode=r,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=e5.HEADER_SIZE+e5.GTIN_SIZE+e5.WEIGHT_SIZE+e5.DATE_SIZE)throw new G;let e=new U;return this.encodeCompressedGtin(e,e5.HEADER_SIZE),this.encodeCompressedWeight(e,e5.HEADER_SIZE+e5.GTIN_SIZE,e5.WEIGHT_SIZE),this.encodeCompressedDate(e,e5.HEADER_SIZE+e5.GTIN_SIZE+e5.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,e5.DATE_SIZE);if(38400==r)return;e.append("("),e.append(this.dateCode),e.append(")");let n=r%32,i=(r/=32)%12+1;(r/=12)/10==0&&e.append("0"),e.append(r),i/10==0&&e.append("0"),e.append(i),n/10==0&&e.append("0"),e.append(n)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}e5.HEADER_SIZE=8,e5.WEIGHT_SIZE=20,e5.DATE_SIZE=16;class e9{constructor(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof e9&&e9.equalsOrNull(e.leftchar,t.leftchar)&&e9.equalsOrNull(e.rightchar,t.rightchar)&&e9.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:e9.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class te{constructor(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof te&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let r;return e.forEach((e,n)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(r=!0)})}),r}}class tt extends eU{constructor(e){super(...arguments),this.pairs=Array(tt.MAX_PAIRS),this.rows=[],this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return tt.constructResult(this.decodeRow2pairs(e,t))}catch(n){this.verbose&&console.log(n)}return this.pairs.length=0,this.startFromEven=!0,tt.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(n){if(n instanceof G){if(!this.pairs.length)throw new G;r=!0}}if(this.checkChecksum())return this.pairs;let i;if(i=!!this.rows.length,this.storeRow(e,!1),i){let s=this.checkRowsBoolean(!1);if(null!=s||null!=(s=this.checkRowsBoolean(!0)))return s}throw new G}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows([],0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let n=this.rows[r];for(let i of(this.pairs.length=0,e))this.pairs.push(i.getPairs());if(this.pairs.push(n.getPairs()),!tt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let s=Array(e);s.push(n);try{return this.checkRows(s,r+1)}catch(o){this.verbose&&console.log(o)}}throw new G}static isValidSequence(e){for(let t of tt.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let r=!0;for(let n=0;n<e.length;n++)if(e[n].getFinderPattern().getValue()!=t[n]){r=!1;break}if(r)return!0}return!1}storeRow(e,t){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let s=this.rows[r];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}n=s.isEquivalent(this.pairs),r++}!(i||n||tt.isPartialRow(this.pairs,this.rows))&&(this.rows.push(r,new te(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let r of t)if(r.getPairs().length!==e.length){for(let n of r.getPairs())for(let i of e)if(e9.equals(n,i))break}}static isPartialRow(e,t){for(let r of t){let n=!0;for(let i of e){let s=!1;for(let o of r.getPairs())if(i.equals(o)){s=!0;break}if(!s){n=!1;break}}if(n)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=(function(e){try{if(e.get(1))return new e1(e);if(!e.get(2))return new e2(e);let t=ej.extractNumericValueFromBitArray(e,1,4);switch(t){case 4:return new e3(e);case 5:return new e6(e)}let r=ej.extractNumericValueFromBitArray(e,1,5);switch(r){case 12:return new e4(e);case 13:return new e7(e)}let n=ej.extractNumericValueFromBitArray(e,1,7);switch(n){case 56:return new e5(e,"310","11");case 57:return new e5(e,"320","11");case 58:return new e5(e,"310","13");case 59:return new e5(e,"320","13");case 60:return new e5(e,"310","15");case 61:return new e5(e,"320","15");case 62:return new e5(e,"310","17");case 63:return new e5(e,"320","17")}}catch(i){throw console.log(i),new eu("unknown decoder: "+e)}})(eW.buildBitArray(e)).parseInformation(),r=e[0].getFinderPattern().getResultPoints(),n=e[e.length-1].getFinderPattern().getResultPoints(),i=[r[0],r[1],n[0],n[1]];return new j(t,null,null,i,er.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let o=this.pairs.get(s);n+=o.getLeftChar().getChecksumPortion(),i++;let a=o.getRightChar();null!=a&&(n+=a.getChecksumPortion(),i++)}return 211*(i-4)+(n%=211)==t.getValue()}static getNextSecondBar(e,t){let r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r}retrieveNextPair(e,t,r){let n=t.length%2==0;this.startFromEven&&(n=!n);let i,s=!0,o=-1;do this.findNextPair(e,t,o),null==(i=this.parseFoundFinderPattern(e,r,n))?o=tt.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let a=this.decodeDataCharacter(e,i,n,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new G;let l;try{l=this.decodeDataCharacter(e,i,n,!1)}catch(h){l=null,this.verbose&&console.log(h)}return new e9(a,l,i,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),s;s=r>=0?r:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;s<i&&(a=!e.get(s));)s++;let l=0,h=s;for(let u=s;u<i;u++)if(e.get(u)!=a)n[l]++;else{if(3==l){if(o&&tt.reverseCounters(n),tt.isFinderPattern(n)){this.startEnd[0]=h,this.startEnd[1]=u;return}o&&tt.reverseCounters(n),h+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,a=!a}throw new G}static reverseCounters(e){let t=e.length;for(let r=0;r<t/2;++r){let n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}}parseFoundFinderPattern(e,t,r){let n,i,s;if(r){let o=this.startEnd[0]-1;for(;o>=0&&!e.get(o);)o--;o++,n=this.startEnd[0]-o,i=o,s=this.startEnd[1]}else i=this.startEnd[0],n=(s=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];let a=this.getDecodeFinderCounters();y.arraycopy(a,0,a,1,a.length-1),a[0]=n;let l;try{l=this.parseFinderValue(a,tt.FINDER_PATTERNS)}catch(h){return null}return new eG(l,[i,s],i,s,t)}decodeDataCharacter(e,t,r,n){let i=this.getDataCharacterCounters();for(let s=0;s<i.length;s++)i[s]=0;if(n)tt.recordPatternInReverse(e,t.getStartEnd()[0],i);else{tt.recordPattern(e,t.getStartEnd()[1],i);for(let o=0,a=i.length-1;o<a;o++,a--){let l=i[o];i[o]=i[a],i[a]=l}}let h=eg.sum(new Int32Array(i))/17,u=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(h-u)/u>.3)throw new G;let d=this.getOddCounts(),c=this.getEvenCounts(),g=this.getOddRoundingErrors(),f=this.getEvenRoundingErrors();for(let w=0;w<i.length;w++){let A=1*i[w]/h,C=A+.5;if(C<1){if(A<.3)throw new G;C=1}else if(C>8){if(A>8.7)throw new G;C=8}let E=w/2;(1&w)==0?(d[E]=C,g[E]=A-C):(c[E]=C,f[E]=A-C)}this.adjustOddEvenCounts(17);let m=4*t.getValue()+(r?0:2)+(n?0:1)-1,_=0,I=0;for(let S=d.length-1;S>=0;S--){if(tt.isNotA1left(t,r,n)){let p=tt.WEIGHTS[m][2*S];I+=d[S]*p}_+=d[S]}let T=0;for(let R=c.length-1;R>=0;R--)if(tt.isNotA1left(t,r,n)){let N=tt.WEIGHTS[m][2*R+1];T+=c[R]*N}if((1&_)!=0||_>13||_<4)throw new G;let D=(13-_)/2,y=tt.SYMBOL_WIDEST[D],O=eX.getRSSvalue(d,y,!0),M=eX.getRSSvalue(c,9-y,!1),B=tt.EVEN_TOTAL_SUBSET[D],b=tt.GSUM[D];return new eH(O*B+M+b,I+T)}static isNotA1left(e,t,r){return!(0==e.getValue()&&t&&r)}adjustOddEvenCounts(e){let t=eg.sum(new Int32Array(this.getOddCounts())),r=eg.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;t>13?i=!0:t<4&&(n=!0);let s=!1,o=!1;r>13?o=!0:r<4&&(s=!0);let a=t+r-e,l=(1&t)==1,h=(1&r)==0;if(1==a){if(l){if(h)throw new G;i=!0}else{if(!h)throw new G;o=!0}}else if(-1==a){if(l){if(h)throw new G;n=!0}else{if(!h)throw new G;s=!0}}else if(0==a){if(l){if(!h)throw new G;t<r?(n=!0,o=!0):(i=!0,s=!0)}else if(h)throw new G}else throw new G;if(n){if(i)throw new G;tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new G;tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tt.SYMBOL_WIDEST=[7,5,4,3,1],tt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],tt.GSUM=[0,348,1388,2948,3988],tt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],tt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],tt.FINDER_PAT_A=0,tt.FINDER_PAT_B=1,tt.FINDER_PAT_C=2,tt.FINDER_PAT_D=3,tt.FINDER_PAT_E=4,tt.FINDER_PAT_F=5,tt.FINDER_PATTERN_SEQUENCES=[[tt.FINDER_PAT_A,tt.FINDER_PAT_A],[tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B],[tt.FINDER_PAT_A,tt.FINDER_PAT_C,tt.FINDER_PAT_B,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_C],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],],tt.MAX_PAIRS=11;class tr extends eH{constructor(e,t,r){super(e,t),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class tn extends eU{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,r){let n=this.decodePair(t,!1,e,r);tn.addOrTally(this.possibleLeftPairs,n),t.reverse();let i=this.decodePair(t,!0,e,r);for(let s of(tn.addOrTally(this.possibleRightPairs,i),t.reverse(),this.possibleLeftPairs))if(s.getCount()>1){for(let o of this.possibleRightPairs)if(o.getCount()>1&&tn.checkChecksum(s,o))return tn.constructResult(s,o)}throw new G}static addOrTally(e,t){if(null==t)return;let r=!1;for(let n of e)if(n.getValue()===t.getValue()){n.incrementCount(),r=!0;break}r||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let r=4537077*e.getValue()+t.getValue(),n=new String(r).toString(),i=new U;for(let s=13-n.length;s>0;s--)i.append("0");i.append(n);let o=0;for(let a=0;a<13;a++){let l=i.charAt(a).charCodeAt(0)-48;o+=(1&a)==0?3*l:l}10==(o=10-o%10)&&(o=0),i.append(o.toString());let h=e.getFinderPattern().getResultPoints(),u=t.getFinderPattern().getResultPoints();return new j(i.toString(),null,0,[h[0],h[1],u[0],u[1]],er.RSS_14,new Date().getTime())}static checkChecksum(e,t){let r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(e,t,r,n){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,r,t,i),o=null==n?null:n.get(L.NEED_RESULT_POINT_CALLBACK);if(null!=o){let a=(i[0]+i[1])/2;t&&(a=e.getSize()-1-a),o.foundPossibleResultPoint(new ew(a,r))}let l=this.decodeDataCharacter(e,s,!0),h=this.decodeDataCharacter(e,s,!1);return new tr(1597*l.getValue()+h.getValue(),l.getChecksumPortion()+4*h.getChecksumPortion(),s)}catch(u){return null}}decodeDataCharacter(e,t,r){let n=this.getDataCharacterCounters();for(let i=0;i<n.length;i++)n[i]=0;if(r)eN.recordPatternInReverse(e,t.getStartEnd()[0],n);else{eN.recordPattern(e,t.getStartEnd()[1]+1,n);for(let s=0,o=n.length-1;s<o;s++,o--){let a=n[s];n[s]=n[o],n[o]=a}}let l=r?16:15,h=eg.sum(new Int32Array(n))/l,u=this.getOddCounts(),d=this.getEvenCounts(),c=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors();for(let f=0;f<n.length;f++){let w=n[f]/h,A=Math.floor(w+.5);A<1?A=1:A>8&&(A=8);let C=Math.floor(f/2);(1&f)==0?(u[C]=A,c[C]=w-A):(d[C]=A,g[C]=w-A)}this.adjustOddEvenCounts(r,l);let E=0,m=0;for(let _=u.length-1;_>=0;_--)m*=9,m+=u[_],E+=u[_];let I=0,S=0;for(let p=d.length-1;p>=0;p--)I*=9,I+=d[p],S+=d[p];let T=m+3*I;if(r){if((1&E)!=0||E>12||E<4)throw new G;let R=(12-E)/2,N=tn.OUTSIDE_ODD_WIDEST[R],D=eX.getRSSvalue(u,N,!1),y=eX.getRSSvalue(d,9-N,!0),O=tn.OUTSIDE_EVEN_TOTAL_SUBSET[R],M=tn.OUTSIDE_GSUM[R];return new eH(D*O+y+M,T)}{if((1&S)!=0||S>10||S<4)throw new G;let B=(10-S)/2,b=tn.INSIDE_ODD_WIDEST[B],P=eX.getRSSvalue(u,b,!0),L=eX.getRSSvalue(d,9-b,!1),F=tn.INSIDE_ODD_TOTAL_SUBSET[B],v=tn.INSIDE_GSUM[B];return new eH(L*F+P+v,T)}}findFinderPattern(e,t){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=e.getSize(),i=!1,s=0;for(;s<n&&t!==(i=!e.get(s));)s++;let o=0,a=s;for(let l=s;l<n;l++)if(e.get(l)!==i)r[o]++;else{if(3===o){if(eU.isFinderPattern(r))return[a,l];a+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,o--}else o++;r[o]=1,i=!i}throw new G}parseFoundFinderPattern(e,t,r,n){let i=e.get(n[0]),s=n[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;let o=n[0]-s,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);y.arraycopy(a,0,l,1,a.length-1),l[0]=o;let h=this.parseFinderValue(l,tn.FINDER_PATTERNS),u=s,d=n[1];return r&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new eG(h,[s,n[1]],u,d,t)}adjustOddEvenCounts(e,t){let r=eg.sum(new Int32Array(this.getOddCounts())),n=eg.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,o=!1,a=!1;e?(r>12?s=!0:r<4&&(i=!0),n>12?a=!0:n<4&&(o=!0)):(r>11?s=!0:r<5&&(i=!0),n>10?a=!0:n<4&&(o=!0));let l=r+n-t,h=(1&r)==(e?1:0),u=(1&n)==1;if(1===l){if(h){if(u)throw new G;s=!0}else{if(!u)throw new G;a=!0}}else if(-1===l){if(h){if(u)throw new G;i=!0}else{if(!u)throw new G;o=!0}}else if(0===l){if(h){if(!u)throw new G;r<n?(i=!0,a=!0):(s=!0,o=!0)}else if(u)throw new G}else throw new G;if(i){if(s)throw new G;eU.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&eU.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new G;eU.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&eU.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],tn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],tn.OUTSIDE_GSUM=[0,161,961,2015,2715],tn.INSIDE_GSUM=[0,336,1036,1516],tn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],tn.INSIDE_ODD_WIDEST=[2,4,6,8],tn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1]),];class ti extends eN{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;let r=e?e.get(L.POSSIBLE_FORMATS):null,n=e&&void 0!==e.get(L.ASSUME_CODE_39_CHECK_DIGIT);r&&((r.includes(er.EAN_13)||r.includes(er.UPC_A)||r.includes(er.EAN_8)||r.includes(er.UPC_E))&&this.readers.push(new eV(e)),r.includes(er.CODE_39)&&this.readers.push(new ey(n)),r.includes(er.CODE_128)&&this.readers.push(new eD),r.includes(er.ITF)&&this.readers.push(new eO),r.includes(er.RSS_14)&&this.readers.push(new tn),r.includes(er.RSS_EXPANDED)&&this.readers.push(new tt(this.verbose))),0===this.readers.length&&(this.readers.push(new eV(e)),this.readers.push(new ey),this.readers.push(new eV(e)),this.readers.push(new eD),this.readers.push(new eO),this.readers.push(new tn),this.readers.push(new tt(this.verbose)))}decodeRow(e,t,r){for(let n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(e,t,r)}catch(i){}throw new G}reset(){this.readers.forEach(e=>e.reset())}}class ts{constructor(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class to{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ta{constructor(e,t,r,n,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=s;let o=0,a=s.getECCodewords(),l=s.getECBlocks();for(let h of l)o+=h.getCount()*(h.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((1&e)!=0||(1&t)!=0)throw new F;for(let r of ta.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===t)return r;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new ta(1,10,10,8,8,new ts(5,new to(1,3))),new ta(2,12,12,10,10,new ts(7,new to(1,5))),new ta(3,14,14,12,12,new ts(10,new to(1,8))),new ta(4,16,16,14,14,new ts(12,new to(1,12))),new ta(5,18,18,16,16,new ts(14,new to(1,18))),new ta(6,20,20,18,18,new ts(18,new to(1,22))),new ta(7,22,22,20,20,new ts(20,new to(1,30))),new ta(8,24,24,22,22,new ts(24,new to(1,36))),new ta(9,26,26,24,24,new ts(28,new to(1,44))),new ta(10,32,32,14,14,new ts(36,new to(1,62))),new ta(11,36,36,16,16,new ts(42,new to(1,86))),new ta(12,40,40,18,18,new ts(48,new to(1,114))),new ta(13,44,44,20,20,new ts(56,new to(1,144))),new ta(14,48,48,22,22,new ts(68,new to(1,174))),new ta(15,52,52,24,24,new ts(42,new to(2,102))),new ta(16,64,64,14,14,new ts(56,new to(2,140))),new ta(17,72,72,16,16,new ts(36,new to(4,92))),new ta(18,80,80,18,18,new ts(48,new to(4,114))),new ta(19,88,88,20,20,new ts(56,new to(4,144))),new ta(20,96,96,22,22,new ts(68,new to(4,174))),new ta(21,104,104,24,24,new ts(56,new to(6,136))),new ta(22,120,120,18,18,new ts(68,new to(6,175))),new ta(23,132,132,20,20,new ts(62,new to(8,163))),new ta(24,144,144,22,22,new ts(62,new to(8,156),new to(2,155))),new ta(25,8,18,6,16,new ts(7,new to(1,5))),new ta(26,8,32,6,14,new ts(11,new to(1,10))),new ta(27,12,26,10,24,new ts(14,new to(1,16))),new ta(28,12,36,10,16,new ts(18,new to(1,22))),new ta(29,16,36,14,16,new ts(24,new to(1,32))),new ta(30,16,48,14,22,new ts(28,new to(1,49)))]}}ta.VERSIONS=ta.buildVersions();class tl{constructor(e){let t=e.getHeight();if(t<8||t>144||(1&t)!=0)throw new F;this.version=tl.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new H(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){let t=e.getHeight(),r=e.getWidth();return ta.getVersionForDimensions(t,r)}readCodewords(){let e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,n=0,i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,a=!1,l=!1,h=!1;do if(r!==i||0!==n||o){if(r!==i-2||0!==n||(3&s)==0||a){if(r!==i+4||2!==n||(7&s)!=0||l){if(r!==i-2||0!==n||(7&s)!=4||h){do r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,s)),r-=2,n+=2;while(r>=0&&n<s);r+=1,n+=3;do r>=0&&n<s&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,s)),r+=2,n-=2;while(r<i&&n>=0);r+=3,n+=1}else e[t++]=255&this.readCorner4(i,s),r-=2,n+=2,h=!0}else e[t++]=255&this.readCorner3(i,s),r-=2,n+=2,l=!0}else e[t++]=255&this.readCorner2(i,s),r-=2,n+=2,a=!0}else e[t++]=255&this.readCorner1(i,s),r-=2,n+=2,o=!0;while(r<i||n<s);if(t!==this.version.getTotalCodewords())throw new F;return e}readModule(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,r,n){let i=0;return this.readModule(e-2,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-2,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t,r,n)&&(i|=1),i<<=1,this.readModule(e,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e,t,r,n)&&(i|=1),i}readCorner1(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}readCorner2(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner3(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner4(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}extractDataRegion(e){let t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new T("Dimension of bitMatrix must match the version size");let n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/n|0,o=r/i|0,a=new H(o*i,s*n);for(let l=0;l<s;++l){let h=l*n;for(let u=0;u<o;++u){let d=u*i;for(let c=0;c<n;++c){let g=l*(n+2)+1+c,f=h+c;for(let w=0;w<i;++w){let A=u*(i+2)+1+w;if(e.get(A,g)){let C=d+w;a.set(C,f)}}}}}return a}}class th{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){let r=t.getECBlocks(),n=0,i=r.getECBlocks();for(let s of i)n+=s.getCount();let o=Array(n),a=0;for(let l of i)for(let h=0;h<l.getCount();h++){let u=l.getDataCodewords(),d=r.getECCodewords()+u;o[a++]=new th(u,new Uint8Array(d))}let c=o[0].codewords.length,g=c-r.getECCodewords(),f=g-1,w=0;for(let A=0;A<f;A++)for(let C=0;C<a;C++)o[C].codewords[A]=e[w++];let E=24===t.getVersionNumber(),m=E?8:a;for(let _=0;_<m;_++)o[_].codewords[g-1]=e[w++];let I=o[0].codewords.length;for(let S=g;S<I;S++)for(let p=0;p<a;p++){let R=E?(p+8)%a:p,N=E&&R>7?S-1:S;o[R].codewords[N]=e[w++]}if(w!==e.length)throw new T;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class tu{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let t=0,r=this.bitOffset,n=this.byteOffset,i=this.bytes;if(r>0){let s=8-r,o=e<s?e:s,a=s-o;t=(i[n]&255>>8-o<<a)>>a,e-=o,8===(r+=o)&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|255&i[n],n++,e-=8;if(e>0){let l=8-e;t=t<<e|(i[n]&255>>l<<l)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=n,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(n=f||(f={}))[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE";class td{static decode(e){let t=new tu(e),r=new U,n=new U,i=[],s=f.ASCII_ENCODE;do if(s===f.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,n);else{switch(s){case f.C40_ENCODE:this.decodeC40Segment(t,r);break;case f.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case f.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case f.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case f.BASE256_ENCODE:this.decodeBase256Segment(t,r,i);break;default:throw new F}s=f.ASCII_ENCODE}while(s!==f.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new ei(e,r.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,r){let n=!1;do{let i=e.readBits(8);if(0===i)throw new F;if(i<=128){n&&(i+=128),t.append(String.fromCharCode(i-1));break}if(129===i)return f.PAD_ENCODE;else if(i<=229){let s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return f.C40_ENCODE;case 231:return f.BASE256_ENCODE;case 232:t.append("\x1d");break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:t.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return f.ANSIX12_ENCODE;case 239:return f.TEXT_ENCODE;case 240:return f.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new F}}while(e.available()>0);return f.ASCII_ENCODE}static decodeC40Segment(e,t){let r=!1,n=[],i=0;do{if(8===e.available())return;let s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),n);for(let o=0;o<3;o++){let a=n[o];switch(i){case 0:if(a<3)i=a+1;else if(a<this.C40_BASIC_SET_CHARS.length){let l=this.C40_BASIC_SET_CHARS[a];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else throw new F;break;case 1:r?(t.append(String.fromCharCode(a+128)),r=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.C40_SHIFT2_SET_CHARS.length){let h=this.C40_SHIFT2_SET_CHARS[a];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(a){case 27:t.append("\x1d");break;case 30:r=!0;break;default:throw new F}i=0;break;case 3:r?(t.append(String.fromCharCode(a+224)),r=!1):t.append(String.fromCharCode(a+96)),i=0;break;default:throw new F}}}while(e.available()>0)}static decodeTextSegment(e,t){let r=!1,n=[],i=0;do{if(8===e.available())return;let s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),n);for(let o=0;o<3;o++){let a=n[o];switch(i){case 0:if(a<3)i=a+1;else if(a<this.TEXT_BASIC_SET_CHARS.length){let l=this.TEXT_BASIC_SET_CHARS[a];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else throw new F;break;case 1:r?(t.append(String.fromCharCode(a+128)),r=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.TEXT_SHIFT2_SET_CHARS.length){let h=this.TEXT_SHIFT2_SET_CHARS[a];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(a){case 27:t.append("\x1d");break;case 30:r=!0;break;default:throw new F}i=0;break;case 3:if(a<this.TEXT_SHIFT3_SET_CHARS.length){let u=this.TEXT_SHIFT3_SET_CHARS[a];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u),i=0}else throw new F;break;default:throw new F}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){let r=[];do{if(8===e.available())return;let n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),r);for(let i=0;i<3;i++){let s=r[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new F}}}while(e.available()>0)}static parseTwoBytes(e,t,r){let n=(e<<8)+t-1,i=Math.floor(n/1600);r[0]=i,n-=1600*i,i=Math.floor(n/40),r[1]=i,r[2]=n-40*i}static decodeEdifactSegment(e,t){do{if(16>=e.available())return;for(let r=0;r<4;r++){let n=e.readBits(6);if(31===n){let i=8-e.getBitOffset();8!==i&&e.readBits(i);return}(32&n)==0&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,r){let n=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),n++),s;if((s=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),n++))<0)throw new F;let o=new Uint8Array(s);for(let a=0;a<s;a++){if(8>e.available())throw new F;o[a]=this.unrandomize255State(e.readBits(8),n++)}r.push(o);try{t.append(x.decode(o,V.ISO88591))}catch(l){throw new eu("Platform does not support required encoding: "+l.message)}}static unrandomize255State(e,t){let r=e-(149*t%255+1);return r>=0?r:r+256}}td.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],td.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],td.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],td.TEXT_SHIFT2_SET_CHARS=td.C40_SHIFT2_SET_CHARS,td.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"];class tc{constructor(){this.rsDecoder=new ed(el.DATA_MATRIX_FIELD_256)}decode(e){let t=new tl(e),r=t.getVersion(),n=t.readCodewords(),i=th.getDataBlocks(n,r),s=0;for(let o of i)s+=o.getNumDataCodewords();let a=new Uint8Array(s),l=i.length;for(let h=0;h<l;h++){let u=i[h],d=u.getCodewords(),c=u.getNumDataCodewords();this.correctErrors(d,c);for(let g=0;g<c;g++)a[g*l+h]=d[g]}return td.decode(a)}correctErrors(e,t){let r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new N}for(let i=0;i<t;i++)e[i]=r[i]}}class tg{constructor(e){this.image=e,this.rectangleDetector=new eE(this.image)}detect(){let e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if((t=this.detectSolid2(t))[3]=this.correctTopRight(t),!t[3])throw new G;t=this.shiftToModuleCenter(t);let r=t[0],n=t[1],i=t[2],s=t[3],o=this.transitionsBetween(r,s)+1,a=this.transitionsBetween(i,s)+1;(1&o)==1&&(o+=1),(1&a)==1&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let l=tg.sampleGrid(this.image,r,n,i,s,o,a);return new eA(l,[r,n,i,s])}static shiftPoint(e,t,r){let n=(t.getX()-e.getX())/(r+1),i=(t.getY()-e.getY())/(r+1);return new ew(e.getX()+n,e.getY()+i)}static moveAway(e,t,r){let n=e.getX(),i=e.getY();return n<t?n-=1:n+=1,i<r?i-=1:i+=1,new ew(n,i)}detectSolid1(e){let t=e[0],r=e[1],n=e[3],i=e[2],s=this.transitionsBetween(t,r),o=this.transitionsBetween(r,n),a=this.transitionsBetween(n,i),l=this.transitionsBetween(i,t),h=s,u=[i,t,r,n];return h>o&&(h=o,u[0]=t,u[1]=r,u[2]=n,u[3]=i),h>a&&(h=a,u[0]=r,u[1]=n,u[2]=i,u[3]=t),h>l&&(u[0]=n,u[1]=i,u[2]=t,u[3]=r),u}detectSolid2(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=this.transitionsBetween(t,i),o=tg.shiftPoint(r,n,(s+1)*4),a=tg.shiftPoint(n,r,(s+1)*4),l=this.transitionsBetween(o,t),h=this.transitionsBetween(a,i);return l<h?(e[0]=t,e[1]=r,e[2]=n,e[3]=i):(e[0]=r,e[1]=n,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=this.transitionsBetween(t,i),o=this.transitionsBetween(r,i),a=tg.shiftPoint(t,r,(o+1)*4),l=tg.shiftPoint(n,r,(s+1)*4);s=this.transitionsBetween(a,i),o=this.transitionsBetween(l,i);let h=new ew(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1)),u=new ew(i.getX()+(t.getX()-r.getX())/(o+1),i.getY()+(t.getY()-r.getY())/(o+1));if(!this.isValid(h))return this.isValid(u)?u:null;if(!this.isValid(u))return h;let d=this.transitionsBetween(a,h)+this.transitionsBetween(l,h),c=this.transitionsBetween(a,u)+this.transitionsBetween(l,u);return d>c?h:u}shiftToModuleCenter(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,o=this.transitionsBetween(n,i)+1,a=tg.shiftPoint(t,r,4*o),l=tg.shiftPoint(n,r,4*s);s=this.transitionsBetween(a,i)+1,o=this.transitionsBetween(l,i)+1,(1&s)==1&&(s+=1),(1&o)==1&&(o+=1);let h=(t.getX()+r.getX()+n.getX()+i.getX())/4,u=(t.getY()+r.getY()+n.getY()+i.getY())/4;t=tg.moveAway(t,h,u),r=tg.moveAway(r,h,u),n=tg.moveAway(n,h,u),i=tg.moveAway(i,h,u);let d,c;return a=tg.shiftPoint(t,r,4*o),a=tg.shiftPoint(a,i,4*s),d=tg.shiftPoint(r,t,4*o),d=tg.shiftPoint(d,n,4*s),l=tg.shiftPoint(n,i,4*o),l=tg.shiftPoint(l,r,4*s),c=tg.shiftPoint(i,n,4*o),c=tg.shiftPoint(c,t,4*s),[a,d,l,c]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,r,n,i,s,o){let a=eS.getInstance();return a.sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(e,t){let r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-n)>Math.abs(i-r);if(o){let a=r;r=n,n=a,a=i,i=s,s=a}let l=Math.abs(i-r),h=Math.abs(s-n),u=-l/2,d=n<s?1:-1,c=r<i?1:-1,g=0,f=this.image.get(o?n:r,o?r:n);for(let w=r,A=n;w!==i;w+=c){let C=this.image.get(o?A:w,o?w:A);if(C!==f&&(g++,f=C),(u+=h)>0){if(A===s)break;A+=d,u-=l}}return g}}class tf{constructor(){this.decoder=new tc}decode(e,t=null){let r,n;if(null!=t&&t.has(L.PURE_BARCODE)){let i=tf.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(i),n=tf.NO_POINTS}else{let s=new tg(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),n=s.getPoints()}let o=r.getRawBytes(),a=new j(r.getText(),o,8*o.length,n,er.DATA_MATRIX,y.currentTimeMillis()),l=r.getByteSegments();null!=l&&a.putMetadata(en.BYTE_SEGMENTS,l);let h=r.getECLevel();return null!=h&&a.putMetadata(en.ERROR_CORRECTION_LEVEL,h),a}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new G;let n=this.moduleSize(t,e),i=t[1],s=r[1],o=t[0],a=r[0],l=(a-o+1)/n,h=(s-i+1)/n;if(l<=0||h<=0)throw new G;let u=n/2;i+=u,o+=u;let d=new H(l,h);for(let c=0;c<h;c++){let g=i+c*n;for(let f=0;f<l;f++)e.get(o+f*n,g)&&d.set(f,c)}return d}static moduleSize(e,t){let r=t.getWidth(),n=e[0],i=e[1];for(;n<r&&t.get(n,i);)n++;if(n===r)throw new G;let s=n-e[0];if(0===s)throw new G;return s}}tf.NO_POINTS=[],(i=w||(w={}))[i.L=0]="L",i[i.M=1]="M",i[i.Q=2]="Q",i[i.H=3]="H";class tw{constructor(e,t,r){this.value=e,this.stringValue=t,this.bits=r,tw.FOR_BITS.set(r,this),tw.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return tw.L;case"M":return tw.M;case"Q":return tw.Q;case"H":return tw.H;default:throw new p(e+"not available")}}toString(){return this.stringValue}equals(e){return e instanceof tw&&this.value===e.value}static forBits(e){if(e<0||e>=tw.FOR_BITS.size)throw new T;return tw.FOR_BITS.get(e)}}tw.FOR_BITS=new Map,tw.FOR_VALUE=new Map,tw.L=new tw(w.L,"L",1),tw.M=new tw(w.M,"M",0),tw.Q=new tw(w.Q,"Q",3),tw.H=new tw(w.H,"H",2);class tA{constructor(e){this.errorCorrectionLevel=tw.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return b.bitCount(e^t)}static decodeFormatInformation(e,t){let r=tA.doDecodeFormatInformation(e,t);return null!==r?r:tA.doDecodeFormatInformation(e^tA.FORMAT_INFO_MASK_QR,t^tA.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;for(let i of tA.FORMAT_INFO_DECODE_LOOKUP){let s=i[0];if(s===e||s===t)return new tA(i[1]);let o=tA.numBitsDiffering(e,s);o<r&&(n=i[1],r=o),e!==t&&(o=tA.numBitsDiffering(t,s))<r&&(n=i[1],r=o)}return r<=3?new tA(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){return e instanceof tA&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}tA.FORMAT_INFO_MASK_QR=21522,tA.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31]),];class tC{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0,t=this.ecBlocks;for(let r of t)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class tE{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tm{constructor(e,t,...r){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=r;let n=0,i=r[0].getECCodewordsPerBlock(),s=r[0].getECBlocks();for(let o of s)n+=o.getCount()*(o.getDataCodewords()+i);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!=1)throw new F;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new F}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return tm.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<tm.VERSION_DECODE_INFO.length;n++){let i=tm.VERSION_DECODE_INFO[n];if(i===e)return tm.getVersionForNumber(n+7);let s=tA.numBitsDiffering(e,i);s<t&&(r=n+7,t=s)}return t<=3?tm.getVersionForNumber(r):null}buildFunctionPattern(){let e=this.getDimensionForVersion(),t=new H(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);let r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){let i=this.alignmentPatternCenters[n]-2;for(let s=0;s<r;s++)(0!==n||0!==s&&s!==r-1)&&(n!==r-1||0!==s)&&t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}tm.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tm.VERSIONS=[new tm(1,new Int32Array(0),new tC(7,new tE(1,19)),new tC(10,new tE(1,16)),new tC(13,new tE(1,13)),new tC(17,new tE(1,9))),new tm(2,Int32Array.from([6,18]),new tC(10,new tE(1,34)),new tC(16,new tE(1,28)),new tC(22,new tE(1,22)),new tC(28,new tE(1,16))),new tm(3,Int32Array.from([6,22]),new tC(15,new tE(1,55)),new tC(26,new tE(1,44)),new tC(18,new tE(2,17)),new tC(22,new tE(2,13))),new tm(4,Int32Array.from([6,26]),new tC(20,new tE(1,80)),new tC(18,new tE(2,32)),new tC(26,new tE(2,24)),new tC(16,new tE(4,9))),new tm(5,Int32Array.from([6,30]),new tC(26,new tE(1,108)),new tC(24,new tE(2,43)),new tC(18,new tE(2,15),new tE(2,16)),new tC(22,new tE(2,11),new tE(2,12))),new tm(6,Int32Array.from([6,34]),new tC(18,new tE(2,68)),new tC(16,new tE(4,27)),new tC(24,new tE(4,19)),new tC(28,new tE(4,15))),new tm(7,Int32Array.from([6,22,38]),new tC(20,new tE(2,78)),new tC(18,new tE(4,31)),new tC(18,new tE(2,14),new tE(4,15)),new tC(26,new tE(4,13),new tE(1,14))),new tm(8,Int32Array.from([6,24,42]),new tC(24,new tE(2,97)),new tC(22,new tE(2,38),new tE(2,39)),new tC(22,new tE(4,18),new tE(2,19)),new tC(26,new tE(4,14),new tE(2,15))),new tm(9,Int32Array.from([6,26,46]),new tC(30,new tE(2,116)),new tC(22,new tE(3,36),new tE(2,37)),new tC(20,new tE(4,16),new tE(4,17)),new tC(24,new tE(4,12),new tE(4,13))),new tm(10,Int32Array.from([6,28,50]),new tC(18,new tE(2,68),new tE(2,69)),new tC(26,new tE(4,43),new tE(1,44)),new tC(24,new tE(6,19),new tE(2,20)),new tC(28,new tE(6,15),new tE(2,16))),new tm(11,Int32Array.from([6,30,54]),new tC(20,new tE(4,81)),new tC(30,new tE(1,50),new tE(4,51)),new tC(28,new tE(4,22),new tE(4,23)),new tC(24,new tE(3,12),new tE(8,13))),new tm(12,Int32Array.from([6,32,58]),new tC(24,new tE(2,92),new tE(2,93)),new tC(22,new tE(6,36),new tE(2,37)),new tC(26,new tE(4,20),new tE(6,21)),new tC(28,new tE(7,14),new tE(4,15))),new tm(13,Int32Array.from([6,34,62]),new tC(26,new tE(4,107)),new tC(22,new tE(8,37),new tE(1,38)),new tC(24,new tE(8,20),new tE(4,21)),new tC(22,new tE(12,11),new tE(4,12))),new tm(14,Int32Array.from([6,26,46,66]),new tC(30,new tE(3,115),new tE(1,116)),new tC(24,new tE(4,40),new tE(5,41)),new tC(20,new tE(11,16),new tE(5,17)),new tC(24,new tE(11,12),new tE(5,13))),new tm(15,Int32Array.from([6,26,48,70]),new tC(22,new tE(5,87),new tE(1,88)),new tC(24,new tE(5,41),new tE(5,42)),new tC(30,new tE(5,24),new tE(7,25)),new tC(24,new tE(11,12),new tE(7,13))),new tm(16,Int32Array.from([6,26,50,74]),new tC(24,new tE(5,98),new tE(1,99)),new tC(28,new tE(7,45),new tE(3,46)),new tC(24,new tE(15,19),new tE(2,20)),new tC(30,new tE(3,15),new tE(13,16))),new tm(17,Int32Array.from([6,30,54,78]),new tC(28,new tE(1,107),new tE(5,108)),new tC(28,new tE(10,46),new tE(1,47)),new tC(28,new tE(1,22),new tE(15,23)),new tC(28,new tE(2,14),new tE(17,15))),new tm(18,Int32Array.from([6,30,56,82]),new tC(30,new tE(5,120),new tE(1,121)),new tC(26,new tE(9,43),new tE(4,44)),new tC(28,new tE(17,22),new tE(1,23)),new tC(28,new tE(2,14),new tE(19,15))),new tm(19,Int32Array.from([6,30,58,86]),new tC(28,new tE(3,113),new tE(4,114)),new tC(26,new tE(3,44),new tE(11,45)),new tC(26,new tE(17,21),new tE(4,22)),new tC(26,new tE(9,13),new tE(16,14))),new tm(20,Int32Array.from([6,34,62,90]),new tC(28,new tE(3,107),new tE(5,108)),new tC(26,new tE(3,41),new tE(13,42)),new tC(30,new tE(15,24),new tE(5,25)),new tC(28,new tE(15,15),new tE(10,16))),new tm(21,Int32Array.from([6,28,50,72,94]),new tC(28,new tE(4,116),new tE(4,117)),new tC(26,new tE(17,42)),new tC(28,new tE(17,22),new tE(6,23)),new tC(30,new tE(19,16),new tE(6,17))),new tm(22,Int32Array.from([6,26,50,74,98]),new tC(28,new tE(2,111),new tE(7,112)),new tC(28,new tE(17,46)),new tC(30,new tE(7,24),new tE(16,25)),new tC(24,new tE(34,13))),new tm(23,Int32Array.from([6,30,54,78,102]),new tC(30,new tE(4,121),new tE(5,122)),new tC(28,new tE(4,47),new tE(14,48)),new tC(30,new tE(11,24),new tE(14,25)),new tC(30,new tE(16,15),new tE(14,16))),new tm(24,Int32Array.from([6,28,54,80,106]),new tC(30,new tE(6,117),new tE(4,118)),new tC(28,new tE(6,45),new tE(14,46)),new tC(30,new tE(11,24),new tE(16,25)),new tC(30,new tE(30,16),new tE(2,17))),new tm(25,Int32Array.from([6,32,58,84,110]),new tC(26,new tE(8,106),new tE(4,107)),new tC(28,new tE(8,47),new tE(13,48)),new tC(30,new tE(7,24),new tE(22,25)),new tC(30,new tE(22,15),new tE(13,16))),new tm(26,Int32Array.from([6,30,58,86,114]),new tC(28,new tE(10,114),new tE(2,115)),new tC(28,new tE(19,46),new tE(4,47)),new tC(28,new tE(28,22),new tE(6,23)),new tC(30,new tE(33,16),new tE(4,17))),new tm(27,Int32Array.from([6,34,62,90,118]),new tC(30,new tE(8,122),new tE(4,123)),new tC(28,new tE(22,45),new tE(3,46)),new tC(30,new tE(8,23),new tE(26,24)),new tC(30,new tE(12,15),new tE(28,16))),new tm(28,Int32Array.from([6,26,50,74,98,122]),new tC(30,new tE(3,117),new tE(10,118)),new tC(28,new tE(3,45),new tE(23,46)),new tC(30,new tE(4,24),new tE(31,25)),new tC(30,new tE(11,15),new tE(31,16))),new tm(29,Int32Array.from([6,30,54,78,102,126]),new tC(30,new tE(7,116),new tE(7,117)),new tC(28,new tE(21,45),new tE(7,46)),new tC(30,new tE(1,23),new tE(37,24)),new tC(30,new tE(19,15),new tE(26,16))),new tm(30,Int32Array.from([6,26,52,78,104,130]),new tC(30,new tE(5,115),new tE(10,116)),new tC(28,new tE(19,47),new tE(10,48)),new tC(30,new tE(15,24),new tE(25,25)),new tC(30,new tE(23,15),new tE(25,16))),new tm(31,Int32Array.from([6,30,56,82,108,134]),new tC(30,new tE(13,115),new tE(3,116)),new tC(28,new tE(2,46),new tE(29,47)),new tC(30,new tE(42,24),new tE(1,25)),new tC(30,new tE(23,15),new tE(28,16))),new tm(32,Int32Array.from([6,34,60,86,112,138]),new tC(30,new tE(17,115)),new tC(28,new tE(10,46),new tE(23,47)),new tC(30,new tE(10,24),new tE(35,25)),new tC(30,new tE(19,15),new tE(35,16))),new tm(33,Int32Array.from([6,30,58,86,114,142]),new tC(30,new tE(17,115),new tE(1,116)),new tC(28,new tE(14,46),new tE(21,47)),new tC(30,new tE(29,24),new tE(19,25)),new tC(30,new tE(11,15),new tE(46,16))),new tm(34,Int32Array.from([6,34,62,90,118,146]),new tC(30,new tE(13,115),new tE(6,116)),new tC(28,new tE(14,46),new tE(23,47)),new tC(30,new tE(44,24),new tE(7,25)),new tC(30,new tE(59,16),new tE(1,17))),new tm(35,Int32Array.from([6,30,54,78,102,126,150]),new tC(30,new tE(12,121),new tE(7,122)),new tC(28,new tE(12,47),new tE(26,48)),new tC(30,new tE(39,24),new tE(14,25)),new tC(30,new tE(22,15),new tE(41,16))),new tm(36,Int32Array.from([6,24,50,76,102,128,154]),new tC(30,new tE(6,121),new tE(14,122)),new tC(28,new tE(6,47),new tE(34,48)),new tC(30,new tE(46,24),new tE(10,25)),new tC(30,new tE(2,15),new tE(64,16))),new tm(37,Int32Array.from([6,28,54,80,106,132,158]),new tC(30,new tE(17,122),new tE(4,123)),new tC(28,new tE(29,46),new tE(14,47)),new tC(30,new tE(49,24),new tE(10,25)),new tC(30,new tE(24,15),new tE(46,16))),new tm(38,Int32Array.from([6,32,58,84,110,136,162]),new tC(30,new tE(4,122),new tE(18,123)),new tC(28,new tE(13,46),new tE(32,47)),new tC(30,new tE(48,24),new tE(14,25)),new tC(30,new tE(42,15),new tE(32,16))),new tm(39,Int32Array.from([6,26,54,82,110,138,166]),new tC(30,new tE(20,117),new tE(4,118)),new tC(28,new tE(40,47),new tE(7,48)),new tC(30,new tE(43,24),new tE(22,25)),new tC(30,new tE(10,15),new tE(67,16))),new tm(40,Int32Array.from([6,30,58,86,114,142,170]),new tC(30,new tE(19,118),new tE(6,119)),new tC(28,new tE(18,47),new tE(31,48)),new tC(30,new tE(34,24),new tE(34,25)),new tC(30,new tE(20,15),new tE(61,16)))],(s=A||(A={}))[s.DATA_MASK_000=0]="DATA_MASK_000",s[s.DATA_MASK_001=1]="DATA_MASK_001",s[s.DATA_MASK_010=2]="DATA_MASK_010",s[s.DATA_MASK_011=3]="DATA_MASK_011",s[s.DATA_MASK_100=4]="DATA_MASK_100",s[s.DATA_MASK_101=5]="DATA_MASK_101",s[s.DATA_MASK_110=6]="DATA_MASK_110",s[s.DATA_MASK_111=7]="DATA_MASK_111";class t_{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let r=0;r<t;r++)for(let n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)}}t_.values=new Map([[A.DATA_MASK_000,new t_(A.DATA_MASK_000,(e,t)=>(e+t&1)==0)],[A.DATA_MASK_001,new t_(A.DATA_MASK_001,(e,t)=>(1&e)==0)],[A.DATA_MASK_010,new t_(A.DATA_MASK_010,(e,t)=>t%3==0)],[A.DATA_MASK_011,new t_(A.DATA_MASK_011,(e,t)=>(e+t)%3==0)],[A.DATA_MASK_100,new t_(A.DATA_MASK_100,(e,t)=>(Math.floor(e/2)+Math.floor(t/3)&1)==0)],[A.DATA_MASK_101,new t_(A.DATA_MASK_101,(e,t)=>e*t%6==0)],[A.DATA_MASK_110,new t_(A.DATA_MASK_110,(e,t)=>e*t%6<3)],[A.DATA_MASK_111,new t_(A.DATA_MASK_111,(e,t)=>(e+t+e*t%3&1)==0)],]);class tI{constructor(e){let t=e.getHeight();if(t<21||(3&t)!=1)throw new F;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let r=5;r>=0;r--)e=this.copyBit(8,r,e);let n=this.bitMatrix.getHeight(),i=0,s=n-7;for(let o=n-1;o>=s;o--)i=this.copyBit(8,o,i);for(let a=n-8;a<n;a++)i=this.copyBit(a,8,i);if(this.parsedFormatInfo=tA.decodeFormatInformation(e,i),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new F}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;let e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return tm.getVersionForNumber(t);let r=0,n=e-11;for(let i=5;i>=0;i--)for(let s=e-9;s>=n;s--)r=this.copyBit(s,i,r);let o=tm.decodeVersionInformation(r);if(null!==o&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;r=0;for(let a=5;a>=0;a--)for(let l=e-9;l>=n;l--)r=this.copyBit(a,l,r);if(null!==(o=tm.decodeVersionInformation(r))&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new F}copyBit(e,t,r){let n=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return n?r<<1|1:r<<1}readCodewords(){let e=this.readFormatInformation(),t=this.readVersion(),r=t_.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);let i=t.buildFunctionPattern(),s=!0,o=new Uint8Array(t.getTotalCodewords()),a=0,l=0,h=0;for(let u=n-1;u>0;u-=2){6===u&&u--;for(let d=0;d<n;d++){let c=s?n-1-d:d;for(let g=0;g<2;g++)i.get(u-g,c)||(h++,l<<=1,this.bitMatrix.get(u-g,c)&&(l|=1),8!==h||(o[a++]=l,h=0,l=0))}s=!s}if(a!==t.getTotalCodewords())throw new F;return o}remask(){if(null===this.parsedFormatInfo)return;let e=t_.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){let e=this.bitMatrix;for(let t=0,r=e.getWidth();t<r;t++)for(let n=t+1,i=e.getHeight();n<i;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))}}class tS{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,r){if(e.length!==t.getTotalCodewords())throw new T;let n=t.getECBlocksForLevel(r),i=0,s=n.getECBlocks();for(let o of s)i+=o.getCount();let a=Array(i),l=0;for(let h of s)for(let u=0;u<h.getCount();u++){let d=h.getDataCodewords(),c=n.getECCodewordsPerBlock()+d;a[l++]=new tS(d,new Uint8Array(c))}let g=a[0].codewords.length,f=a.length-1;for(;f>=0;){let w=a[f].codewords.length;if(w===g)break;f--}f++;let A=g-n.getECCodewordsPerBlock(),C=0;for(let E=0;E<A;E++)for(let m=0;m<l;m++)a[m].codewords[E]=e[C++];for(let _=f;_<l;_++)a[_].codewords[A]=e[C++];let I=a[0].codewords.length;for(let S=A;S<I;S++)for(let p=0;p<l;p++){let R=p<f?S:S+1;a[p].codewords[R]=e[C++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(o=C||(C={}))[o.TERMINATOR=0]="TERMINATOR",o[o.NUMERIC=1]="NUMERIC",o[o.ALPHANUMERIC=2]="ALPHANUMERIC",o[o.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",o[o.BYTE=4]="BYTE",o[o.ECI=5]="ECI",o[o.KANJI=6]="KANJI",o[o.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",o[o.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",o[o.HANZI=9]="HANZI";class tp{constructor(e,t,r,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=n,tp.FOR_BITS.set(n,this),tp.FOR_VALUE.set(e,this)}static forBits(e){let t=tp.FOR_BITS.get(e);if(void 0===t)throw new T;return t}getCharacterCountBits(e){let t=e.getVersionNumber(),r;return r=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){return e instanceof tp&&this.value===e.value}toString(){return this.stringValue}}tp.FOR_BITS=new Map,tp.FOR_VALUE=new Map,tp.TERMINATOR=new tp(C.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),tp.NUMERIC=new tp(C.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),tp.ALPHANUMERIC=new tp(C.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),tp.STRUCTURED_APPEND=new tp(C.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),tp.BYTE=new tp(C.BYTE,"BYTE",Int32Array.from([8,16,16]),4),tp.ECI=new tp(C.ECI,"ECI",Int32Array.from([0,0,0]),7),tp.KANJI=new tp(C.KANJI,"KANJI",Int32Array.from([8,10,12]),8),tp.FNC1_FIRST_POSITION=new tp(C.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),tp.FNC1_SECOND_POSITION=new tp(C.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),tp.HANZI=new tp(C.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tT{static decode(e,t,r,n){let i=new tu(e),s=new U,o=[],a=-1,l=-1;try{let h=null,u=!1,d;do{if(4>i.available())d=tp.TERMINATOR;else{let c=i.readBits(4);d=tp.forBits(c)}switch(d){case tp.TERMINATOR:break;case tp.FNC1_FIRST_POSITION:case tp.FNC1_SECOND_POSITION:u=!0;break;case tp.STRUCTURED_APPEND:if(16>i.available())throw new F;a=i.readBits(8),l=i.readBits(8);break;case tp.ECI:let g=tT.parseECIValue(i);if(h=v.getCharacterSetECIByValue(g),null===h)throw new F;break;case tp.HANZI:let f=i.readBits(4),w=i.readBits(d.getCharacterCountBits(t));f===tT.GB2312_SUBSET&&tT.decodeHanziSegment(i,s,w);break;default:let A=i.readBits(d.getCharacterCountBits(t));switch(d){case tp.NUMERIC:tT.decodeNumericSegment(i,s,A);break;case tp.ALPHANUMERIC:tT.decodeAlphanumericSegment(i,s,A,u);break;case tp.BYTE:tT.decodeByteSegment(i,s,A,h,o,n);break;case tp.KANJI:tT.decodeKanjiSegment(i,s,A);break;default:throw new F}}}while(d!==tp.TERMINATOR)}catch(C){throw new F}return new ei(e,s.toString(),0===o.length?null:o,null===r?null:r.toString(),a,l)}static decodeHanziSegment(e,t,r){if(13*r>e.available())throw new F;let n=new Uint8Array(2*r),i=0;for(;r>0;){let s=e.readBits(13),o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,n[i]=o>>8&255,n[i+1]=255&o,i+=2,r--}try{t.append(x.decode(n,V.GB2312))}catch(a){throw new F(a)}}static decodeKanjiSegment(e,t,r){if(13*r>e.available())throw new F;let n=new Uint8Array(2*r),i=0;for(;r>0;){let s=e.readBits(13),o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,n[i]=o>>8,n[i+1]=o,i+=2,r--}try{t.append(x.decode(n,V.SHIFT_JIS))}catch(a){throw new F(a)}}static decodeByteSegment(e,t,r,n,i,s){if(8*r>e.available())throw new F;let o=new Uint8Array(r);for(let a=0;a<r;a++)o[a]=e.readBits(8);let l;l=null===n?V.guessEncoding(o,s):n.getName();try{t.append(x.decode(o,l))}catch(h){throw new F(h)}i.push(o)}static toAlphaNumericChar(e){if(e>=tT.ALPHANUMERIC_CHARS.length)throw new F;return tT.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,r,n){let i=t.length();for(;r>1;){if(11>e.available())throw new F;let s=e.readBits(11);t.append(tT.toAlphaNumericChar(Math.floor(s/45))),t.append(tT.toAlphaNumericChar(s%45)),r-=2}if(1===r){if(6>e.available())throw new F;t.append(tT.toAlphaNumericChar(e.readBits(6)))}if(n)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,"\x1d"))}static decodeNumericSegment(e,t,r){for(;r>=3;){if(10>e.available())throw new F;let n=e.readBits(10);if(n>=1e3)throw new F;t.append(tT.toAlphaNumericChar(Math.floor(n/100))),t.append(tT.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(tT.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(7>e.available())throw new F;let i=e.readBits(7);if(i>=100)throw new F;t.append(tT.toAlphaNumericChar(Math.floor(i/10))),t.append(tT.toAlphaNumericChar(i%10))}else if(1===r){if(4>e.available())throw new F;let s=e.readBits(4);if(s>=10)throw new F;t.append(tT.toAlphaNumericChar(s))}}static parseECIValue(e){let t=e.readBits(8);if((128&t)==0)return 127&t;if((192&t)==128){let r=e.readBits(8);return(63&t)<<8&4294967295|r}if((224&t)==192){let n=e.readBits(16);return(31&t)<<16&4294967295|n}throw new F}}tT.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tT.GB2312_SUBSET=1;class tR{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;let t=e[0];e[0]=e[2],e[2]=t}}class tN{constructor(){this.rsDecoder=new ed(el.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(H.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){let r=new tI(e),n=null;try{return this.decodeBitMatrixParser(r,t)}catch(i){n=i}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();let s=this.decodeBitMatrixParser(r,t);return s.setOther(new tR(!0)),s}catch(o){if(null!==n)throw n;throw o}}decodeBitMatrixParser(e,t){let r=e.readVersion(),n=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=tS.getDataBlocks(i,r,n),o=0;for(let a of s)o+=a.getNumDataCodewords();let l=new Uint8Array(o),h=0;for(let u of s){let d=u.getCodewords(),c=u.getNumDataCodewords();this.correctErrors(d,c);for(let g=0;g<c;g++)l[h++]=d[g]}return tT.decode(l,r,n,t)}correctErrors(e,t){let r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new N}for(let i=0;i<t;i++)e[i]=r[i]}}class tD extends ew{constructor(e,t,r){super(e,t),this.estimatedModuleSize=r}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){let n=Math.abs(e-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){let n=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+r)/2;return new tD(n,i,s)}}class ty{constructor(e,t,r,n,i,s,o){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let e=this.startX,t=this.height,r=this.width,n=e+r,i=this.startY+t/2,s=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){let l=i+((1&a)==0?Math.floor((a+1)/2):-Math.floor((a+1)/2));s[0]=0,s[1]=0,s[2]=0;let h=e;for(;h<n&&!o.get(h,l);)h++;let u=0;for(;h<n;){if(o.get(h,l)){if(1===u)s[1]++;else if(2===u){if(this.foundPatternCross(s)){let d=this.handlePossibleCenter(s,l,h);if(null!==d)return d}s[0]=s[2],s[1]=1,s[2]=0,u=1}else s[++u]++}else 1===u&&u++,s[u]++;h++}if(this.foundPatternCross(s)){let c=this.handlePossibleCenter(s,l,n);if(null!==c)return c}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new G}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){let t=this.moduleSize,r=t/2;for(let n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0}crossCheckVertical(e,t,r,n){let i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&o[1]<=r;)o[1]++,a--;if(a<0||o[1]>r)return NaN;for(;a>=0&&!i.get(t,a)&&o[0]<=r;)o[0]++,a--;if(o[0]>r)return NaN;for(a=e+1;a<s&&i.get(t,a)&&o[1]<=r;)o[1]++,a++;if(a===s||o[1]>r)return NaN;for(;a<s&&!i.get(t,a)&&o[2]<=r;)o[2]++,a++;if(o[2]>r)return NaN;let l=o[0]+o[1]+o[2];return 5*Math.abs(l-n)>=2*n?NaN:this.foundPatternCross(o)?ty.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,r){let n=e[0]+e[1]+e[2],i=ty.centerFromEnd(e,r),s=this.crossCheckVertical(t,i,2*e[1],n);if(!isNaN(s)){let o=(e[0]+e[1]+e[2])/3;for(let a of this.possibleCenters)if(a.aboutEquals(o,s,i))return a.combineEstimate(s,i,o);let l=new tD(i,s,o);this.possibleCenters.push(l),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return null}}class tO extends ew{constructor(e,t,r,n){super(e,t),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){let n=Math.abs(e-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){let n=this.count+1,i=(this.count*this.getX()+t)/n,s=(this.count*this.getY()+e)/n,o=(this.count*this.estimatedModuleSize+r)/n;return new tO(i,s,o,n)}}class tM{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class tB{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){let t=null!=e&&void 0!==e.get(L.TRY_HARDER),r=null!=e&&void 0!==e.get(L.PURE_BARCODE),n=this.image,i=n.getHeight(),s=n.getWidth(),o=Math.floor(3*i/(4*tB.MAX_MODULES));(o<tB.MIN_SKIP||t)&&(o=tB.MIN_SKIP);let a=!1,l=new Int32Array(5);for(let h=o-1;h<i&&!a;h+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let u=0;for(let d=0;d<s;d++)if(n.get(d,h))(1&u)==1&&u++,l[u]++;else if((1&u)==0){if(4===u){if(tB.foundPatternCross(l)){let c=this.handlePossibleCenter(l,h,d,r);if(!0===c){if(o=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{let g=this.findRowSkip();g>l[2]&&(h+=g-l[2]-o,d=s-1)}}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,u=3;continue}u=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,u=3}else l[++u]++}else l[u]++;if(tB.foundPatternCross(l)){let f=this.handlePossibleCenter(l,h,s,r);!0===f&&(o=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}}let w=this.selectBestPatterns();return ew.orderBestPatterns(w),new tM(w)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let r=0;r<5;r++){let n=e[r];if(0===n)return!1;t+=n}if(t<7)return!1;let i=t/7,s=i/2;return Math.abs(i-e[0])<s&&Math.abs(i-e[1])<s&&Math.abs(3*i-e[2])<3*s&&Math.abs(i-e[3])<s&&Math.abs(i-e[4])<s}getCrossCheckStateCount(){let e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,r,n){let i=this.getCrossCheckStateCount(),s=0,o=this.image;for(;e>=s&&t>=s&&o.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&i[1]<=r;)i[1]++,s++;if(e<s||t<s||i[1]>r)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&i[0]<=r;)i[0]++,s++;if(i[0]>r)return!1;let a=o.getHeight(),l=o.getWidth();for(s=1;e+s<a&&t+s<l&&o.get(t+s,e+s);)i[2]++,s++;if(e+s>=a||t+s>=l)return!1;for(;e+s<a&&t+s<l&&!o.get(t+s,e+s)&&i[3]<r;)i[3]++,s++;if(e+s>=a||t+s>=l||i[3]>=r)return!1;for(;e+s<a&&t+s<l&&o.get(t+s,e+s)&&i[4]<r;)i[4]++,s++;if(i[4]>=r)return!1;let h=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(h-n)<2*n&&tB.foundPatternCross(i)}crossCheckVertical(e,t,r,n){let i=this.image,s=i.getHeight(),o=this.getCrossCheckStateCount(),a=e;for(;a>=0&&i.get(t,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&o[1]<=r;)o[1]++,a--;if(a<0||o[1]>r)return NaN;for(;a>=0&&i.get(t,a)&&o[0]<=r;)o[0]++,a--;if(o[0]>r)return NaN;for(a=e+1;a<s&&i.get(t,a);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(t,a)&&o[3]<r;)o[3]++,a++;if(a===s||o[3]>=r)return NaN;for(;a<s&&i.get(t,a)&&o[4]<r;)o[4]++,a++;if(o[4]>=r)return NaN;let l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-n)>=2*n?NaN:tB.foundPatternCross(o)?tB.centerFromEnd(o,a):NaN}crossCheckHorizontal(e,t,r,n){let i=this.image,s=i.getWidth(),o=this.getCrossCheckStateCount(),a=e;for(;a>=0&&i.get(a,t);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&o[1]<=r;)o[1]++,a--;if(a<0||o[1]>r)return NaN;for(;a>=0&&i.get(a,t)&&o[0]<=r;)o[0]++,a--;if(o[0]>r)return NaN;for(a=e+1;a<s&&i.get(a,t);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(a,t)&&o[3]<r;)o[3]++,a++;if(a===s||o[3]>=r)return NaN;for(;a<s&&i.get(a,t)&&o[4]<r;)o[4]++,a++;if(o[4]>=r)return NaN;let l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-n)>=n?NaN:tB.foundPatternCross(o)?tB.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,r,n){let i=e[0]+e[1]+e[2]+e[3]+e[4],s=tB.centerFromEnd(e,r),o=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(o)&&!isNaN(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],i))&&(!n||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],i))){let a=i/7,l=!1,h=this.possibleCenters;for(let u=0,d=h.length;u<d;u++){let c=h[u];if(c.aboutEquals(a,o,s)){h[u]=c.combineEstimate(o,s,a),l=!0;break}}if(!l){let g=new tO(s,o,a);h.push(g),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(g)}return!0}return!1}findRowSkip(){let e=this.possibleCenters.length;if(e<=1)return 0;let t=null;for(let r of this.possibleCenters)if(r.getCount()>=tB.CENTER_QUORUM){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-r.getX())-Math.abs(t.getY()-r.getY()))/2);t=r}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0,r=this.possibleCenters.length;for(let n of this.possibleCenters)n.getCount()>=tB.CENTER_QUORUM&&(e++,t+=n.getEstimatedModuleSize());if(e<3)return!1;let i=t/r,s=0;for(let o of this.possibleCenters)s+=Math.abs(o.getEstimatedModuleSize()-i);return s<=.05*t}selectBestPatterns(){let e=this.possibleCenters.length;if(e<3)throw new G;let t=this.possibleCenters,r;if(e>3){let n=0,i=0;for(let s of this.possibleCenters){let o=s.getEstimatedModuleSize();n+=o,i+=o*o}r=n/e;let a=Math.sqrt(i/e-r*r);t.sort((e,t)=>{let n=Math.abs(t.getEstimatedModuleSize()-r),i=Math.abs(e.getEstimatedModuleSize()-r);return n<i?-1:n>i?1:0});let l=Math.max(.2*r,a);for(let h=0;h<t.length&&t.length>3;h++){let u=t[h];Math.abs(u.getEstimatedModuleSize()-r)>l&&(t.splice(h,1),h--)}}if(t.length>3){let d=0;for(let c of t)d+=c.getEstimatedModuleSize();r=d/t.length,t.sort((e,t)=>{if(t.getCount()!==e.getCount())return t.getCount()-e.getCount();{let n=Math.abs(t.getEstimatedModuleSize()-r),i=Math.abs(e.getEstimatedModuleSize()-r);return n<i?1:n>i?-1:0}}),t.splice(3)}return[t[0],t[1],t[2]]}}tB.CENTER_QUORUM=2,tB.MIN_SKIP=3,tB.MAX_MODULES=57;class tb{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null==e?null:e.get(L.NEED_RESULT_POINT_CALLBACK);let t=new tB(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){let t=e.getTopLeft(),r=e.getTopRight(),n=e.getBottomLeft(),i=this.calculateModuleSize(t,r,n);if(i<1)throw new G("No pattern found in proccess finder.");let s=tb.computeDimension(t,r,n,i),o=tm.getProvisionalVersionForDimension(s),a=o.getDimensionForVersion()-7,l=null;if(o.getAlignmentPatternCenters().length>0){let h=r.getX()-t.getX()+n.getX(),u=r.getY()-t.getY()+n.getY(),d=1-3/a,c=Math.floor(t.getX()+d*(h-t.getX())),g=Math.floor(t.getY()+d*(u-t.getY()));for(let f=4;f<=16;f<<=1)try{l=this.findAlignmentInRegion(i,c,g,f);break}catch(w){if(!(w instanceof G))throw w}}let A=tb.createTransform(t,r,n,l,s),C=tb.sampleGrid(this.image,A,s),E;return E=null===l?[n,t,r]:[n,t,r,l],new eA(C,E)}static createTransform(e,t,r,n,i){let s=i-3.5,o,a,l,h;return null!==n?(o=n.getX(),a=n.getY(),h=l=s-3):(o=t.getX()-e.getX()+r.getX(),a=t.getY()-e.getY()+r.getY(),l=s,h=s),e_.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,h,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,a,r.getX(),r.getY())}static sampleGrid(e,t,r){let n=eS.getInstance();return n.sampleGridWithTransform(e,r,r,t)}static computeDimension(e,t,r,n){let i=eg.round(ew.distance(e,t)/n),s=eg.round(ew.distance(e,r)/n),o=Math.floor((i+s)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new G("Dimensions could be not found.")}return o}calculateModuleSize(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,t){let r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,r,n){let i=this.sizeOfBlackWhiteBlackRun(e,t,r,n),s=1,o=e-(r-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let a=Math.floor(t-(n-t)*s);return s=1,a<0?(s=t/(t-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),(i+=this.sizeOfBlackWhiteBlackRun(e,t,o,a))-1}sizeOfBlackWhiteBlackRun(e,t,r,n){let i=Math.abs(n-t)>Math.abs(r-e);if(i){let s=e;e=t,t=s,s=r,r=n,n=s}let o=Math.abs(r-e),a=Math.abs(n-t),l=-o/2,h=e<r?1:-1,u=t<n?1:-1,d=0,c=r+h;for(let g=e,f=t;g!==c;g+=h){let w=i?f:g,A=i?g:f;if(1===d===this.image.get(w,A)){if(2===d)return eg.distance(g,f,e,t);d++}if((l+=a)>0){if(f===n)break;f+=u,l-=o}}return 2===d?eg.distance(r+h,n,e,t):NaN}findAlignmentInRegion(e,t,r,n){let i=Math.floor(n*e),s=Math.max(0,t-i),o=Math.min(this.image.getWidth()-1,t+i);if(o-s<3*e)throw new G("Alignment top exceeds estimated module size.");let a=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-a<3*e)throw new G("Alignment bottom exceeds estimated module size.");let h=new ty(this.image,s,a,o-s,l-a,e,this.resultPointCallback);return h.find()}}class tP{constructor(){this.decoder=new tN}getDecoder(){return this.decoder}decode(e,t){let r,n;if(null!=t&&void 0!==t.get(L.PURE_BARCODE)){let i=tP.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,t),n=tP.NO_POINTS}else{let s=new tb(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),n=s.getPoints()}r.getOther() instanceof tR&&r.getOther().applyMirroredCorrection(n);let o=new j(r.getText(),r.getRawBytes(),void 0,n,er.QR_CODE,void 0),a=r.getByteSegments();null!==a&&o.putMetadata(en.BYTE_SEGMENTS,a);let l=r.getECLevel();return null!==l&&o.putMetadata(en.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(o.putMetadata(en.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(en.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new G;let n=this.moduleSize(t,e),i=t[1],s=r[1],o=t[0],a=r[0];if(o>=a||i>=s||s-i!=a-o&&(a=o+(s-i))>=e.getWidth())throw new G;let l=Math.round((a-o+1)/n),h=Math.round((s-i+1)/n);if(l<=0||h<=0||h!==l)throw new G;let u=Math.floor(n/2);i+=u,o+=u;let d=o+Math.floor((l-1)*n)-a;if(d>0){if(d>u)throw new G;o-=d}let c=i+Math.floor((h-1)*n)-s;if(c>0){if(c>u)throw new G;i-=c}let g=new H(l,h);for(let f=0;f<h;f++){let w=i+Math.floor(f*n);for(let A=0;A<l;A++)e.get(o+Math.floor(A*n),w)&&g.set(A,f)}return g}static moduleSize(e,t){let r=t.getHeight(),n=t.getWidth(),i=e[0],s=e[1],o=!0,a=0;for(;i<n&&s<r;){if(o!==t.get(i,s)){if(5==++a)break;o=!o}i++,s++}if(i===n||s===r)throw new G;return(i-e[0])/7}}tP.NO_POINTS=[];class tL{PDF417Common(){}static getBitCountSum(e){return eg.sum(e)}static toIntArray(e){if(null==e||!e.length)return tL.EMPTY_INT_ARRAY;let t=new Int32Array(e.length),r=0;for(let n of e)t[r++]=n;return t}static getCodeword(e){let t=B.binarySearch(tL.SYMBOL_TABLE,262143&e);return t<0?-1:(tL.CODEWORD_TABLE[t]-1)%tL.NUMBER_OF_CODEWORDS}}tL.NUMBER_OF_CODEWORDS=929,tL.MAX_CODEWORDS_IN_BARCODE=tL.NUMBER_OF_CODEWORDS-1,tL.MIN_ROWS_IN_BARCODE=3,tL.MAX_ROWS_IN_BARCODE=90,tL.MODULES_IN_CODEWORD=17,tL.MODULES_IN_STOP_PATTERN=18,tL.BARS_IN_MODULE=8,tL.EMPTY_INT_ARRAY=new Int32Array([]),tL.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tL.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class tF{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class tv{static detectMultiple(e,t,r){let n=e.getBlackMatrix(),i=tv.detect(r,n);return i.length||((n=n.clone()).rotate180(),i=tv.detect(r,n)),new tF(n,i)}static detect(e,t){let r=[],n=0,i=0,s=!1;for(;n<t.getHeight();){let o=tv.findVertices(t,n,i);if(null==o[0]&&null==o[3]){if(!s)break;for(let a of(s=!1,i=0,r))null!=a[1]&&(n=Math.trunc(Math.max(n,a[1].getY()))),null!=a[3]&&(n=Math.max(n,Math.trunc(a[3].getY())));n+=tv.ROW_STEP;continue}if(s=!0,r.push(o),!e)break;null!=o[2]?(i=Math.trunc(o[2].getX()),n=Math.trunc(o[2].getY())):(i=Math.trunc(o[4].getX()),n=Math.trunc(o[4].getY()))}return r}static findVertices(e,t,r){let n=e.getHeight(),i=e.getWidth(),s=Array(8);return tv.copyToResult(s,tv.findRowsWithPattern(e,n,i,t,r,tv.START_PATTERN),tv.INDEXES_START_PATTERN),null!=s[4]&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),tv.copyToResult(s,tv.findRowsWithPattern(e,n,i,t,r,tv.STOP_PATTERN),tv.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,r){for(let n=0;n<r.length;n++)e[r[n]]=t[n]}static findRowsWithPattern(e,t,r,n,i,s){let o=[,,,,],a=!1,l=new Int32Array(s.length);for(;n<t;n+=tv.ROW_STEP){let h=tv.findGuardPattern(e,i,n,r,!1,s,l);if(null!=h){for(;n>0;){let u=tv.findGuardPattern(e,i,--n,r,!1,s,l);if(null!=u)h=u;else{n++;break}}o[0]=new ew(h[0],n),o[1]=new ew(h[1],n),a=!0;break}}let d=n+1;if(a){let c=0,g=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;d<t;d++){let f=tv.findGuardPattern(e,g[0],d,r,!1,s,l);if(null!=f&&Math.abs(g[0]-f[0])<tv.MAX_PATTERN_DRIFT&&Math.abs(g[1]-f[1])<tv.MAX_PATTERN_DRIFT)g=f,c=0;else{if(c>tv.SKIPPED_ROW_COUNT_MAX)break;c++}}d-=c+1,o[2]=new ew(g[0],d),o[3]=new ew(g[1],d)}return d-n<tv.BARCODE_MIN_HEIGHT&&B.fill(o,null),o}static findGuardPattern(e,t,r,n,i,s,o){B.fillWithin(o,0,o.length,0);let a=t,l=0;for(;e.get(a,r)&&a>0&&l++<tv.MAX_PIXEL_DRIFT;)a--;let h=a,u=0,d=s.length;for(let c=i;h<n;h++)if(e.get(h,r)!==c)o[u]++;else{if(u===d-1){if(tv.patternMatchVariance(o,s,tv.MAX_INDIVIDUAL_VARIANCE)<tv.MAX_AVG_VARIANCE)return new Int32Array([a,h]);a+=o[0]+o[1],y.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}return u===d-1&&tv.patternMatchVariance(o,s,tv.MAX_INDIVIDUAL_VARIANCE)<tv.MAX_AVG_VARIANCE?new Int32Array([a,h-1]):null}static patternMatchVariance(e,t,r){let n=e.length,i=0,s=0;for(let o=0;o<n;o++)i+=e[o],s+=t[o];if(i<s)return 1/0;let a=i/s;r*=a;let l=0;for(let h=0;h<n;h++){let u=e[h],d=t[h]*a,c=u>d?u-d:d-u;if(c>r)return 1/0;l+=c}return l/i}}tv.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tv.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tv.MAX_AVG_VARIANCE=.42,tv.MAX_INDIVIDUAL_VARIANCE=.8,tv.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tv.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tv.MAX_PIXEL_DRIFT=3,tv.MAX_PATTERN_DRIFT=5,tv.SKIPPED_ROW_COUNT_MAX=25,tv.ROW_STEP=5,tv.BARCODE_MIN_HEIGHT=10;class tk{constructor(e,t){if(0===t.length)throw new T;this.field=e;let r=t.length;if(r>1&&0===t[0]){let n=1;for(;n<r&&0===t[n];)n++;n===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-n),y.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let t=0;for(let r of this.coefficients)t=this.field.add(t,r);return t}let n=this.coefficients[0],i=this.coefficients.length;for(let s=1;s<i;s++)n=this.field.add(this.field.multiply(e,n),this.coefficients[s]);return n}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let n=t;t=r,r=n}let i=new Int32Array(r.length),s=r.length-t.length;y.arraycopy(r,0,i,0,s);for(let o=s;o<r.length;o++)i[o]=this.field.add(t[o-s],r[o]);return new tk(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof tk?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new tk(this.field,new Int32Array([0]));let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,s=new Int32Array(r+i-1);for(let o=0;o<r;o++){let a=t[o];for(let l=0;l<i;l++)s[o+l]=this.field.add(s[o+l],this.field.multiply(a,n[l]))}return new tk(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new tk(this.field,t)}multiplyScalar(e){if(0===e)return new tk(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new tk(this.field,r)}multiplyByMonomial(e,t){if(e<0)throw new T;if(0===t)return new tk(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+e);for(let i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new tk(this.field,n)}toString(){let e=new U;for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(0===t||1!==r)&&e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class tx{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new T;return this.logTable[e]}inverse(e){if(0===e)throw new ea;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class tV extends tx{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let n=0;n<e;n++)this.expTable[n]=r,r=r*t%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new tk(this,new Int32Array([0])),this.one=new tk(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new T;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new tk(this,r)}}tV.PDF417_GF=new tV(tL.NUMBER_OF_CODEWORDS,3);class tU{constructor(){this.field=tV.PDF417_GF}decode(e,t,r){let n=new tk(this.field,e),i=new Int32Array(t),s=!1;for(let o=t;o>0;o--){let a=n.evaluateAt(this.field.exp(o));i[t-o]=a,0!==a&&(s=!0)}if(!s)return 0;let l=this.field.getOne();if(null!=r)for(let h of r){let u=this.field.exp(e.length-1-h),d=new tk(this.field,new Int32Array([this.field.subtract(0,u),1]));l=l.multiply(d)}let c=new tk(this.field,i),g=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),c,t),f=g[0],w=g[1],A=this.findErrorLocations(f),C=this.findErrorMagnitudes(w,f,A);for(let E=0;E<A.length;E++){let m=e.length-1-this.field.log(A[E]);if(m<0)throw N.getChecksumInstance();e[m]=this.field.subtract(e[m],C[E])}return A.length}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let i=e,s=t,o=this.field.getZero(),a=this.field.getOne();for(;s.getDegree()>=Math.round(r/2);){let l=i,h=o;if(i=s,o=a,i.isZero())throw N.getChecksumInstance();s=l;let u=this.field.getZero(),d=i.getCoefficient(i.getDegree()),c=this.field.inverse(d);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){let g=s.getDegree()-i.getDegree(),f=this.field.multiply(s.getCoefficient(s.getDegree()),c);u=u.add(this.field.buildMonomial(g,f)),s=s.subtract(i.multiplyByMonomial(g,f))}a=u.multiply(o).subtract(h).negative()}let w=a.getCoefficient(0);if(0===w)throw N.getChecksumInstance();let A=this.field.inverse(w),C=a.multiply(A),E=s.multiply(A);return[C,E]}findErrorLocations(e){let t=e.getDegree(),r=new Int32Array(t),n=0;for(let i=1;i<this.field.getSize()&&n<t;i++)0===e.evaluateAt(i)&&(r[n]=this.field.inverse(i),n++);if(n!==t)throw N.getChecksumInstance();return r}findErrorMagnitudes(e,t,r){let n=t.getDegree(),i=new Int32Array(n);for(let s=1;s<=n;s++)i[n-s]=this.field.multiply(s,t.getCoefficient(s));let o=new tk(this.field,i),a=r.length,l=new Int32Array(a);for(let h=0;h<a;h++){let u=this.field.inverse(r[h]),d=this.field.subtract(0,e.evaluateAt(u)),c=this.field.inverse(o.evaluateAt(u));l[h]=this.field.multiply(d,c)}return l}}class tH{constructor(e,t,r,n,i){e instanceof tH?this.constructor_2(e):this.constructor_1(e,t,r,n,i)}constructor_1(e,t,r,n,i){let s=null==t||null==r,o=null==n||null==i;if(s&&o)throw new G;s?(t=new ew(0,n.getY()),r=new ew(0,i.getY())):o&&(n=new ew(e.getWidth()-1,t.getY()),i=new ew(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new tH(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,r){let n=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){let a=r?this.topLeft:this.topRight,l=Math.trunc(a.getY()-e);l<0&&(l=0);let h=new ew(a.getX(),l);r?n=h:s=h}if(t>0){let u=r?this.bottomLeft:this.bottomRight,d=Math.trunc(u.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);let c=new ew(u.getX(),d);r?i=c:o=c}return new tH(this.image,n,i,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class tG{constructor(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class tX{constructor(){this.buffer=""}static form(e,t){let r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,i,s,o,a){if("%%"===e)return"%";if(void 0===t[++r])return;e=s?parseInt(s.substr(1)):void 0;let l=o?parseInt(o.substr(1)):void 0,h;switch(a){case"s":h=t[r];break;case"c":h=t[r][0];break;case"f":h=parseFloat(t[r]).toFixed(e);break;case"p":h=parseFloat(t[r]).toPrecision(e);break;case"e":h=parseFloat(t[r]).toExponential(e);break;case"x":h=parseInt(t[r]).toString(l||16);break;case"d":h=parseFloat(parseInt(t[r],l||10).toPrecision(e)).toFixed(0)}h="object"==typeof h?JSON.stringify(h):(+h).toString(l);let u=parseInt(i),d=i&&i[0]+""=="0"?"0":" ";for(;h.length<u;)h=void 0!==n?h+d:d+h;return h})}format(e,...t){this.buffer+=tX.form(e,t)}toString(){return this.buffer}}class tW{constructor(e){this.boundingBox=new tH(e),this.codewords=Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let r=1;r<tW.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(e)-r;if(n>=0&&null!=(t=this.codewords[n])||(n=this.imageRowToCodewordIndex(e)+r)<this.codewords.length&&null!=(t=this.codewords[n]))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let e=new tX,t=0;for(let r of this.codewords){if(null==r){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,r.getRowNumber(),r.getValue())}return e.toString()}}tW.MAX_NEARBY_DISTANCE=5;class tz{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=[];for(let[r,n]of this.values.entries()){let i={getKey:()=>r,getValue:()=>n};i.getValue()>e?(e=i.getValue(),(t=[]).push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return tL.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class tY extends tW{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,h=0;for(let u=s;u<o;u++){if(null==t[u])continue;let d=t[u],c=d.getRowNumber()-a;if(0===c)h++;else if(1===c)l=Math.max(l,h),h=1,a=d.getRowNumber();else if(c<0||d.getRowNumber()>=e.getRowCount()||c>u)t[u]=null;else{let g,f=(g=l>2?(l-2)*c:c)>=u;for(let w=1;w<=g&&!f;w++)f=null!=t[u-w];f?t[u]=null:(a=d.getRowNumber(),h=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(null!=r){let n=r.getRowNumber();if(n>=t.length)continue;t[n]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.getCodewords(),a=-1;for(let l=i;l<s;l++){if(null==o[l])continue;let h=o[l];h.setRowNumberAsRowIndicatorColumn();let u=h.getRowNumber()-a;0===u||(1===u?a=h.getRowNumber():h.getRowNumber()>=e.getRowCount()?o[l]=null:a=h.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new tz,r=new tz,n=new tz,i=new tz;for(let s of e){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let o=s.getValue()%30,a=s.getRowNumber();switch(this._isLeft||(a+=2),a%3){case 0:r.setValue(3*o+1);break;case 1:i.setValue(o/3),n.setValue(o%3);break;case 2:t.setValue(o+1)}}if(0===t.getValue().length||0===r.getValue().length||0===n.getValue().length||0===i.getValue().length||t.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<tL.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>tL.MAX_ROWS_IN_BARCODE)return null;let l=new tG(t.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,l),l}removeIncorrectCodewords(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(null==e[r])continue;let i=n.getValue()%30,s=n.getRowNumber();if(s>t.getRowCount()){e[r]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[r]=null);break;case 2:i+1!==t.getColumnCount()&&(e[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class tZ{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=tL.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let r=this.detectionResultColumns[t].getCodewords();for(let n=0;n<r.length;n++)null!=r[n]&&(r[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(let n=1;n<=this.barcodeColumnCount;n++){let i=this.detectionResultColumns[n].getCodewords()[r];null!=i&&(i.setRowNumber(e[r].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let o=this.detectionResultColumns[s].getCodewords()[r];null!=o&&(i=tZ.adjustRowNumberIfValid(n,i,o),!o.hasValidRowNumber()&&e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let o=this.detectionResultColumns[s].getCodewords()[r];null!=o&&(i=tZ.adjustRowNumberIfValid(n,i,o),!o.hasValidRowNumber()&&e++)}}return e}static adjustRowNumberIfValid(e,t,r){return null==r||!r.hasValidRowNumber()&&(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,r){let n=r[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let o=Array(14);for(let a of(o[2]=i[t],o[3]=s[t],t>0&&(o[0]=r[t-1],o[4]=i[t-1],o[5]=s[t-1]),t>1&&(o[8]=r[t-2],o[10]=i[t-2],o[11]=s[t-2]),t<r.length-1&&(o[1]=r[t+1],o[6]=i[t+1],o[7]=s[t+1]),t<r.length-2&&(o[9]=r[t+2],o[12]=i[t+2],o[13]=s[t+2]),o))if(tZ.adjustRowNumber(n,a))return}static adjustRowNumber(e,t){return null!=t&&!!t.hasValidRowNumber()&&t.getBucket()===e.getBucket()&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new tX;for(let r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(let n=0;n<this.barcodeColumnCount+2;n++){if(null==this.detectionResultColumns[n]){t.format("    |   ");continue}let i=this.detectionResultColumns[n].getCodewords()[r];if(null==i){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class tK{constructor(e,t,r,n){this.rowNumber=tK.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==tK.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}tK.BARCODE_ROW_UNKNOWN=-1;class tq{static initialize(){for(let e=0;e<tL.SYMBOL_TABLE.length;e++){let t=tL.SYMBOL_TABLE[e],r=1&t;for(let n=0;n<tL.BARS_IN_MODULE;n++){let i=0;for(;(1&t)===r;)i+=1,t>>=1;r=1&t,tq.RATIOS_TABLE[e]||(tq.RATIOS_TABLE[e]=Array(tL.BARS_IN_MODULE)),tq.RATIOS_TABLE[e][tL.BARS_IN_MODULE-n-1]=Math.fround(i/tL.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tq.getDecodedCodewordValue(tq.sampleBitCounts(e));return -1!==t?t:tq.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=eg.sum(e),r=new Int32Array(tL.BARS_IN_MODULE),n=0,i=0;for(let s=0;s<tL.MODULES_IN_CODEWORD;s++){let o=t/(2*tL.MODULES_IN_CODEWORD)+s*t/tL.MODULES_IN_CODEWORD;i+e[n]<=o&&(i+=e[n],n++),r[n]++}return r}static getDecodedCodewordValue(e){let t=tq.getBitValue(e);return -1===tL.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let r=0;r<e.length;r++)for(let n=0;n<e[r];n++)t=t<<1|(r%2==0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=eg.sum(e),r=Array(tL.BARS_IN_MODULE);if(t>1)for(let n=0;n<r.length;n++)r[n]=Math.fround(e[n]/t);let i=ef.MAX_VALUE,s=-1;this.bSymbolTableReady||tq.initialize();for(let o=0;o<tq.RATIOS_TABLE.length;o++){let a=0,l=tq.RATIOS_TABLE[o];for(let h=0;h<tL.BARS_IN_MODULE;h++){let u=Math.fround(l[h]-r[h]);if((a+=Math.fround(u*u))>=i)break}a<i&&(i=a,s=tL.SYMBOL_TABLE[o])}return s}}tq.bSymbolTableReady=!1,tq.RATIOS_TABLE=Array(tL.SYMBOL_TABLE.length).map(e=>Array(tL.BARS_IN_MODULE));class tQ{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class tj{static parseLong(e,t){return parseInt(e,t)}}class tJ extends S{}tJ.kind="NullPointerException";class t${writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,r){if(null==e)throw new tJ;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new O;if(0!==r)for(let n=0;n<r;n++)this.write(e[t+n])}flush(){}close(){}}class t1 extends S{}class t2 extends t${constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new t1;t=b.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new O;this.ensureCapacity(this.count+r),y.arraycopy(e,t,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function t0(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==r.g)return r.g.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}(a=E||(E={}))[a.ALPHA=0]="ALPHA",a[a.LOWER=1]="LOWER",a[a.MIXED=2]="MIXED",a[a.PUNCT=3]="PUNCT",a[a.ALPHA_SHIFT=4]="ALPHA_SHIFT",a[a.PUNCT_SHIFT=5]="PUNCT_SHIFT";let t8;function t3(e){if(void 0===t8&&(t8=t0()),null===t8)throw Error("BigInt is not supported!");return t8(e)}class t6{static decode(e,t){let r=new U(""),n=v.ISO8859_1;r.enableDecoding(n);let i=1,s=e[i++],o=new tQ;for(;i<e[0];){switch(s){case t6.TEXT_COMPACTION_MODE_LATCH:i=t6.textCompaction(e,i,r);break;case t6.BYTE_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH_6:i=t6.byteCompaction(s,e,n,i,r);break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[i++]);break;case t6.NUMERIC_COMPACTION_MODE_LATCH:i=t6.numericCompaction(e,i,r);break;case t6.ECI_CHARSET:v.getCharacterSetECIByValue(e[i++]);break;case t6.ECI_GENERAL_PURPOSE:i+=2;break;case t6.ECI_USER_DEFINED:i++;break;case t6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t6.decodeMacroBlock(e,i,o);break;case t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t6.MACRO_PDF417_TERMINATOR:throw new F;default:i--,i=t6.textCompaction(e,i,r)}if(i<e.length)s=e[i++];else throw F.getFormatInstance()}if(0===r.length())throw F.getFormatInstance();let a=new ei(null,r.toString(),null,t);return a.setOther(o),a}static decodeMacroBlock(e,t,r){if(t+t6.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw F.getFormatInstance();let n=new Int32Array(t6.NUMBER_OF_SEQUENCE_CODEWORDS);for(let i=0;i<t6.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)n[i]=e[t];r.setSegmentIndex(b.parseInt(t6.decodeBase900toBase10(n,t6.NUMBER_OF_SEQUENCE_CODEWORDS)));let s=new U;t=t6.textCompaction(e,t,s),r.setFileId(s.toString());let o=-1;for(e[t]===t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case t6.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let a=new U;t=t6.textCompaction(e,t+1,a),r.setFileName(a.toString());break;case t6.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let l=new U;t=t6.textCompaction(e,t+1,l),r.setSender(l.toString());break;case t6.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let h=new U;t=t6.textCompaction(e,t+1,h),r.setAddressee(h.toString());break;case t6.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let u=new U;t=t6.numericCompaction(e,t+1,u),r.setSegmentCount(b.parseInt(u.toString()));break;case t6.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let d=new U;t=t6.numericCompaction(e,t+1,d),r.setTimestamp(tj.parseLong(d.toString()));break;case t6.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let c=new U;t=t6.numericCompaction(e,t+1,c),r.setChecksum(b.parseInt(c.toString()));break;case t6.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let g=new U;t=t6.numericCompaction(e,t+1,g),r.setFileSize(tj.parseLong(g.toString()));break;default:throw F.getFormatInstance()}break;case t6.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(-1!==o){let f=t-o;r.isLastSegment()&&f--,r.setOptionalData(B.copyOfRange(e,o,o+f))}return t}static textCompaction(e,t,r){let n=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,o=!1;for(;t<e[0]&&!o;){let a=e[t++];if(a<t6.TEXT_COMPACTION_MODE_LATCH)n[s]=a/30,n[s+1]=a%30,s+=2;else switch(a){case t6.TEXT_COMPACTION_MODE_LATCH:n[s++]=t6.TEXT_COMPACTION_MODE_LATCH;break;case t6.BYTE_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH_6:case t6.NUMERIC_COMPACTION_MODE_LATCH:case t6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t6.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[s]=t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,a=e[t++],i[s]=a,s++}}return t6.decodeTextCompaction(n,i,s,r),t}static decodeTextCompaction(e,t,r,n){let i=E.ALPHA,s=E.ALPHA,o=0;for(;o<r;){let a=e[o],l="";switch(i){case E.ALPHA:if(a<26)l=String.fromCharCode(65+a);else switch(a){case 26:l=" ";break;case t6.LL:i=E.LOWER;break;case t6.ML:i=E.MIXED;break;case t6.PS:s=i,i=E.PUNCT_SHIFT;break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[o]);break;case t6.TEXT_COMPACTION_MODE_LATCH:i=E.ALPHA}break;case E.LOWER:if(a<26)l=String.fromCharCode(97+a);else switch(a){case 26:l=" ";break;case t6.AS:s=i,i=E.ALPHA_SHIFT;break;case t6.ML:i=E.MIXED;break;case t6.PS:s=i,i=E.PUNCT_SHIFT;break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[o]);break;case t6.TEXT_COMPACTION_MODE_LATCH:i=E.ALPHA}break;case E.MIXED:if(a<t6.PL)l=t6.MIXED_CHARS[a];else switch(a){case t6.PL:i=E.PUNCT;break;case 26:l=" ";break;case t6.LL:i=E.LOWER;break;case t6.AL:i=E.ALPHA;break;case t6.PS:s=i,i=E.PUNCT_SHIFT;break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[o]);break;case t6.TEXT_COMPACTION_MODE_LATCH:i=E.ALPHA}break;case E.PUNCT:if(a<t6.PAL)l=t6.PUNCT_CHARS[a];else switch(a){case t6.PAL:i=E.ALPHA;break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[o]);break;case t6.TEXT_COMPACTION_MODE_LATCH:i=E.ALPHA}break;case E.ALPHA_SHIFT:if(i=s,a<26)l=String.fromCharCode(65+a);else switch(a){case 26:l=" ";break;case t6.TEXT_COMPACTION_MODE_LATCH:i=E.ALPHA}break;case E.PUNCT_SHIFT:if(i=s,a<t6.PAL)l=t6.PUNCT_CHARS[a];else switch(a){case t6.PAL:i=E.ALPHA;break;case t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[o]);break;case t6.TEXT_COMPACTION_MODE_LATCH:i=E.ALPHA}}""!==l&&n.append(l),o++}}static byteCompaction(e,t,r,n,i){let s=new t2,o=0,a=0,l=!1;switch(e){case t6.BYTE_COMPACTION_MODE_LATCH:let h=new Int32Array(6),u=t[n++];for(;n<t[0]&&!l;)switch(h[o++]=u,a=900*a+u,u=t[n++]){case t6.TEXT_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH:case t6.NUMERIC_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH_6:case t6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t6.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(o%5==0&&o>0){for(let d=0;d<6;++d)s.write(Number(t3(a)>>t3(8*(5-d))));a=0,o=0}}n===t[0]&&u<t6.TEXT_COMPACTION_MODE_LATCH&&(h[o++]=u);for(let c=0;c<o;c++)s.write(h[c]);break;case t6.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!l;){let g=t[n++];if(g<t6.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+g;else switch(g){case t6.TEXT_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH:case t6.NUMERIC_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH_6:case t6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t6.MACRO_PDF417_TERMINATOR:n--,l=!0}if(o%5==0&&o>0){for(let f=0;f<6;++f)s.write(Number(t3(a)>>t3(8*(5-f))));a=0,o=0}}}return i.append(x.decode(s.toByteArray(),r)),n}static numericCompaction(e,t,r){let n=0,i=!1,s=new Int32Array(t6.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let o=e[t++];if(t===e[0]&&(i=!0),o<t6.TEXT_COMPACTION_MODE_LATCH)s[n]=o,n++;else switch(o){case t6.TEXT_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH:case t6.BYTE_COMPACTION_MODE_LATCH_6:case t6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t6.MACRO_PDF417_TERMINATOR:t--,i=!0}(n%t6.MAX_NUMERIC_CODEWORDS==0||o===t6.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(t6.decodeBase900toBase10(s,n)),n=0)}return t}static decodeBase900toBase10(e,t){let r=t3(0);for(let n=0;n<t;n++)r+=t6.EXP900[t-n-1]*t3(e[n]);let i=r.toString();if("1"!==i.charAt(0))throw new F;return i.substring(1)}}t6.TEXT_COMPACTION_MODE_LATCH=900,t6.BYTE_COMPACTION_MODE_LATCH=901,t6.NUMERIC_COMPACTION_MODE_LATCH=902,t6.BYTE_COMPACTION_MODE_LATCH_6=924,t6.ECI_USER_DEFINED=925,t6.ECI_GENERAL_PURPOSE=926,t6.ECI_CHARSET=927,t6.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t6.MACRO_PDF417_TERMINATOR=922,t6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t6.MAX_NUMERIC_CODEWORDS=15,t6.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t6.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t6.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t6.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t6.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t6.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t6.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t6.PL=25,t6.LL=27,t6.AS=27,t6.ML=28,t6.AL=28,t6.PS=29,t6.PAL=29,t6.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",t6.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t6.EXP900=t0()?function(){let e=[];e[0]=t3(1);let t=t3(900);e[1]=t;for(let r=2;r<16;r++)e[r]=e[r-1]*t;return e}():[],t6.NUMBER_OF_SEQUENCE_CODEWORDS=2;class t4{constructor(){}static decode(e,t,r,n,i,s,o){let a=new tH(e,t,r,n,i),l=null,h=null,u;for(let d=!0;;d=!1){if(null!=t&&(l=t4.getRowIndicatorColumn(e,a,t,!0,s,o)),null!=n&&(h=t4.getRowIndicatorColumn(e,a,n,!1,s,o)),null==(u=t4.merge(l,h)))throw G.getNotFoundInstance();let c=u.getBoundingBox();if(d&&null!=c&&(c.getMinY()<a.getMinY()||c.getMaxY()>a.getMaxY()))a=c;else break}u.setBoundingBox(a);let g=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,l),u.setDetectionResultColumn(g,h);let f=null!=l;for(let w=1;w<=g;w++){let A=f?w:g-w;if(void 0!==u.getDetectionResultColumn(A))continue;let C;C=0===A||A===g?new tY(a,0===A):new tW(a),u.setDetectionResultColumn(A,C);let E=-1,m=E;for(let _=a.getMinY();_<=a.getMaxY();_++){if((E=t4.getStartColumn(u,A,_,f))<0||E>a.getMaxX()){if(-1===m)continue;E=m}let I=t4.detectCodeword(e,a.getMinX(),a.getMaxX(),f,E,_,s,o);null!=I&&(C.setCodeword(_,I),m=E,s=Math.min(s,I.getWidth()),o=Math.max(o,I.getWidth()))}}return t4.createDecoderResult(u)}static merge(e,t){if(null==e&&null==t)return null;let r=t4.getBarcodeMetadata(e,t);if(null==r)return null;let n=tH.merge(t4.adjustBoundingBox(e),t4.adjustBoundingBox(t));return new tZ(r,n)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let r=t4.getMax(t),n=0;for(let i of t)if(n+=r-i,i>0)break;let s=e.getCodewords();for(let o=0;n>0&&null==s[o];o++)n--;let a=0;for(let l=t.length-1;l>=0&&(a+=r-t[l],!(t[l]>0));l--);for(let h=s.length-1;a>0&&null==s[h];h--)a--;return e.getBoundingBox().addMissingRows(n,a,e.isLeft())}static getMax(e){let t=-1;for(let r of e)t=Math.max(t,r);return t}static getBarcodeMetadata(e,t){let r;if(null==e||null==(r=e.getBarcodeMetadata()))return null==t?null:t.getBarcodeMetadata();let n;return null==t||null==(n=t.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(e,t,r,n,i,s){let o=new tY(t,n);for(let a=0;a<2;a++){let l=0===a?1:-1,h=Math.trunc(Math.trunc(r.getX()));for(let u=Math.trunc(Math.trunc(r.getY()));u<=t.getMaxY()&&u>=t.getMinY();u+=l){let d=t4.detectCodeword(e,0,e.getWidth(),n,h,u,i,s);null!=d&&(o.setCodeword(u,d),h=n?d.getStartX():d.getEndX())}}return o}static adjustCodewordCount(e,t){let r=t[0][1],n=r.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t4.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===n.length){if(i<1||i>tL.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(e){let t=t4.createBarcodeMatrix(e);t4.adjustCodewordCount(e,t);let r=[],n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=[];for(let o=0;o<e.getBarcodeRowCount();o++)for(let a=0;a<e.getBarcodeColumnCount();a++){let l=t[o][a+1].getValue(),h=o*e.getBarcodeColumnCount()+a;0===l.length?r.push(h):1===l.length?n[h]=l[0]:(s.push(h),i.push(l))}let u=Array(i.length);for(let d=0;d<u.length;d++)u[d]=i[d];return t4.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,tL.toIntArray(r),tL.toIntArray(s),u)}static createDecoderResultFromAmbiguousValues(e,t,r,n,i){let s=new Int32Array(n.length),o=100;for(;o-- >0;){for(let a=0;a<s.length;a++)t[n[a]]=i[a][s[a]];try{return t4.decodeCodewords(t,e,r)}catch(l){if(!(l instanceof N))throw l}if(0===s.length)break;for(let h=0;h<s.length;h++){if(s[h]<i[h].length-1){s[h]++;break}if(s[h]=0,h===s.length-1)throw N.getChecksumInstance()}}throw N.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let n=0;n<t[r].length;n++)t[r][n]=new tz;let i=0;for(let s of e.getDetectionResultColumns()){if(null!=s){for(let o of s.getCodewords())if(null!=o){let a=o.getRowNumber();if(a>=0){if(a>=t.length)continue;t[a][i].setValue(o.getValue())}}}i++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,r,n){let i=n?1:-1,s=null;if(t4.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(r)),null!=s)return n?s.getEndX():s.getStartX();if(null!=(s=e.getDetectionResultColumn(t).getCodewordNearby(r)))return n?s.getStartX():s.getEndX();if(t4.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(r)),null!=s)return n?s.getEndX():s.getStartX();let o=0;for(;t4.isValidBarcodeColumn(e,t-i);){for(let a of(t-=i,e.getDetectionResultColumn(t).getCodewords()))if(null!=a)return(n?a.getEndX():a.getStartX())+i*o*(a.getEndX()-a.getStartX());o++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,r,n,i,s,o,a){i=t4.adjustCodewordStartColumn(e,t,r,n,i,s);let l=t4.getModuleBitCount(e,t,r,n,i,s);if(null==l)return null;let h,u=eg.sum(l);if(n)h=i+u;else{for(let d=0;d<l.length/2;d++){let c=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=c}i=(h=i)-u}if(!t4.checkCodewordSkew(u,o,a))return null;let g=tq.getDecodedValue(l),f=tL.getCodeword(g);return -1===f?null:new tK(i,h,t4.getCodewordBucketNumber(g),f)}static getModuleBitCount(e,t,r,n,i,s){let o=i,a=new Int32Array(8),l=0,h=n?1:-1,u=n;for(;(n?o<r:o>=t)&&l<a.length;)e.get(o,s)===u?(a[l]++,o+=h):(l++,u=!u);return l===a.length||o===(n?r:t)&&l===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,r,n,i,s){let o=i,a=n?-1:1;for(let l=0;l<2;l++){for(;(n?o>=t:o<r)&&n===e.get(o,s);){if(Math.abs(i-o)>t4.CODEWORD_SKEW_SIZE)return i;o+=a}a=-a,n=!n}return o}static checkCodewordSkew(e,t,r){return t-t4.CODEWORD_SKEW_SIZE<=e&&e<=r+t4.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,r){if(0===e.length)throw F.getFormatInstance();let n=1<<t+1,i=t4.correctErrors(e,r,n);t4.verifyCodewordCount(e,n);let s=t6.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(r.length),s}static correctErrors(e,t,r){if(null!=t&&t.length>r/2+t4.MAX_ERRORS||r<0||r>t4.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return t4.errorCorrection.decode(e,r,t)}static verifyCodewordCount(e,t){if(e.length<4)throw F.getFormatInstance();let r=e[0];if(r>e.length)throw F.getFormatInstance();if(0===r){if(t<e.length)e[0]=e.length-t;else throw F.getFormatInstance()}}static getBitCountForCodeword(e){let t=new Int32Array(8),r=0,n=t.length-1;for(;!((1&e)!==r&&(r=1&e,--n<0));)t[n]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return t4.getCodewordBucketNumber(t4.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new tX;for(let r=0;r<e.length;r++){t.format("Row %2d: ",r);for(let n=0;n<e[r].length;n++){let i=e[r][n];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}t4.CODEWORD_SKEW_SIZE=2,t4.MAX_ERRORS=3,t4.MAX_EC_CODEWORDS=512,t4.errorCorrection=new tU;class t7{decode(e,t=null){let r=t7.decode(e,t,!1);if(null==r||0===r.length||null==r[0])throw G.getNotFoundInstance();return r[0]}decodeMultiple(e,t=null){try{return t7.decode(e,t,!0)}catch(r){if(r instanceof F||r instanceof N)throw G.getNotFoundInstance();throw r}}static decode(e,t,r){let n=[],i=tv.detectMultiple(e,t,r);for(let s of i.getPoints()){let o=t4.decode(i.getBits(),s[4],s[5],s[6],s[7],t7.getMinCodewordWidth(s),t7.getMaxCodewordWidth(s)),a=new j(o.getText(),o.getRawBytes(),void 0,s,er.PDF_417);a.putMetadata(en.ERROR_CORRECTION_LEVEL,o.getECLevel());let l=o.getOther();null!=l&&a.putMetadata(en.PDF417_EXTRA_METADATA,l),n.push(a)}return n.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?b.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(t7.getMaxWidth(e[0],e[4]),t7.getMaxWidth(e[6],e[2])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN),Math.max(t7.getMaxWidth(e[1],e[5]),t7.getMaxWidth(e[7],e[3])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(t7.getMinWidth(e[0],e[4]),t7.getMinWidth(e[6],e[2])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN),Math.min(t7.getMinWidth(e[1],e[5]),t7.getMinWidth(e[7],e[3])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN)))}reset(){}}class t5 extends S{}t5.kind="ReaderException";class t9{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;let t=null!=e&&void 0!==e.get(L.TRY_HARDER),r=null==e?null:e.get(L.POSSIBLE_FORMATS),n=[];if(null!=r){let i=r.some(e=>e===er.UPC_A||e===er.UPC_E||e===er.EAN_13||e===er.EAN_8||e===er.CODABAR||e===er.CODE_39||e===er.CODE_93||e===er.CODE_128||e===er.ITF||e===er.RSS_14||e===er.RSS_EXPANDED);i&&!t&&n.push(new ti(e,this.verbose)),r.includes(er.QR_CODE)&&n.push(new tP),r.includes(er.DATA_MATRIX)&&n.push(new tf),r.includes(er.AZTEC)&&n.push(new eR),r.includes(er.PDF_417)&&n.push(new t7),i&&t&&n.push(new ti(e,this.verbose))}0===n.length&&(t||n.push(new ti(e,this.verbose)),n.push(new tP),n.push(new tf),n.push(new eR),n.push(new t7),t&&n.push(new ti(e,this.verbose))),this.readers=n}reset(){if(null!==this.readers)for(let e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new t5("No readers where selected, nothing can be read.");for(let t of this.readers)try{return t.decode(e,this.hints)}catch(r){if(r instanceof t5)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}(l=m||(m={}))[l.ERROR_CORRECTION=0]="ERROR_CORRECTION",l[l.CHARACTER_SET=1]="CHARACTER_SET",l[l.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",l[l.MIN_SIZE=3]="MIN_SIZE",l[l.MAX_SIZE=4]="MAX_SIZE",l[l.MARGIN=5]="MARGIN",l[l.PDF417_COMPACT=6]="PDF417_COMPACT",l[l.PDF417_COMPACTION=7]="PDF417_COMPACTION",l[l.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",l[l.AZTEC_LAYERS=9]="AZTEC_LAYERS",l[l.QR_VERSION=10]="QR_VERSION";var re=m;class rt{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new eo(e,Int32Array.from([1])))}buildGenerator(e){let t=this.cachedGenerators;if(e>=t.length){let r=t[t.length-1],n=this.field;for(let i=t.length;i<=e;i++){let s=r.multiply(new eo(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));t.push(s),r=s}}return t[e]}encode(e,t){if(0===t)throw new T("No error correction bytes");let r=e.length-t;if(r<=0)throw new T("No data bytes provided");let n=this.buildGenerator(t),i=new Int32Array(r);y.arraycopy(e,0,i,0,r);let s=new eo(this.field,i);s=s.multiplyByMonomial(t,1);let o=s.divide(n)[1],a=o.getCoefficients(),l=t-a.length;for(let h=0;h<l;h++)e[r+h]=0;y.arraycopy(a,0,e,r+l,a.length)}}class rr{constructor(){}static applyMaskPenaltyRule1(e){return rr.applyMaskPenaltyRule1Internal(e,!0)+rr.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0,r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){let o=r[s];for(let a=0;a<n-1;a++){let l=o[a];l===o[a+1]&&l===r[s+1][a]&&l===r[s+1][a+1]&&t++}}return rr.N2*t}static applyMaskPenaltyRule3(e){let t=0,r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let o=0;o<n;o++){let a=r[s];o+6<n&&1===a[o]&&0===a[o+1]&&1===a[o+2]&&1===a[o+3]&&1===a[o+4]&&0===a[o+5]&&1===a[o+6]&&(rr.isWhiteHorizontal(a,o-4,o)||rr.isWhiteHorizontal(a,o+7,o+11))&&t++,s+6<i&&1===r[s][o]&&0===r[s+1][o]&&1===r[s+2][o]&&1===r[s+3][o]&&1===r[s+4][o]&&0===r[s+5][o]&&1===r[s+6][o]&&(rr.isWhiteVertical(r,o,s-4,s)||rr.isWhiteVertical(r,o,s+7,s+11))&&t++}return t*rr.N3}static isWhiteHorizontal(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(let n=t;n<r;n++)if(1===e[n])return!1;return!0}static isWhiteVertical(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let i=r;i<n;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0,r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++){let o=r[s];for(let a=0;a<n;a++)1===o[a]&&t++}let l=e.getHeight()*e.getWidth(),h=Math.floor(10*Math.abs(2*t-l)/l);return h*rr.N4}static getDataMaskBit(e,t,r){let n,i;switch(e){case 0:n=r+t&1;break;case 1:n=1&r;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:n=(1&(i=r*t))+i%3;break;case 6:n=(1&(i=r*t))+i%3&1;break;case 7:n=(i=r*t)%3+(r+t&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return 0===n}static applyMaskPenaltyRule1Internal(e,t){let r=0,n=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let o=0;o<n;o++){let a=0,l=-1;for(let h=0;h<i;h++){let u=t?s[o][h]:s[h][o];u===l?a++:(a>=5&&(r+=rr.N1+(a-5)),a=1,l=u)}a>=5&&(r+=rr.N1+(a-5))}return r}}rr.N1=3,rr.N2=3,rr.N3=40,rr.N4=10;class rn{constructor(e,t){this.width=e,this.height=t;let r=Array(t);for(let n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,r){this.bytes[t][e]=r}setBoolean(e,t,r){this.bytes[t][e]=r?1:0}clear(e){for(let t of this.bytes)B.fill(t,e)}equals(e){if(!(e instanceof rn)||this.width!==e.width||this.height!==e.height)return!1;for(let t=0,r=this.height;t<r;++t){let n=this.bytes[t],i=e.bytes[t];for(let s=0,o=this.width;s<o;++s)if(n[s]!==i[s])return!1}return!0}toString(){let e=new U;for(let t=0,r=this.height;t<r;++t){let n=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(n[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class ri{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let e=new U;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ri.NUM_MASK_PATTERNS}}ri.NUM_MASK_PATTERNS=8;class rs extends S{}rs.kind="WriterException";class ro{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,r,n,i){ro.clearMatrix(i),ro.embedBasicPatterns(r,i),ro.embedTypeInfo(t,n,i),ro.maybeEmbedVersionInfo(r,i),ro.embedDataBits(e,n,i)}static embedBasicPatterns(e,t){ro.embedPositionDetectionPatternsAndSeparators(t),ro.embedDarkDotAtLeftBottomCorner(t),ro.maybeEmbedPositionAdjustmentPatterns(e,t),ro.embedTimingPatterns(t)}static embedTypeInfo(e,t,r){let n=new P;ro.makeTypeInfoBits(e,t,n);for(let i=0,s=n.getSize();i<s;++i){let o=n.get(n.getSize()-1-i),a=ro.TYPE_INFO_COORDINATES[i],l=a[0],h=a[1];if(r.setBoolean(l,h,o),i<8){let u=r.getWidth()-i-1;r.setBoolean(u,8,o)}else{let d=r.getHeight()-7+(i-8);r.setBoolean(8,d,o)}}}static maybeEmbedVersionInfo(e,t){if(7>e.getVersionNumber())return;let r=new P;ro.makeVersionInfoBits(e,r);let n=17;for(let i=0;i<6;++i)for(let s=0;s<3;++s){let o=r.get(n);n--,t.setBoolean(i,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,i,o)}}static embedDataBits(e,t,r){let n=0,i=-1,s=r.getWidth()-1,o=r.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);o>=0&&o<r.getHeight();){for(let a=0;a<2;++a){let l=s-a;if(!ro.isEmpty(r.get(l,o)))continue;let h;n<e.getSize()?(h=e.get(n),++n):h=!1,255!==t&&rr.getDataMaskBit(t,l,o)&&(h=!h),r.setBoolean(l,o,h)}o+=i}o+=i=-i,s-=2}if(n!==e.getSize())throw new rs("Not all bits consumed: "+n+"/"+e.getSize())}static findMSBSet(e){return 32-b.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new T("0 polynomial");let r=ro.findMSBSet(t);for(e<<=r-1;ro.findMSBSet(e)>=r;)e^=t<<ro.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,t,r){if(!ri.isValidMaskPattern(t))throw new rs("Invalid mask pattern");let n=e.getBits()<<3|t;r.appendBits(n,5);let i=ro.calculateBCHCode(n,ro.TYPE_INFO_POLY);r.appendBits(i,10);let s=new P;if(s.appendBits(ro.TYPE_INFO_MASK_PATTERN,15),r.xor(s),15!==r.getSize())throw new rs("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);let r=ro.calculateBCHCode(e.getVersionNumber(),ro.VERSION_INFO_POLY);if(t.appendBits(r,12),18!==t.getSize())throw new rs("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){let r=(t+1)%2;ro.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),ro.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new rs;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,r){for(let n=0;n<8;++n){if(!ro.isEmpty(r.get(e+n,t)))throw new rs;r.setNumber(e+n,t,0)}}static embedVerticalSeparationPattern(e,t,r){for(let n=0;n<7;++n){if(!ro.isEmpty(r.get(e,t+n)))throw new rs;r.setNumber(e,t+n,0)}}static embedPositionAdjustmentPattern(e,t,r){for(let n=0;n<5;++n){let i=ro.POSITION_ADJUSTMENT_PATTERN[n];for(let s=0;s<5;++s)r.setNumber(e+s,t+n,i[s])}}static embedPositionDetectionPattern(e,t,r){for(let n=0;n<7;++n){let i=ro.POSITION_DETECTION_PATTERN[n];for(let s=0;s<7;++s)r.setNumber(e+s,t+n,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){let t=ro.POSITION_DETECTION_PATTERN[0].length;ro.embedPositionDetectionPattern(0,0,e),ro.embedPositionDetectionPattern(e.getWidth()-t,0,e),ro.embedPositionDetectionPattern(0,e.getWidth()-t,e),ro.embedHorizontalSeparationPattern(0,7,e),ro.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),ro.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),ro.embedVerticalSeparationPattern(7,0,e),ro.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),ro.embedVerticalSeparationPattern(7,e.getHeight()-7,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(2>e.getVersionNumber())return;let r=e.getVersionNumber()-1,n=ro.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let i=0,s=n.length;i!==s;i++){let o=n[i];if(o>=0)for(let a=0;a!==s;a++){let l=n[a];l>=0&&ro.isEmpty(t.get(l,o))&&ro.embedPositionAdjustmentPattern(l-2,o-2,t)}}}}ro.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1]),]),ro.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1]),]),ro.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170]),]),ro.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8]),]),ro.VERSION_INFO_POLY=7973,ro.TYPE_INFO_POLY=1335,ro.TYPE_INFO_MASK_PATTERN=21522;class ra{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class rl{constructor(){}static calculateMaskPenalty(e){return rr.applyMaskPenaltyRule1(e)+rr.applyMaskPenaltyRule2(e)+rr.applyMaskPenaltyRule3(e)+rr.applyMaskPenaltyRule4(e)}static encode(e,t,r=null){let n=rl.DEFAULT_BYTE_MODE_ENCODING,i=null!==r&&void 0!==r.get(re.CHARACTER_SET);i&&(n=r.get(re.CHARACTER_SET).toString());let s=this.chooseMode(e,n),o=new P;if(s===tp.BYTE&&(i||rl.DEFAULT_BYTE_MODE_ENCODING!==n)){let a=v.getCharacterSetECIByName(n);void 0!==a&&this.appendECI(a,o)}this.appendModeInfo(s,o);let l=new P;this.appendBytes(e,s,l,n);let h;if(null!==r&&void 0!==r.get(re.QR_VERSION)){let u=Number.parseInt(r.get(re.QR_VERSION).toString(),10);h=tm.getVersionForNumber(u);let d=this.calculateBitsNeeded(s,o,l,h);if(!this.willFit(d,h,t))throw new rs("Data too big for requested version")}else h=this.recommendVersion(t,s,o,l);let c=new P;c.appendBitArray(o);let g=s===tp.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(g,h,s,c),c.appendBitArray(l);let f=h.getECBlocksForLevel(t),w=h.getTotalCodewords()-f.getTotalECCodewords();this.terminateBits(w,c);let A=this.interleaveWithECBytes(c,h.getTotalCodewords(),w,f.getNumBlocks()),C=new ri;C.setECLevel(t),C.setMode(s),C.setVersion(h);let E=h.getDimensionForVersion(),m=new rn(E,E),_=this.chooseMaskPattern(A,t,h,m);return C.setMaskPattern(_),ro.buildMatrix(A,t,h,_,m),C.setMatrix(m),C}static recommendVersion(e,t,r,n){let i=this.calculateBitsNeeded(t,r,n,tm.getVersionForNumber(1)),s=this.chooseVersion(i,e),o=this.calculateBitsNeeded(t,r,n,s);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(e){return e<rl.ALPHANUMERIC_TABLE.length?rl.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(v.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return tp.KANJI;let r=!1,n=!1;for(let i=0,s=e.length;i<s;++i){let o=e.charAt(i);if(rl.isDigit(o))r=!0;else{if(-1===this.getAlphanumericCode(o.charCodeAt(0)))return tp.BYTE;n=!0}}return n?tp.ALPHANUMERIC:r?tp.NUMERIC:tp.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=x.encode(e,v.SJIS)}catch(r){return!1}let n=t.length;if(n%2!=0)return!1;for(let i=0;i<n;i+=2){let s=255&t[i];if((s<129||s>159)&&(s<224||s>235))return!1}return!0}static chooseMaskPattern(e,t,r,n){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<ri.NUM_MASK_PATTERNS;o++){ro.buildMatrix(e,t,r,o,n);let a=this.calculateMaskPenalty(n);a<i&&(i=a,s=o)}return s}static chooseVersion(e,t){for(let r=1;r<=40;r++){let n=tm.getVersionForNumber(r);if(rl.willFit(e,n,t))return n}throw new rs("Data too big")}static willFit(e,t,r){let n=t.getTotalCodewords(),i=t.getECBlocksForLevel(r),s=i.getTotalECCodewords();return n-s>=(e+7)/8}static terminateBits(e,t){let r=8*e;if(t.getSize()>r)throw new rs("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(let n=0;n<4&&t.getSize()<r;++n)t.appendBit(!1);let i=7&t.getSize();if(i>0)for(let s=i;s<8;s++)t.appendBit(!1);let o=e-t.getSizeInBytes();for(let a=0;a<o;++a)t.appendBits((1&a)==0?236:17,8);if(t.getSize()!==r)throw new rs("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,r,n,i,s){if(n>=r)throw new rs("Block ID too large");let o=e%r,a=r-o,l=Math.floor(e/r),h=Math.floor(t/r),u=h+1,d=l-h,c=l+1-u;if(d!==c)throw new rs("EC bytes mismatch");if(r!==a+o)throw new rs("RS blocks mismatch");if(e!==(h+d)*a+(u+c)*o)throw new rs("Total bytes mismatch");n<a?(i[0]=h,s[0]=d):(i[0]=u,s[0]=c)}static interleaveWithECBytes(e,t,r,n){if(e.getSizeInBytes()!==r)throw new rs("Number of bits and data bytes does not match");let i=0,s=0,o=0,a=[];for(let l=0;l<n;++l){let h=new Int32Array(1),u=new Int32Array(1);rl.getNumDataBytesAndNumECBytesForBlockID(t,r,n,l,h,u);let d=h[0],c=new Uint8Array(d);e.toBytes(8*i,c,0,d);let g=rl.generateECBytes(c,u[0]);a.push(new ra(c,g)),s=Math.max(s,d),o=Math.max(o,g.length),i+=h[0]}if(r!==i)throw new rs("Data bytes does not match offset");let f=new P;for(let w=0;w<s;++w)for(let A of a){let C=A.getDataBytes();w<C.length&&f.appendBits(C[w],8)}for(let E=0;E<o;++E)for(let m of a){let _=m.getErrorCorrectionBytes();E<_.length&&f.appendBits(_[E],8)}if(t!==f.getSizeInBytes())throw new rs("Interleaving error: "+t+" and "+f.getSizeInBytes()+" differ.");return f}static generateECBytes(e,t){let r=e.length,n=new Int32Array(r+t);for(let i=0;i<r;i++)n[i]=255&e[i];new rt(el.QR_CODE_FIELD_256).encode(n,t);let s=new Uint8Array(t);for(let o=0;o<t;o++)s[o]=n[r+o];return s}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,r,n){let i=r.getCharacterCountBits(t);if(e>=1<<i)throw new rs(e+" is bigger than "+((1<<i)-1));n.appendBits(e,i)}static appendBytes(e,t,r,n){switch(t){case tp.NUMERIC:rl.appendNumericBytes(e,r);break;case tp.ALPHANUMERIC:rl.appendAlphanumericBytes(e,r);break;case tp.BYTE:rl.append8BitBytes(e,r,n);break;case tp.KANJI:rl.appendKanjiBytes(e,r);break;default:throw new rs("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){let t=rl.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){let r=e.length,n=0;for(;n<r;){let i=rl.getDigit(e.charAt(n));if(n+2<r){let s=rl.getDigit(e.charAt(n+1)),o=rl.getDigit(e.charAt(n+2));t.appendBits(100*i+10*s+o,10),n+=3}else if(n+1<r){let a=rl.getDigit(e.charAt(n+1));t.appendBits(10*i+a,7),n+=2}else t.appendBits(i,4),n++}}static appendAlphanumericBytes(e,t){let r=e.length,n=0;for(;n<r;){let i=rl.getAlphanumericCode(e.charCodeAt(n));if(-1===i)throw new rs;if(n+1<r){let s=rl.getAlphanumericCode(e.charCodeAt(n+1));if(-1===s)throw new rs;t.appendBits(45*i+s,11),n+=2}else t.appendBits(i,6),n++}}static append8BitBytes(e,t,r){let n;try{n=x.encode(e,r)}catch(i){throw new rs(i)}for(let s=0,o=n.length;s!==o;s++){let a=n[s];t.appendBits(a,8)}}static appendKanjiBytes(e,t){let r;try{r=x.encode(e,v.SJIS)}catch(n){throw new rs(n)}let i=r.length;for(let s=0;s<i;s+=2){let o=255&r[s],a=255&r[s+1],l=o<<8&4294967295|a,h=-1;if(l>=33088&&l<=40956?h=l-33088:l>=57408&&l<=60351&&(h=l-49472),-1===h)throw new rs("Invalid byte sequence");let u=(h>>8)*192+(255&h);t.appendBits(u,13)}}static appendECI(e,t){t.appendBits(tp.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}rl.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1,]),rl.DEFAULT_BYTE_MODE_ENCODING=v.UTF8.getName();class rh{write(e,t,r,n=null){if(0===e.length)throw new T("Found empty contents");if(t<0||r<0)throw new T("Requested dimensions are too small: "+t+"x"+r);let i=tw.L,s=rh.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(re.ERROR_CORRECTION)&&(i=tw.fromString(n.get(re.ERROR_CORRECTION).toString())),void 0!==n.get(re.MARGIN)&&(s=Number.parseInt(n.get(re.MARGIN).toString(),10)));let o=rl.encode(e,i,n);return this.renderResult(o,t,r,s)}writeToDom(e,t,r,n,i=null){"string"==typeof e&&(e=document.querySelector(e));let s=this.write(t,r,n,i);e&&e.appendChild(s)}renderResult(e,t,r,n){let i=e.getMatrix();if(null===i)throw new eu;let s=i.getWidth(),o=i.getHeight(),a=s+2*n,l=o+2*n,h=Math.max(t,a),u=Math.max(r,l),d=Math.min(Math.floor(h/a),Math.floor(u/l)),c=Math.floor((h-s*d)/2),g=Math.floor((u-o*d)/2),f=this.createSVGElement(h,u);for(let w=0,A=g;w<o;w++,A+=d)for(let C=0,E=c;C<s;C++,E+=d)if(1===i.get(C,w)){let m=this.createSvgRectElement(E,A,d,d);f.appendChild(m)}return f}createSVGElement(e,t){let r=document.createElementNS(rh.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r}createSvgRectElement(e,t,r,n){let i=document.createElementNS(rh.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}rh.QUIET_ZONE_SIZE=4,rh.SVG_NS="http://www.w3.org/2000/svg";class ru{encode(e,t,r,n,i){if(0===e.length)throw new T("Found empty contents");if(t!==er.QR_CODE)throw new T("Can only encode QR_CODE, but got "+t);if(r<0||n<0)throw new T(`Requested dimensions are too small: ${r}x${n}`);let s=tw.L,o=ru.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(re.ERROR_CORRECTION)&&(s=tw.fromString(i.get(re.ERROR_CORRECTION).toString())),void 0!==i.get(re.MARGIN)&&(o=Number.parseInt(i.get(re.MARGIN).toString(),10)));let a=rl.encode(e,s,i);return ru.renderResult(a,r,n,o)}static renderResult(e,t,r,n){let i=e.getMatrix();if(null===i)throw new eu;let s=i.getWidth(),o=i.getHeight(),a=s+2*n,l=o+2*n,h=Math.max(t,a),u=Math.max(r,l),d=Math.min(Math.floor(h/a),Math.floor(u/l)),c=Math.floor((h-s*d)/2),g=Math.floor((u-o*d)/2),f=new H(h,u);for(let w=0,A=g;w<o;w++,A+=d)for(let C=0,E=c;C<s;C++,E+=d)1===i.get(C,w)&&f.setRegion(E,A,d,d);return f}}ru.QUIET_ZONE_SIZE=4;class rd extends z{constructor(e,t,r,n,i,s,o,a){if(super(s,o),this.yuvData=e,this.dataWidth=t,this.dataHeight=r,this.left=n,this.top=i,n+s>t||i+o>r)throw new T("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(s,o)}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);let r=this.getWidth();(null==t||t.length<r)&&(t=new Uint8ClampedArray(r));let n=(e+this.top)*this.dataWidth+this.left;return y.arraycopy(this.yuvData,n,t,0,r),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;let r=e*t,n=new Uint8ClampedArray(r),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return y.arraycopy(this.yuvData,i,n,0,r),n;for(let s=0;s<t;s++){let o=s*e;y.arraycopy(this.yuvData,i,n,o,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new rd(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,n,!1)}renderThumbnail(){let e=this.getWidth()/rd.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/rd.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),n=this.yuvData,i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){let o=s*e;for(let a=0;a<e;a++){let l=255&n[i+a*rd.THUMBNAIL_SCALE_FACTOR];r[o+a]=4278190080|65793*l}i+=this.dataWidth*rd.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/rd.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rd.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){let r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<t;n++,i+=this.dataWidth){let s=i+e/2;for(let o=i,a=i+e-1;o<s;o++,a--){let l=r[o];r[o]=r[a],r[a]=l}}}invert(){return new Y(this)}}rd.THUMBNAIL_SCALE_FACTOR=2;class rc extends z{constructor(e,t,r,n,i,s,o){if(super(t,r),this.dataWidth=n,this.dataHeight=i,this.left=s,this.top=o,4===e.BYTES_PER_ELEMENT){let a=t*r,l=new Uint8ClampedArray(a);for(let h=0;h<a;h++){let u=e[h],d=u>>16&255,c=u>>7&510,g=255&u;l[h]=(d+c+g)/4&255}this.luminances=l}else this.luminances=e;if(void 0===n&&(this.dataWidth=t),void 0===i&&(this.dataHeight=r),void 0===s&&(this.left=0),void 0===o&&(this.top=0),this.left+t>this.dataWidth||this.top+r>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);let r=this.getWidth();(null==t||t.length<r)&&(t=new Uint8ClampedArray(r));let n=(e+this.top)*this.dataWidth+this.left;return y.arraycopy(this.luminances,n,t,0,r),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;let r=e*t,n=new Uint8ClampedArray(r),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return y.arraycopy(this.luminances,i,n,0,r),n;for(let s=0;s<t;s++){let o=s*e;y.arraycopy(this.luminances,i,n,o,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new rc(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Y(this)}}class rg extends v{static forName(e){return this.getCharacterSetECIByName(e)}}class rf{}rf.ISO_8859_1=v.ISO8859_1;class rw{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class rA{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class rC{constructor(e){this.previous=e}getPrevious(){return this.previous}}class rE extends rC{constructor(e,t,r){super(e),this.value=t,this.bitCount=r}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new rE(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new rE(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+b.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class rm extends rE{constructor(e,t,r){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=r}appendTo(e,t){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===r?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)}addBinaryShift(e,t){return new rm(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function r_(e,t,r){return new rE(e,t,r)}let rI=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rS=new rE(null,0,0),rp=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],rT=function(e){for(let t of e)B.fill(t,-1);return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(B.createInt32Array(6,6));class rR{constructor(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let r=this.bitCount,n=this.token;if(e!==this.mode){let i=rp[this.mode][e];n=r_(n,65535&i,i>>16),r+=i>>16}let s=2===e?4:5;return n=r_(n,t,s),new rR(n,e,0,r+s)}shiftAndAppend(e,t){let r=this.token,n=2===this.mode?4:5;return r=r_(r,rT[this.mode][e],n),r=r_(r,t,5),new rR(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(e){let t=this.token,r=this.mode,n=this.bitCount;if(4===this.mode||2===this.mode){let i=rp[r][0];t=r_(t,65535&i,i>>16),n+=i>>16,r=0}let s=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new rR(t,r,this.binaryShiftByteCount+1,n+s);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){var t,r,n;if(0===this.binaryShiftByteCount)return this;let i=this.token;return t=i,r=e-this.binaryShiftByteCount,n=this.binaryShiftByteCount,i=new rm(t,r,n),new rR(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(rp[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=rR.calculateBinaryShiftCost(e)-rR.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new P;for(let i of t)i.appendTo(n,e);return n}toString(){return V.format("%s bits=%d bytes=%d",rI[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}rR.INITIAL_STATE=new rR(rS,0,0,0);let rN=function(e){let t=V.getCharCode(" "),r=V.getCharCode("."),n=V.getCharCode(",");e[0][t]=1;let i=V.getCharCode("Z"),s=V.getCharCode("A");for(let o=s;o<=i;o++)e[0][o]=o-s+2;e[1][t]=1;let a=V.getCharCode("z"),l=V.getCharCode("a");for(let h=l;h<=a;h++)e[1][h]=h-l+2;e[2][t]=1;let u=V.getCharCode("9"),d=V.getCharCode("0");for(let c=d;c<=u;c++)e[2][c]=c-d+2;e[2][n]=12,e[2][r]=13;let g=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let f=0;f<g.length;f++)e[3][V.getCharCode(g[f])]=f;let w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<w.length;A++)V.getCharCode(w[A])>0&&(e[4][V.getCharCode(w[A])]=A);return e}(B.createInt32Array(5,256));class rD{constructor(e){this.text=e}encode(){let e=V.getCharCode(" "),t=V.getCharCode("\n"),r=rA.singletonList(rR.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let i,s=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case V.getCharCode("\r"):i=s===t?2:0;break;case V.getCharCode("."):i=s===e?3:0;break;case V.getCharCode(","):i=s===e?4:0;break;case V.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(r=rD.updateStateListForPair(r,n,i),n++):r=this.updateStateListForChar(r,n)}let o=rA.min(r,(e,t)=>e.getBitCount()-t.getBitCount());return o.toBitArray(this.text)}updateStateListForChar(e,t){let r=[];for(let n of e)this.updateStateForChar(n,t,r);return rD.simplifyStates(r)}updateStateForChar(e,t,r){let n=255&this.text[t],i=rN[e.getMode()][n]>0,s=null;for(let o=0;o<=4;o++){let a=rN[o][n];if(a>0){if(null==s&&(s=e.endBinaryShift(t)),!i||o===e.getMode()||2===o){let l=s.latchAndAppend(o,a);r.push(l)}if(!i&&rT[e.getMode()][o]>=0){let h=s.shiftAndAppend(o,a);r.push(h)}}}if(e.getBinaryShiftByteCount()>0||0===rN[e.getMode()][n]){let u=e.addBinaryShiftChar(t);r.push(u)}}static updateStateListForPair(e,t,r){let n=[];for(let i of e)this.updateStateForPair(i,t,r,n);return this.simplifyStates(n)}static updateStateForPair(e,t,r,n){let i=e.endBinaryShift(t);if(n.push(i.latchAndAppend(4,r)),4!==e.getMode()&&n.push(i.shiftAndAppend(4,r)),3===r||4===r){let s=i.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(s)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(o)}}static simplifyStates(e){let t=[];for(let r of e){let n=!0;for(let i of t){if(i.isBetterThanOrEqualTo(r)){n=!1;break}r.isBetterThanOrEqualTo(i)&&(t=t.filter(e=>e!==i))}n&&t.push(r)}return t}}class ry{constructor(){}static encodeBytes(e){return ry.encode(e,ry.DEFAULT_EC_PERCENT,ry.DEFAULT_AZTEC_LAYERS)}static encode(e,t,r){let n=new rD(e).encode(),i=b.truncDivision(n.getSize()*t,100)+11,s=n.getSize()+i,o,a,l,h,u;if(r!==ry.DEFAULT_AZTEC_LAYERS){if(o=r<0,(a=Math.abs(r))>(o?ry.MAX_NB_BITS_COMPACT:ry.MAX_NB_BITS))throw new T(V.format("Illegal value %s for layers",r));let d=(l=ry.totalBitsInLayer(a,o))-l%(h=ry.WORD_SIZE[a]);if((u=ry.stuffBits(n,h)).getSize()+i>d||o&&u.getSize()>64*h)throw new T("Data to large for user specified layer")}else{h=0,u=null;for(let c=0;;c++){if(c>ry.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(a=(o=c<=3)?c+1:c,s>(l=ry.totalBitsInLayer(a,o)))continue;(null==u||h!==ry.WORD_SIZE[a])&&(h=ry.WORD_SIZE[a],u=ry.stuffBits(n,h));let g=l-l%h;if(!(o&&u.getSize()>64*h)&&u.getSize()+i<=g)break}}let f=ry.generateCheckWords(u,l,h),w=u.getSize()/h,A=ry.generateModeMessage(o,a,w),C=(o?11:14)+4*a,E=new Int32Array(C),m;if(o){m=C;for(let _=0;_<E.length;_++)E[_]=_}else{m=C+1+2*b.truncDivision(b.truncDivision(C,2)-1,15);let I=b.truncDivision(C,2),S=b.truncDivision(m,2);for(let p=0;p<I;p++){let R=p+b.truncDivision(p,15);E[I-p-1]=S-R-1,E[I+p]=S+R+1}}let N=new H(m);for(let D=0,y=0;D<a;D++){let O=(a-D)*4+(o?9:12);for(let M=0;M<O;M++){let B=2*M;for(let P=0;P<2;P++)f.get(y+B+P)&&N.set(E[2*D+P],E[2*D+M]),f.get(y+2*O+B+P)&&N.set(E[2*D+M],E[C-1-2*D-P]),f.get(y+4*O+B+P)&&N.set(E[C-1-2*D-P],E[C-1-2*D-M]),f.get(y+6*O+B+P)&&N.set(E[C-1-2*D-M],E[2*D+P])}y+=8*O}if(ry.drawModeMessage(N,o,m,A),o)ry.drawBullsEye(N,b.truncDivision(m,2),5);else{ry.drawBullsEye(N,b.truncDivision(m,2),7);for(let L=0,F=0;L<b.truncDivision(C,2)-1;L+=15,F+=16)for(let v=1&b.truncDivision(m,2);v<m;v+=2)N.set(b.truncDivision(m,2)-F,v),N.set(b.truncDivision(m,2)+F,v),N.set(v,b.truncDivision(m,2)-F),N.set(v,b.truncDivision(m,2)+F)}let k=new rw;return k.setCompact(o),k.setSize(m),k.setLayers(a),k.setCodeWords(w),k.setMatrix(N),k}static drawBullsEye(e,t,r){for(let n=0;n<r;n+=2)for(let i=t-n;i<=t+n;i++)e.set(i,t-n),e.set(i,t+n),e.set(t-n,i),e.set(t+n,i);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)}static generateModeMessage(e,t,r){let n=new P;return e?(n.appendBits(t-1,2),n.appendBits(r-1,6),n=ry.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(r-1,11),n=ry.generateCheckWords(n,40,4)),n}static drawModeMessage(e,t,r,n){let i=b.truncDivision(r,2);if(t)for(let s=0;s<7;s++){let o=i-3+s;n.get(s)&&e.set(o,i-5),n.get(s+7)&&e.set(i+5,o),n.get(20-s)&&e.set(o,i+5),n.get(27-s)&&e.set(i-5,o)}else for(let a=0;a<10;a++){let l=i-5+a+b.truncDivision(a,5);n.get(a)&&e.set(l,i-7),n.get(a+10)&&e.set(i+7,l),n.get(29-a)&&e.set(l,i+7),n.get(39-a)&&e.set(i-7,l)}}static generateCheckWords(e,t,r){let n=e.getSize()/r,i=new rt(ry.getGF(r)),s=b.truncDivision(t,r),o=ry.bitsToWords(e,r,s);i.encode(o,s-n);let a=new P;for(let l of(a.appendBits(0,t%r),Array.from(o)))a.appendBits(l,r);return a}static bitsToWords(e,t,r){let n=new Int32Array(r),i,s;for(i=0,s=e.getSize()/t;i<s;i++){let o=0;for(let a=0;a<t;a++)o|=e.get(i*t+a)?1<<t-a-1:0;n[i]=o}return n}static getGF(e){switch(e){case 4:return el.AZTEC_PARAM;case 6:return el.AZTEC_DATA_6;case 8:return el.AZTEC_DATA_8;case 10:return el.AZTEC_DATA_10;case 12:return el.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,t){let r=new P,n=e.getSize(),i=(1<<t)-2;for(let s=0;s<n;s+=t){let o=0;for(let a=0;a<t;a++)(s+a>=n||e.get(s+a))&&(o|=1<<t-1-a);(o&i)===i?(r.appendBits(o&i,t),s--):(o&i)==0?(r.appendBits(1|o,t),s--):r.appendBits(o,t)}return r}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ry.DEFAULT_EC_PERCENT=33,ry.DEFAULT_AZTEC_LAYERS=0,ry.MAX_NB_BITS=32,ry.MAX_NB_BITS_COMPACT=4,ry.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class rO{encode(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)}encodeWithHints(e,t,r,n,i){let s=rf.ISO_8859_1,o=ry.DEFAULT_EC_PERCENT,a=ry.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(re.CHARACTER_SET)&&(s=rg.forName(i.get(re.CHARACTER_SET).toString())),i.has(re.ERROR_CORRECTION)&&(o=b.parseInt(i.get(re.ERROR_CORRECTION).toString())),i.has(re.AZTEC_LAYERS)&&(a=b.parseInt(i.get(re.AZTEC_LAYERS).toString()))),rO.encodeLayers(e,t,r,n,s,o,a)}static encodeLayers(e,t,r,n,i,s,o){if(t!==er.AZTEC)throw new T("Can only encode AZTEC, but got "+t);let a=ry.encode(V.getBytes(e,i),s,o);return rO.renderResult(a,r,n)}static renderResult(e,t,r){let n=e.getMatrix();if(null==n)throw new eu;let i=n.getWidth(),s=n.getHeight(),o=Math.max(t,i),a=Math.max(r,s),l=Math.min(o/i,a/s),h=(o-i*l)/2,u=(a-s*l)/2,d=new H(o,a);for(let c=0,g=u;c<s;c++,g+=l)for(let f=0,w=h;f<i;f++,w+=l)n.get(f,c)&&d.setRegion(w,g,l,l);return d}}e.ArgumentException=p,e.ArithmeticException=ea,e.AztecCode=rw,e.AztecCodeReader=eR,e.AztecCodeWriter=rO,e.AztecDecoder=ec,e.AztecDetector=eT,e.AztecDetectorResult=eC,e.AztecEncoder=ry,e.AztecHighLevelEncoder=rD,e.AztecPoint=ep,e.BarcodeFormat=er,e.Binarizer=D,e.BinaryBitmap=R,e.BitArray=P,e.BitMatrix=H,e.BitSource=tu,e.BrowserAztecCodeReader=class extends Q{constructor(e=500){super(new eR,e)}},e.BrowserBarcodeReader=class extends Q{constructor(e=500,t){super(new ti(t),e,t)}},e.BrowserCodeReader=Q,e.BrowserDatamatrixCodeReader=class extends Q{constructor(e=500){super(new tf,e)}},e.BrowserMultiFormatReader=class extends Q{constructor(e=null,t=500){let r=new t9;r.setHints(e),super(r,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}},e.BrowserPDF417Reader=class extends Q{constructor(e=500){super(new t7,e)}},e.BrowserQRCodeReader=class extends Q{constructor(e=500){super(new tP,e)}},e.BrowserQRCodeSvgWriter=rh,e.CharacterSetECI=v,e.ChecksumException=N,e.Code128Reader=eD,e.Code39Reader=ey,e.DataMatrixDecodedBitStreamParser=td,e.DataMatrixReader=tf,e.DecodeHintType=L,e.DecoderResult=ei,e.DefaultGridSampler=eI,e.DetectorResult=eA,e.EAN13Reader=eF,e.EncodeHintType=re,e.Exception=S,e.FormatException=F,e.GenericGF=el,e.GenericGFPoly=eo,e.GlobalHistogramBinarizer=X,e.GridSampler=em,e.GridSamplerInstance=eS,e.HTMLCanvasElementLuminanceSource=Z,e.HybridBinarizer=W,e.ITFReader=eO,e.IllegalArgumentException=T,e.IllegalStateException=eu,e.InvertedLuminanceSource=Y,e.LuminanceSource=z,e.MathUtils=eg,e.MultiFormatOneDReader=ti,e.MultiFormatReader=t9,e.MultiFormatWriter=class{encode(e,t,r,n,i){let s;if(t===er.QR_CODE)s=new ru;else throw new T("No encoder available for format "+t);return s.encode(e,t,r,n,i)}},e.NotFoundException=G,e.OneDReader=eN,e.PDF417DecodedBitStreamParser=t6,e.PDF417DecoderErrorCorrection=tU,e.PDF417Reader=t7,e.PDF417ResultMetadata=tQ,e.PerspectiveTransform=e_,e.PlanarYUVLuminanceSource=rd,e.QRCodeByteMatrix=rn,e.QRCodeDataMask=t_,e.QRCodeDecodedBitStreamParser=tT,e.QRCodeDecoderErrorCorrectionLevel=tw,e.QRCodeDecoderFormatInformation=tA,e.QRCodeEncoder=rl,e.QRCodeEncoderQRCode=ri,e.QRCodeMaskUtil=rr,e.QRCodeMatrixUtil=ro,e.QRCodeMode=tp,e.QRCodeReader=tP,e.QRCodeVersion=tm,e.QRCodeWriter=ru,e.RGBLuminanceSource=rc,e.RSS14Reader=tn,e.RSSExpandedReader=tt,e.ReaderException=t5,e.ReedSolomonDecoder=ed,e.ReedSolomonEncoder=rt,e.ReedSolomonException=eh,e.Result=j,e.ResultMetadataType=en,e.ResultPoint=ew,e.StringUtils=V,e.UnsupportedOperationException=k,e.VideoInputDevice=K,e.WhiteRectangleDetector=eE,e.WriterException=rs,e.ZXingArrays=B,e.ZXingCharset=rg,e.ZXingInteger=b,e.ZXingStandardCharsets=rf,e.ZXingStringBuilder=U,e.ZXingStringEncoding=x,e.ZXingSystem=y,Object.defineProperty(e,"__esModule",{value:!0})})(t)}}]);